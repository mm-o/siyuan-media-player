<div class="sy__outline" style="max-width: 800px; margin: 0 auto;">
    <div style="text-align: center; padding: 2em; background: linear-gradient(135deg, #6366f1, #8b5cf6); border-radius: 12px;">
        <h1 style="color: white; margin: 0; font-size: 2.2em;">🎬 SiYuan Media Player</h1>
        <div style="color: rgba(255,255,255,0.9); margin-top: 0.5em; font-size: 1.1em;">Professional SiYuan Note media playback plugin with multi-platform playback, intelligent note management, and efficient learning tools</div>
        <div style="margin-top: 1.5em; display: flex; justify-content: center; gap: 12px; flex-wrap: wrap;">
            <a href="https://github.com/mm-o/siyuan-media-player/blob/main/CHANGELOG.md"
               style="padding: 8px 16px; background: rgba(255,255,255,0.2); color: white; border-radius: 6px; text-decoration: none; font-size: 0.9em;">🗓 Changelog</a>
               <a href="https://github.com/mm-o/siyuan-media-player/issues"
               style="padding: 8px 16px; background: rgba(255,255,255,0.2); color: white; border-radius: 6px; text-decoration: none; font-size: 0.9em;">💬 Issue Feedback</a>
            <a href="https://vcne5rvqxi9z.feishu.cn/wiki/HOKAw3KTiigaVukvcencOUh7nEb"
               style="padding: 8px 16px; background: rgba(255,255,255,0.2); color: white; border-radius: 6px; text-decoration: none; font-size: 0.9em;">👏 Acknowledgments</a>
        </div>
    </div>
    <div style="margin-top: 1.5em; padding: 1.5em; background: linear-gradient(135deg, #f0f9ff, #e0f2fe); border: 1px solid #bae6fd; border-radius: 8px; box-shadow: 0 4px 12px rgba(14,165,233,0.15);">
        <h2 style="color: #0ea5e9; margin: 0 0 1em; text-align: center; font-size: 1.3em;">🚀 Core Features</h2>
        <ul style="margin: 0; padding-left: 1.2em;">
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #6366f1; box-shadow: 0 2px 4px rgba(99,102,241,0.08);">🎥 <strong>Multi-platform Playback</strong> - Unified playback for local media, Bilibili videos, OpenList, and WebDAV cloud storage</li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #8b5cf6; box-shadow: 0 2px 4px rgba(139,92,246,0.08);">⏰ <strong>Timestamp Navigation</strong> - Precise timestamp links for one-click navigation to specific playback positions</li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #06b6d4; box-shadow: 0 2px 4px rgba(6,182,212,0.08);">🔄 <strong>Loop Segments</strong> - Custom loop playback segments for repeated learning of key content</li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #10b981; box-shadow: 0 2px 4px rgba(16,185,129,0.08);">📔 <strong>Media Notes</strong> - Screenshots, subtitles, and danmaku export with sub-document creation and smart search configuration for complete learning note ecosystem</li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #f59e0b; box-shadow: 0 2px 4px rgba(245,158,11,0.08);">🤖 <strong>Media Assistant</strong> - Subtitle lists, danmaku lists, and AI media summaries for intelligent analysis</li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #ef4444; box-shadow: 0 2px 4px rgba(239,68,68,0.08);">📋 <strong>Playlist Management</strong> - Database-driven management with tag classification, drag-and-drop sorting, and multi-view display</li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #8b5cf6; box-shadow: 0 2px 4px rgba(139,92,246,0.08);">📥 <strong>Batch Import</strong> - One-click import of Bilibili favorites, Bilibili collections, local folders, SiYuan workspace, OpenList, and WebDAV cloud storage to playlists</li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #06b6d4; box-shadow: 0 2px 4px rgba(6,182,212,0.08);">📝 <strong>Notes Panel</strong> - Independent document and block content viewing and editing with ID input, smart tags, and context menu operations</li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #10b981; box-shadow: 0 2px 4px rgba(16,185,129,0.08);">🔗 <strong>Smart Link Recognition</strong> - Direct playback of database URL field media links, Ctrl+click to force browser opening</li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #6366f1; box-shadow: 0 2px 4px rgba(99,102,241,0.08);">⚙️ <strong>Settings Panel</strong> - One-stop management for account configuration, player settings, and general options</li>
        </ul>
    </div>
    <div style="margin-top: 1.5em; padding: 1.5em; background: linear-gradient(135deg, #fef3f2, #fee2e2); border: 1px solid #fca5a5; border-radius: 8px; box-shadow: 0 4px 12px rgba(239,68,68,0.15);">
        <h2 style="color: #dc2626; margin: 0 0 1em; text-align: center; font-size: 1.3em;">🧧 Support, Encourage & Feature Requests</h2>
        <p style="margin: 0.5em 0;">If SiYuan Media Player has been helpful to you, please consider giving the author a like or buying a cup of coffee. This will encourage the author to continue optimizing and developing more useful features:</p>
        <div style="margin: 1em 0; text-align: center; display: flex; justify-content: space-around; flex-wrap: wrap; gap: 20px;">
            <div style="text-align: center;">
                <img src="/plugins/siyuan-media-player/assets/images/alipay.jpg"
                     alt="Alipay QR Code"
                     style="width: 280px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                <p style="margin: 0.5em 0; color: #666;">Alipay</p>
            </div>
            <div style="text-align: center;">
                <img src="/plugins/siyuan-media-player/assets/images/wechat.jpg"
                     alt="WeChat QR Code"
                     style="width: 280px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                <p style="margin: 0.5em 0; color: #666;">WeChat</p>
            </div>
        </div>
  </div>
    <div style="margin-top: 1.5em; padding: 1.5em; background: linear-gradient(135deg, #f0fdf4, #dcfce7); border: 1px solid #86efac; border-radius: 8px; box-shadow: 0 4px 12px rgba(34,197,94,0.15);">
        <h2 style="color: #16a34a; margin: 0 0 1em; text-align: center; font-size: 1.3em;">🚀 Recent Updates</h2>

<strong style="color: #6366f1; font-size: 1.1em;">📅 v0.4.2 Update (2025.7.15)</strong>
<ul style="margin: 0.5em 0; padding-left: 1.2em;">
<li style="margin: 0.3em 0;"><strong style="color: #f59e0b;">✨ Feature Optimization</strong>
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>🎯 Media Notes Settings Optimization</strong>: Refactored target notebook/document setting item logic, simplified configuration process, improved user experience</li>
<li><strong>📝 Smart Notes Panel Integration</strong>: Automatically add to notes panel when creating media notes, achieving seamless experience of one-click creation and automatic management
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>🔄 Auto Sync</strong>: Media notes appear immediately in the notes panel after creation, no manual addition required</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr style="margin: 1.5em 0; border: none; border-top: 1px solid #e0e7ff;">
<strong style="color: #6366f1; font-size: 1.1em;">📅 v0.4.1 Update (2025.7.14)</strong>
<ul style="margin: 0.5em 0; padding-left: 1.2em;">
<li style="margin: 0.3em 0;"><strong style="color: #10b981;">🆕 New Features</strong>
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>🔗 Database URL Link Recognition</strong>: Support for clicking media links in database URL fields to directly open the player without browser redirection</li>
<li><strong>⌨️ Ctrl+Click Force Browser</strong>: Hold Ctrl key while clicking media links to force browser opening, bypassing plugin handling</li>
<li><strong>📝 Notes Panel Feature</strong>: New independent notes panel providing convenient document and block content editing functionality
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>📋 ID Input Support</strong>: Support for inputting document ID or block ID with automatic format validation and content retrieval</li>
<li><strong>🏷️ Smart Tags</strong>: Automatically truncate to first 4 characters as tag name when adding</li>
<li><strong>🖱️ Context Menu</strong>: Provide rename, open in SiYuan, copy ID, delete tag and other complete operations</li>
<li><strong>📄 Complete Rendering</strong>: Use Protyle component for complete document content rendering with scroll and interaction support</li>
<li><strong>💾 State Persistence</strong>: Automatically save tab configuration and restore previous note tags after restart</li>
</ul>
</li>
<li><strong>📔 Media Notes Enhancement</strong>: Media notes creation now supports creating sub-documents under specified documents, providing more flexible note organization
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>🔍 Smart Search Configuration</strong>: Support inputting document name or notebook name in settings to search and quickly locate target position</li>
<li><strong>📂 Sub-document Creation</strong>: Support automatically creating sub-documents under selected parent documents, maintaining hierarchical note structure</li>
<li><strong>⚙️ Convenient Settings</strong>: Quick addition of commonly used document and notebook configurations through search functionality, simplifying the setup process</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr style="margin: 1.5em 0; border: none; border-top: 1px solid #e0e7ff;">
<strong style="color: #6366f1; font-size: 1.1em;">📅 v0.4.0 Update (2025.7.12)</strong>
<ul style="margin: 0.5em 0; padding-left: 1.2em;">
<li style="margin: 0.3em 0;"><strong style="color: #10b981;">🆕 New Features</strong>
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>📚 Bilibili Collections Support</strong>: New batch import feature for Bilibili collections, get entire collection with any video link
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>🏷️ Smart Recognition</strong>: Automatically detect if video belongs to a collection, extract collection ID and uploader info</li>
<li><strong>🔄 Smart Refresh</strong>: Support one-click refresh for collection tags</li>
</ul>
</li>
</ul>
</li>
<li style="margin: 0.3em 0;"><strong style="color: #f59e0b;">🔧 Performance Optimization</strong>
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>💬 Message Simplification</strong>: Optimized batch import notifications with unified showMessage handling</li>
</ul>
</li>
<li style="margin: 0.3em 0;"><strong style="color: #ef4444;">🐛 Bug Fixes</strong>
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>🔊 Bilibili Video Audio Fix</strong>: Fixed issue where Bilibili videos had video but no audio, unified DASH stream processing</li>
<li><strong>⚡ Playback Parameter Unification</strong>: Refactored Bilibili video playback process, directly generate blob playback addresses</li>
<li><strong>🔇 Warning Message Optimization</strong>: Eliminated irrelevant OpenList error warnings when playing Bilibili/WebDAV videos</li>
</ul>
</li>
</ul>
<hr style="margin: 1.5em 0; border: none; border-top: 1px solid #e0e7ff;">
<strong style="color: #6366f1; font-size: 1.1em;">📅 v0.3.9 Update (2025.7.12)</strong>
<ul style="margin: 0.5em 0; padding-left: 1.2em;">
<li style="margin: 0.3em 0;"><strong style="color: #10b981;">🆕 New Features</strong>
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>📝 Tag Description Storage</strong>: Automatically save path/ID information to tag option descriptions when batch adding folders or Bilibili favorites
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li>📁 Folder Tags: Save complete folder paths, e.g., <code>C:\Users\Music\MyPlaylist</code></li>
<li>💖 Bilibili Favorites: Save favorite folder IDs, e.g., <code>12345678</code></li>
</ul>
</li>
<li><strong>🔄 Smart Tag Refresh</strong>: Right-click menu adds intelligent refresh functionality based on tag description information
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li>🧠 Smart Recognition: Automatically identify folder paths or Bilibili favorite IDs, select corresponding refresh strategies</li>
<li>📁 Folder Sync: Detect local folder changes, intelligently add/remove media items</li>
<li>💖 Favorites Sync: Detect Bilibili favorite content changes, maintain data consistency</li>
<li>⚡ Differential Updates: Intelligently compare existing data, only process changed items, performance improvement of 90%+</li>
</ul>
</li>
</ul>
</li>
<li style="margin: 0.3em 0;"><strong style="color: #ef4444;">🐛 Bug Fixes</strong>
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>🔄 Batch Add Fix</strong>: Fixed race condition issue where batch adding folders and Bilibili favorites would delete other items, ensuring data safety</li>
<li><strong>⚡ Code Optimization</strong>: Extremely streamlined core function implementation, 40% code reduction, improved execution efficiency and readability</li>
</ul>
</li>
</ul>
<hr style="margin: 1.5em 0; border: none; border-top: 1px solid #e0e7ff;">
<strong style="color: #6366f1; font-size: 1.1em;">📅 v0.3.8 Update (2025.7.11)</strong>
<ul style="margin: 0.5em 0; padding-left: 1.2em;">
<li style="margin: 0.3em 0;"><strong style="color: #10b981;">🆕 New Features</strong>
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>⌨️ Playback Speed Shortcuts</strong>: Added Ctrl+↑/↓ shortcuts for playback speed control, making operations more convenient</li>
<li><strong>⚡ Speed Boost</strong>: Increased playback speed upper limit from 2x to 5x for fast browsing needs</li>
<li><strong>🗂️ Database Smart Binding</strong>: Support both database ID and database block ID input methods with automatic recognition and conversion</li>
<li><strong>🔗 Database Binding Mode</strong>: Added database binding switch, when enabled requires manual database binding, when disabled automatically generates local database configuration files, providing flexible configuration options</li>
<li><strong>💾 Playlist State Memory</strong>: Automatically save view mode and tab state, seamless recovery after restart</li>
</ul>
</li>
<li style="margin: 0.3em 0;"><strong style="color: #ef4444;">🐛 Bug Fixes</strong>
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>🎬 Bilibili Multi-Part Video Fix</strong>: Fixed missing part parameters in timestamp/loop segment links for Bilibili multi-part videos</li>
<li><strong>🎮 External Player Fix</strong>: Fixed PotPlayer and browser opening method failure, external players no longer unnecessarily open tabs</li>
<li><strong>🔗 OpenList Link Recognition</strong>: Fixed OpenList timestamp/loop segment link recognition, supporting three URL formats:
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><code>/#/</code> format: <code>http://localhost:5244/#/mv/ve/001.mp4?t=2.4</code></li>
<li><code>/p/</code> format: <code>http://localhost:5244/p/mv/ve/001.mp4?t=2.4</code></li>
<li>Direct path: <code>http://localhost:5244/mv/ve/001.mp4?t=2.4</code></li>
</ul>
</li>
<li><strong>⚡ Settings Instant Effect</strong>: Fixed issue where player type settings didn't take effect immediately for link clicks</li>
<li><strong>📺 Bilibili Function Recovery</strong>: Fixed issue where Bilibili subtitles and video summaries couldn't be retrieved</li>
</ul>
</li>
<li style="margin: 0.3em 0;"><strong style="color: #8b5cf6;">🔧 Development Refactoring</strong>
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>📊 Playlist API Refactoring</strong>: Removed file system operations, fully adopted SiYuan API for improved stability and performance</li>
<li><strong>🛠️ Database Mapping Optimization</strong>: Relaxed field mapping conditions, supporting flexible handling of multi-field or missing fields with enhanced fault tolerance</li>
</ul>
</li>
</ul>
<details style="margin-top: 1.5em;">
<summary style="color: #666; cursor: pointer; font-weight: 500;">📋 View Update History</summary>
<div style="margin-top: 1em; padding-top: 1em; border-top: 1px solid #e0e7ff;">

<strong style="color: #6366f1; font-size: 1.1em;">📅 v0.3.7 Update (2025.7.8)</strong>
<ul style="margin: 0.5em 0; padding-left: 1.2em;">
<li style="margin: 0.3em 0;"><strong style="color: #ef4444;">🐛 Bug Fixes</strong>
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>📊 Playlist Database Optimization</strong>: Fixed database field specification issues, single/multi-select options now have correct color identification, auto-create gallery view</li>
<li><strong>🔄 Drag-and-Drop Sorting Fix</strong>: Fixed issue where playlist couldn't load after drag-and-drop sorting, ensuring data integrity in multi-tag environments</li>
</ul>
</li>
<li style="margin: 0.3em 0;"><strong style="color: #8b5cf6;">🔧 Development Refactoring</strong>
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>⚡ Documentation Rewrite</strong>: Optimized documentation styling, added database configuration, account configuration methods</li>
</ul>
</li>
</ul>
<hr style="margin: 1.5em 0; border: none; border-top: 1px solid #e0e7ff;">
<strong style="color: #6366f1; font-size: 1.1em;">📅 v0.3.6 Update (2025.7.5)</strong>
<ul style="margin: 0.5em 0; padding-left: 1.2em;">
<li style="margin: 0.3em 0;"><strong style="color: #10b981;">🆕 New Features</strong>
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>☁️ WebDAV Cloud Storage Support</strong>: Added WebDAV cloud storage integration including settings panel configuration, tag menu browsing options, direct streaming playback, timestamp links and loop segments support</li>
<li><strong>🎛️ Top Quick Menu</strong>: Added purple TV icon in top bar for quick settings access</li>
<li><strong>🎨 Dedicated Icons</strong>: Added dedicated SVG icons for OpenList and WebDAV services</li>
</ul>
</li>
<li style="margin: 0.3em 0;"><strong style="color: #f59e0b;">✨ Feature Improvements</strong>
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>🖼️ Image Localization</strong>: Automatically convert cover images and artist avatars to local resources, improving loading speed and offline display support</li>
<li><strong>📔 Media Notes Enhancement</strong>: Newly created documents automatically open in right-side tabs</li>
<li><strong>🔄 Loop Function Enhancement</strong>: Added mutual exclusion between single loop and playlist loop settings</li>
<li><strong>📝 Terminology Optimization</strong>: Updated "Loop Count" to "Segment Loop Count", "Pause After Loop" to "Pause After Segment Loop"</li>
<li><strong>📁 SiYuan Workspace Relative Path</strong>: SiYuan workspace media now uses relative paths for timestamp and loop segment links, consistent with SiYuan workspace menu item path format, improving portability and workspace independence</li>
</ul>
</li>
<li style="margin: 0.3em 0;"><strong style="color: #ef4444;">🐛 Bug Fixes</strong>
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li><strong>🔗 Bilibili Timestamp Links</strong>: Fixed timestamp link generation using playback URLs instead of standard links</li>
<li><strong>📤 Export Functions</strong>: Fixed subtitle, danmaku, and AI summary export functionality</li>
<li><strong>📔 Media Notes</strong>: Fixed document creation failure issue</li>
<li><strong>📸 Screenshot Function</strong>: Fixed screenshot with timestamp option not working</li>
<li><strong>🏷️ Playlist Tag Menu</strong>: Fixed right-click menu rename function not hiding menu after click</li>
<li><strong>🔄 Loop Functions</strong>: Fixed single loop not working for Bilibili videos, playlist loop loading next media but remaining paused, enhanced Bilibili multi-part video series support</li>
<li><strong>🎨 Style Scope</strong>: Fixed SCSS selector affecting SiYuan's scrollbar</li>
</ul>
</li>
<li style="margin: 0.3em 0;"><strong style="color: #8b5cf6;">🔧 Technical Improvements</strong>
<ul style="margin: 0.2em 0; padding-left: 1em;">
<li>Unified core module code structure for improved stability and performance</li>
<li>Implemented muted autoplay bypass strategy for reliable playlist loop</li>
<li>Unified loop mechanism across all media types</li>
</ul>
</li>
</ul>
<hr style="margin: 1.5em 0; border: none; border-top: 1px solid #e0e7ff;">
<strong style="color: #6366f1; font-size: 1.1em;">📅 v0.3.5 Update (2025.7.2)</strong>
<div style="margin: 0.5em 0; padding: 0.8em; background: #fef3f2; border-left: 4px solid #f87171; border-radius: 4px;">
<strong style="color: #dc2626;">⚠️ Important Notice: Due to major refactoring, this update causes incompatibility with playlist and settings configurations!</strong><br>
📋 Please backup your data before updating. Config file location: <code>data\storage\petal\siyuan-media-player\config.json</code><br>
🔄 You will need to reconfigure playlists and related settings after updating
</div>
<ul style="margin: 0.5em 0; padding-left: 1.2em;">
<li style="margin: 0.2em 0;"><strong>📋 Playlist Refactoring</strong>: Optimized playlist component structure and performance for better responsiveness with large media collections</li>
<li style="margin: 0.2em 0;"><strong>⚙️ Settings Component Refactoring</strong>: Removed complex styles, simplified to intuitive toggle switch interface, unified component processing logic, significantly improved configuration efficiency, added real-time display of database avid and notebook ID, removed save and reset buttons, implemented real-time saving with individual reset</li>
<li style="margin: 0.2em 0;"><strong>📚 Database Configuration Sync</strong>: Playlist configurations automatically sync to database, ensuring data consistency</li>
<li style="margin: 0.2em 0;"><strong>🎯 Drag & Drop Enhancement</strong>: Support drag & drop media items for sorting and cross-tab movement, support drag & drop playlist tabs for reordering, removed traditional sort buttons, unified with drag & drop operations</li>
<li style="margin: 0.2em 0;"><strong>📷 Screenshot Function Fix</strong>: Fixed screenshot with timestamp feature, ensuring proper screenshot-timestamp association</li>
<li style="margin: 0.2em 0;"><strong>🏷️ Visual Tag Optimization</strong>: Added visual source and type tags for playlist items, making interface more intuitive and beautiful</li>
<li style="margin: 0.2em 0;"><strong>👨‍💼 Account Style Optimization</strong>: Improved Bilibili account display styling for better user experience</li>
<li style="margin: 0.2em 0;"><strong>💬 SiYuan Workspace Enhancement</strong>: Complete browsing of SiYuan Note workspace file system, supporting browsing and playing media files from all folders</li>
<li style="margin: 0.2em 0;"><strong>🔗 Media Notes URL Fix</strong>: Fixed issue where Bilibili media notes used playback URLs instead of standard links</li>
<li style="margin: 0.2em 0;"><strong>🧹 Feature Streamlining</strong>: Removed built-in script loading functionality, recommend using SiYuan's built-in JS script feature</li>
<li style="margin: 0.2em 0;"><strong>🔄 Cloud Storage Refactoring</strong>: Refactored AList cloud storage functionality to OpenList, providing unified cloud storage interface with improved compatibility and stability</li>
<li style="margin: 0.2em 0;"><strong>⚡ Code Optimization</strong>: Extremely simplified core code, cleaned up redundant logic, reduced plugin size</li>
<li style="margin: 0.2em 0;"><strong>🎯 Core Focus</strong>: Focus on media playback and note integration features, improving stability and performance</li>
</ul>

</div>
</details>
</div>
    <div style="margin-top: 1.5em; padding: 1.5em; background: linear-gradient(135deg, #fefbff, #f3e8ff); border: 1px solid #c4b5fd; border-radius: 8px; box-shadow: 0 4px 12px rgba(139,92,246,0.15);">
        <h2 style="color: #7c3aed; margin: 0 0 1em; text-align: center; font-size: 1.3em;">📖 User Guide</h2>
        <ul style="margin: 0; padding-left: 1.2em;">
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(124,58,237,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">🗄️ <strong>Bind Database</strong> - Configure playlist data storage</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #f3e8ff;">
                1. Select a database block, click the database icon or right-click > Copy > Copy ID<br>
                2. Open SiYuan Media Player settings panel<br>
                3. Find "Playlist Database" in the "General" tab<br>
                4. Paste the database block ID copied in step 1 to bind the database<br>
                5. After successful binding, all playlist data will sync to the specified database<br>
                6. Supports auto-creation of gallery view for intuitive media list management
                </div>
                </details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(124,58,237,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">🅱️ <strong>Add Bilibili Account</strong> - Login to Bilibili to access personal resources</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #f3e8ff;">
                1. Find the "Bilibili Account" section in the settings panel<br>
                2. Click the "Login to Bilibili Account" button<br>
                3. Scan the displayed QR code (using Bilibili mobile app)<br>
                4. After successful login, you can watch Bilibili videos and batch add favorites
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(124,58,237,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">🔗 <strong>Configure OpenList Service</strong> - Connect to cloud storage server</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #f3e8ff;">
                1. Find the "OpenList Configuration" section in the settings panel<br>
                2. Fill in the OpenList server address (e.g., http://localhost:5244)<br>
                3. Enter username and password<br>
                4. After successful configuration, you can directly browse and play media files from OpenList
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(3,105,161,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">☁️ <strong>Configure WebDAV Cloud Storage</strong> - Connect to WebDAV service</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #e0f2fe;">
                1. Find the "WebDAV Configuration" section in the settings panel<br>
                2. Fill in the WebDAV server address<br>
                3. Enter username and password<br>
                4. Supports mainstream WebDAV services like Jianguoyun (坚果云), NextCloud<br>
                5. After successful configuration, you can directly browse and play media files from WebDAV
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(3,105,161,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">📁 <strong>Add Local Media</strong> - Support multiple selection</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #e0f2fe;">
                1. Click the "Add" button at the bottom of the playlist<br>
                2. Select the media files you want to add in the file manager<br>
                3. Click "Open" to add them to the playlist<br>
                4. Supports single and multiple selection<br>
                5. System automatically detects subtitle files with the same name
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(3,105,161,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">📂 <strong>Add Local Folder</strong> - Batch import local files</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #e0f2fe;">
                1. Click the "+" on the playlist tab to open the menu<br>
                2. Click "Add Local Folder"<br>
                3. Select the folder you want to add in the file browser<br>
                4. Click the "Select Folder" button<br>
                5. System will automatically scan and batch import all qualified media files
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(3,105,161,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">🏠 <strong>Add SiYuan Workspace Media</strong> - Browse workspace files</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #e0f2fe;">
                1. Click the "+" on the playlist tab to open the menu<br>
                2. Click "Add SiYuan Workspace" to add SiYuan workspace to the playlist<br>
                3. SiYuan workspace media uses relative paths for easy workspace migration
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(3,105,161,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">🔗 <strong>Add OpenList Media</strong> - Cloud storage streaming playback</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #e0f2fe;">
                1. Ensure OpenList server connection is configured<br>
                2. Click the "+" on the playlist tab to open the menu<br>
                3. Click "Add OpenList Cloud"<br>
                4. Media will stream directly without downloading to local storage
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(3,105,161,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">☁️ <strong>Add WebDAV Media</strong> - Direct cloud playback</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #e0f2fe;">
                1. Ensure WebDAV cloud storage connection is configured<br>
                2. Click the "+" on the playlist tab to open the menu<br>
                3. Click "Add WebDAV Cloud"<br>
                4. Media will stream directly without downloading to local storage
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(3,105,161,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">🅱️ <strong>Batch Import Bilibili Favorites</strong> - One-click import favorite videos</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #e0f2fe;">
                1. Ensure Bilibili account is logged in<br>
                2. Click the "+" on the playlist tab to open the menu<br>
                3. Click "Add Bilibili Favorites"<br>
                3. Select the favorites folder to import<br>
                4. System will batch import all videos from the favorites folder
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(3,105,161,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">📚 <strong>Batch Import Bilibili Collections</strong> - One-click import collection videos</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #e0f2fe;">
                1. Ensure Bilibili account is logged in<br>
                2. Click the "+" on the playlist tab to open the menu<br>
                3. Click "Add Bilibili Collection"<br>
                4. Enter any video link from the collection<br>
                5. Press Enter to confirm, system will automatically get the entire collection and batch import all videos
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(3,105,161,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">🏷️ <strong>Tag Management</strong> - Create and manage playlist tags</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #e0f2fe;">
                1. Click the "+" button at the top of the playlist to create a new tag<br>
                2. Enter tag name and confirm<br>
                3. <strong>Rename tag</strong>: Right-click the tag > Select "Rename"<br>
                4. <strong>Delete tag</strong>: Right-click the tag > Select "Delete" to remove tag and media under it<br>
                5. <strong>Clear tag</strong>: Right-click the tag > Select "Clear" to clear media under the tag
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(3,105,161,0.08);">
                <details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">🔄 <strong>Smart Refresh</strong> - Auto sync folders, Bilibili favorites, Bilibili collections</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #e0f2fe;">
                1. Right-click the tag you want to refresh<br>
                2. Select "Refresh Tag"<br>
                3. System will automatically execute corresponding refresh strategy based on tag type:<br>
                • <strong>Folder tags</strong>: Detect local folder changes, intelligently add/remove media items<br>
                • <strong>Bilibili favorites</strong>: Detect favorites content changes, maintain data consistency<br>
                • <strong>Bilibili collections</strong>: Detect collection content changes, auto sync latest videos<br>
                4. Intelligently compare existing data, only process changed items for significant performance improvement
                </div>
                </details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(3,105,161,0.08);">
                <details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">🔄 <strong>Drag & Drop Operations</strong> - Media movement and sorting</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #e0f2fe;">
                <strong>Drag media items:</strong><br>
                1. <strong>Move between tags</strong>: Drag media items from one tag to another<br>
                <strong>Drag sorting:</strong><br>
                1. <strong>Media sorting</strong>: Drag media items within the same tag to adjust playback order<br>
                2. <strong>Tag sorting</strong>: Drag tag headers to adjust tag display order<br>
                3. Sort order is automatically saved to database
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(3,105,161,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">📝 <strong>Note Integration</strong> - Screenshots, timestamps, loop segments and media notes</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #e0f2fe;">
                <strong>Create screenshots (with timestamp):</strong><br>
                1. Play video to the position you want to screenshot<br>
                2. Click the screenshot button to create screenshot<br>
                3. Screenshot will include timestamp based on settings<br><br>
                <strong>Create timestamps and loop segments:</strong><br>
                1. Play video to the position you want to mark<br>
                2. Click timestamp button to create timestamp link<br>
                3. <strong>Create loop segment</strong>:<br>
                   - Click loop segment button to set start point<br>
                   - Play to end position and click again to set end point<br>
                   - Can set loop count and whether to pause after loop<br>
                4. Generated links will be inserted at specified location or copied to clipboard based on settings<br><br>
                <strong>Create media notes:</strong><br>
                1. Play the media you want to take notes on<br>
                2. Click the "Media Notes" button in the control bar (or use shortcut key)<br>
                3. System creates notes based on custom template, including media info, timestamp, thumbnail, etc.<br>
                4. Notes can be inserted into current document, created in specified notebook, or created as sub-documents under specified documents<br>
                5. <strong>Smart Search Configuration</strong>: Input document name or notebook name in settings to search and quickly locate target position<br>
                6. <strong>Sub-document Creation</strong>: After selecting parent document, system will automatically create sub-documents underneath, maintaining hierarchical note structure
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(3,105,161,0.08);">
                <details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">📝 <strong>Notes Panel</strong> - Document and block content viewing and editing</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #e0f2fe;">
                1. Click the "Notes" tab at the top of the SiYuan Media Player panel<br>
                2. <strong>Add note tabs</strong>: Click the "+" button and enter document ID or block ID<br>
                3. <strong>View content</strong>: Click tabs to view corresponding document or block content<br>
                4. <strong>Context menu operations</strong>: Right-click tabs for the following operations:<br>
                   - <strong>Rename</strong>: Modify tag display name (maximum 4 characters)<br>
                   - <strong>Open in SiYuan</strong>: Jump directly to the corresponding position in SiYuan<br>
                   - <strong>Copy ID</strong>: Copy document or block ID to clipboard<br>
                   - <strong>Delete tab</strong>: Remove unwanted note tabs<br>
                5. <strong>Complete editing</strong>: Support direct editing of document content in the panel, consistent with SiYuan editor functionality
                </div>
                </details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(3,105,161,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">🧠 <strong>Media Assistant (Pro Version)</strong> - Subtitles, danmaku, summaries</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #e0f2fe;">
                1. Click the "Media Assistant" button while playing video<br>
                2. <strong>Subtitle list</strong>: Browse and search subtitle content, click to jump<br>
                3. <strong>Video summary</strong>: View AI-generated content overview<br>
                4. <strong>Danmaku list</strong>: Browse video danmaku list, needs to be enabled in settings<br>
                5. <strong>One-click export</strong>: Export assistant content to notes
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(3,105,161,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">⌨️ <strong>Shortcut Settings</strong> - Configure custom shortcuts</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #e0f2fe;">
                1. Open SiYuan Settings > Shortcuts<br>
                2. Search for "Media Player" or "siyuan-media-player"<br>
                3. Set shortcuts for the following functions:<br>
                   - <strong>⏱️ Add Timestamp</strong>: Quickly generate current time link<br>
                   - <strong>🔄 Loop Segment</strong>: Set loop playback interval<br>
                   - <strong>📸 Screenshot</strong>: Capture video frame<br>
                   - <strong>📔 Media Notes</strong>: Quickly create notes<br>
                   - <strong>🧠 Open Media Player Panel</strong>: Open/close dock panel<br>
                4. <strong>Built-in player shortcuts</strong>:<br>
                   - Space: Play/pause<br>
                   - Left/right arrows: Rewind/fast forward<br>
                   - Up/down arrows: Volume adjustment<br>
                   - <strong>Ctrl+↑</strong>: Increase playback speed (+0.5x, max 5x)<br>
                   - <strong>Ctrl+↓</strong>: Decrease playback speed (-0.5x, min 0.5x)
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(124,58,237,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">🎵 <strong>Playback Control</strong> - Basic playback and loop functions</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #f3e8ff;">
                <strong>Basic playback operations:</strong><br>
                1. <strong>Play/pause</strong>: Click play button or press space<br>
                2. <strong>Progress control</strong>: Drag progress bar or use left/right arrow keys<br>
                3. <strong>Volume adjustment</strong>: Use volume slider or up/down arrow keys<br>
                4. <strong>Playback speed</strong>: Adjust playback speed in settings or use Ctrl+↑/↓ shortcuts<br>
                5. <strong>Picture-in-Picture</strong>: Enable in player settings or select "Picture-in-Picture" open mode<br>
                6. <strong>Fullscreen</strong>: Click fullscreen button or double-click play area<br><br>
                <strong>Loop playback functions:</strong><br>
                1. <strong>Single loop</strong>: Repeat current media<br>
                2. <strong>Playlist loop</strong>: Restart from beginning after finishing playlist<br>
                3. <strong>Segment loop</strong>: Set specific time segment for repeated playback<br>
                4. <strong>Loop count setting</strong>: Configure loop count in settings<br>
                5. <strong>Pause after loop</strong>: Can set to automatically pause after loop ends
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(124,58,237,0.08);">
<details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">🔗 <strong>Custom Link Format</strong> - Personalized timestamp links</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #f3e8ff;">
                In settings, you can customize the display format of timestamp links. For example:<br>
                <code>- [😄Title Time Subtitle](Link)</code> // Link with emoji<br>
                <code>> 🕒 Time | Title | Subtitle</code> // Quote-formatted link
                </div>
</details>
            </li>
            <li style="margin: 0.5em 0; padding: 10px 14px; background: white; border-radius: 8px; border-left: 4px solid #0369a1; box-shadow: 0 2px 4px rgba(124,58,237,0.08);">
                <details>
                <summary style="color: #0369a1; cursor: pointer; font-weight: 500; font-size: 1.05em;">📝 <strong>Custom Media Notes Template</strong> - Personalized note format</summary>
                <div style="margin-top: 0.8em; padding-top: 0.8em; border-top: 1px solid #f3e8ff;">
                You can create your own media notes template in settings with various variables:<br>
                <strong>Available variables</strong>: Media title, current timestamp, artist name, media URL, media duration, media thumbnail, media type, media ID, current date, current date and time<br><br>
                <strong>Target Configuration</strong>:<br>
                • <strong>Smart Search</strong>: Input keywords to search documents and notebooks, quickly locate target position<br>
                • <strong>Sub-document Creation</strong>: After selecting parent document, media notes will be created as sub-documents, maintaining hierarchical structure<br>
                • <strong>Convenient Settings</strong>: Common configurations can be saved, simplifying subsequent creation process
                </div>
                </details>
            </li>
        </ul>
    </div>
</div>
