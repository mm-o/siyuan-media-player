"use strict";var qr=Object.defineProperty;var Wr=(u,a,t)=>a in u?qr(u,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[a]=t;var Q=(u,a,t)=>Wr(u,typeof a!="symbol"?a+"":a,t);const W=require("siyuan");function J(){}function ur(u){return u()}function Re(){return Object.create(null)}function et(u){u.forEach(ur)}function dr(u){return typeof u=="function"}function Kt(u,a){return u!=u?a==a:u!==a||u&&typeof u=="object"||typeof u=="function"}let te;function mt(u,a){return u===a?!0:(te||(te=document.createElement("a")),te.href=a,u===te.href)}function Kr(u){return Object.keys(u).length===0}function A(u,a){u.appendChild(a)}function q(u,a,t){u.insertBefore(a,t||null)}function V(u){u.parentNode&&u.parentNode.removeChild(u)}function R(u){return document.createElement(u)}function K(u){return document.createTextNode(u)}function U(){return K(" ")}function xe(){return K("")}function G(u,a,t,o){return u.addEventListener(a,t,o),()=>u.removeEventListener(a,t,o)}function fr(u){return function(a){return a.preventDefault(),u.call(this,a)}}function F(u,a,t){t==null?u.removeAttribute(a):u.getAttribute(a)!==t&&u.setAttribute(a,t)}function Gr(u){return Array.from(u.childNodes)}function tt(u,a){a=""+a,u.data!==a&&(u.data=a)}function He(u,a){u.value=a??""}function it(u,a,t){u.classList.toggle(a,!!t)}function Qr(u,a,{bubbles:t=!1,cancelable:o=!1}={}){return new CustomEvent(u,{detail:a,bubbles:t,cancelable:o})}let Ut;function Nt(u){Ut=u}function Ie(){if(!Ut)throw new Error("Function called outside component initialization");return Ut}function Et(u){Ie().$$.on_mount.push(u)}function Xr(u){Ie().$$.on_destroy.push(u)}function Se(){const u=Ie();return(a,t,{cancelable:o=!1}={})=>{const r=u.$$.callbacks[a];if(r){const e=Qr(a,t,{cancelable:o});return r.slice().forEach(n=>{n.call(u,e)}),!e.defaultPrevented}return!0}}const kt=[],Yt=[];let Ct=[];const ze=[],Jr=Promise.resolve();let ke=!1;function Zr(){ke||(ke=!0,Jr.then(pr))}function Ce(u){Ct.push(u)}const he=new Set;let xt=0;function pr(){if(xt!==0)return;const u=Ut;do{try{for(;xt<kt.length;){const a=kt[xt];xt++,Nt(a),tn(a.$$)}}catch(a){throw kt.length=0,xt=0,a}for(Nt(null),kt.length=0,xt=0;Yt.length;)Yt.pop()();for(let a=0;a<Ct.length;a+=1){const t=Ct[a];he.has(t)||(he.add(t),t())}Ct.length=0}while(kt.length);for(;ze.length;)ze.pop()();ke=!1,he.clear(),Nt(u)}function tn(u){if(u.fragment!==null){u.update(),et(u.before_update);const a=u.dirty;u.dirty=[-1],u.fragment&&u.fragment.p(u.ctx,a),u.after_update.forEach(Ce)}}function en(u){const a=[],t=[];Ct.forEach(o=>u.indexOf(o)===-1?a.push(o):t.push(o)),t.forEach(o=>o()),Ct=a}const ne=new Set;let yt;function Ne(){yt={r:0,c:[],p:yt}}function Oe(){yt.r||et(yt.c),yt=yt.p}function nt(u,a){u&&u.i&&(ne.delete(u),u.i(a))}function ft(u,a,t,o){if(u&&u.o){if(ne.has(u))return;ne.add(u),yt.c.push(()=>{ne.delete(u),o&&(t&&u.d(1),o())}),u.o(a)}else o&&o()}function Tt(u){return(u==null?void 0:u.length)!==void 0?u:Array.from(u)}function Fe(u,a){u.d(1),a.delete(u.key)}function Ae(u,a,t,o,r,e,n,c,i,s,l,d){let f=u.length,p=e.length,h=f;const m={};for(;h--;)m[u[h].key]=h;const g=[],b=new Map,w=new Map,v=[];for(h=p;h--;){const x=d(r,e,h),E=t(x);let T=n.get(E);T?v.push(()=>T.p(x,a)):(T=s(E,x),T.c()),b.set(E,g[h]=T),E in m&&w.set(E,Math.abs(h-m[E]))}const y=new Set,k=new Set;function M(x){nt(x,1),x.m(c,l),n.set(x.key,x),l=x.first,p--}for(;f&&p;){const x=g[p-1],E=u[f-1],T=x.key,$=E.key;x===E?(l=x.first,f--,p--):b.has($)?!n.has(T)||y.has(T)?M(x):k.has($)?f--:w.get(T)>w.get($)?(k.add(T),M(x)):(y.add($),f--):(i(E,n),f--)}for(;f--;){const x=u[f];b.has(x.key)||i(x,n)}for(;p;)M(g[p-1]);return et(v),g}function ie(u){u&&u.c()}function Vt(u,a,t){const{fragment:o,after_update:r}=u.$$;o&&o.m(a,t),Ce(()=>{const e=u.$$.on_mount.map(ur).filter(dr);u.$$.on_destroy?u.$$.on_destroy.push(...e):et(e),u.$$.on_mount=[]}),r.forEach(Ce)}function qt(u,a){const t=u.$$;t.fragment!==null&&(en(t.after_update),et(t.on_destroy),t.fragment&&t.fragment.d(a),t.on_destroy=t.fragment=null,t.ctx=[])}function rn(u,a){u.$$.dirty[0]===-1&&(kt.push(u),Zr(),u.$$.dirty.fill(0)),u.$$.dirty[a/31|0]|=1<<a%31}function Gt(u,a,t,o,r,e,n=null,c=[-1]){const i=Ut;Nt(u);const s=u.$$={fragment:null,ctx:[],props:e,update:J,not_equal:r,bound:Re(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a.context||(i?i.$$.context:[])),callbacks:Re(),dirty:c,skip_bound:!1,root:a.target||i.$$.root};n&&n(s.root);let l=!1;if(s.ctx=t?t(u,a.props||{},(d,f,...p)=>{const h=p.length?p[0]:f;return s.ctx&&r(s.ctx[d],s.ctx[d]=h)&&(!s.skip_bound&&s.bound[d]&&s.bound[d](h),l&&rn(u,d)),f}):[],s.update(),l=!0,et(s.before_update),s.fragment=o?o(s.ctx):!1,a.target){if(a.hydrate){const d=Gr(a.target);s.fragment&&s.fragment.l(d),d.forEach(V)}else s.fragment&&s.fragment.c();a.intro&&nt(u.$$.fragment),Vt(u,a.target,a.anchor),pr()}Nt(i)}class Qt{constructor(){Q(this,"$$");Q(this,"$$set")}$destroy(){qt(this,1),this.$destroy=J}$on(a,t){if(!dr(t))return J;const o=this.$$.callbacks[a]||(this.$$.callbacks[a]=[]);return o.push(t),()=>{const r=o.indexOf(t);r!==-1&&o.splice(r,1)}}$set(a){this.$$set&&!Kr(a)&&(this.$$.skip_bound=!0,this.$$set(a),this.$$.skip_bound=!1)}}const nn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(nn);var Ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hr(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}function Ye(u){throw new Error('Could not dynamically require "'+u+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ae={exports:{}};ae.exports;(function(u,a){/*!
 * artplayer.js v5.2.1
 * Github: https://github.com/zhw2590582/ArtPlayer
 * (c) 2017-2024 Harvey Zack
 * Released under the MIT License.
 */(function(t,o,r,e,n){var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof Ue<"u"?Ue:{},i=typeof c[e]=="function"&&c[e],s=i.cache||{},l=typeof Ye=="function"&&Ye.bind(u);function d(h,m){if(!s[h]){if(!t[h]){var g=typeof c[e]=="function"&&c[e];if(!m&&g)return g(h,!0);if(i)return i(h,!0);if(l&&typeof h=="string")return l(h);var b=Error("Cannot find module '"+h+"'");throw b.code="MODULE_NOT_FOUND",b}v.resolve=function(y){var k=t[h][1][y];return k??y},v.cache={};var w=s[h]=new d.Module(h);t[h][0].call(w.exports,v,w,w.exports,this)}return s[h].exports;function v(y){var k=v.resolve(y);return k===!1?{}:d(k)}}d.isParcelRequire=!0,d.Module=function(h){this.id=h,this.bundle=d,this.exports={}},d.modules=t,d.cache=s,d.parent=i,d.register=function(h,m){t[h]=[function(g,b){b.exports=m},{}]},Object.defineProperty(d,"root",{get:function(){return c[e]}}),c[e]=d;for(var f=0;f<o.length;f++)d(o[f]);{var p=d(r);u.exports=p}})({"5lTcX":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("bundle-text:./style/index.less"),c=e.interopDefault(n),i=t("option-validator"),s=e.interopDefault(i),l=t("./utils/emitter"),d=e.interopDefault(l),f=t("./utils"),p=t("./scheme"),h=e.interopDefault(p),m=t("./config"),g=e.interopDefault(m),b=t("./template"),w=e.interopDefault(b),v=t("./i18n"),y=e.interopDefault(v),k=t("./player"),M=e.interopDefault(k),x=t("./control"),E=e.interopDefault(x),T=t("./contextmenu"),$=e.interopDefault(T),P=t("./info"),L=e.interopDefault(P),j=t("./subtitle"),I=e.interopDefault(j),S=t("./events"),H=e.interopDefault(S),C=t("./hotkey"),_=e.interopDefault(C),D=t("./layer"),B=e.interopDefault(D),N=t("./loading"),O=e.interopDefault(N),X=t("./notice"),Z=e.interopDefault(X),ct=t("./mask"),vt=e.interopDefault(ct),St=t("./icons"),Ft=e.interopDefault(St),At=t("./setting"),Dt=e.interopDefault(At),$t=t("./storage"),Pt=e.interopDefault($t),Lt=t("./plugins"),Bt=e.interopDefault(Lt);let Rt=0,ut=[];class z extends d.default{constructor(at,bt){super(),this.id=++Rt;let wt=f.mergeDeep(z.option,at);if(wt.container=at.container,this.option=(0,s.default)(wt,h.default),this.isLock=!1,this.isReady=!1,this.isFocus=!1,this.isInput=!1,this.isRotate=!1,this.isDestroy=!1,this.template=new w.default(this),this.events=new H.default(this),this.storage=new Pt.default(this),this.icons=new Ft.default(this),this.i18n=new y.default(this),this.notice=new Z.default(this),this.player=new M.default(this),this.layers=new B.default(this),this.controls=new E.default(this),this.contextmenu=new $.default(this),this.subtitle=new I.default(this),this.info=new L.default(this),this.loading=new O.default(this),this.hotkey=new _.default(this),this.mask=new vt.default(this),this.setting=new Dt.default(this),this.plugins=new Bt.default(this),typeof bt=="function"&&this.on("ready",()=>bt.call(this,this)),z.DEBUG){let dt=st=>console.log(`[ART.${this.id}] -> ${st}`);dt("Version@"+z.version),dt("Env@"+z.env),dt("Build@"+z.build);for(let st=0;st<g.default.events.length;st++)this.on("video:"+g.default.events[st],Ht=>dt("Event@"+Ht.type))}ut.push(this)}static get instances(){return ut}static get version(){return"5.2.1"}static get env(){return"production"}static get build(){return"2024-10-26 15:26:30"}static get config(){return g.default}static get utils(){return f}static get scheme(){return h.default}static get Emitter(){return d.default}static get validator(){return s.default}static get kindOf(){return s.default.kindOf}static get html(){return w.default.html}static get option(){return{id:"",container:"#artplayer",url:"",poster:"",type:"",theme:"#f00",volume:.7,isLive:!1,muted:!1,autoplay:!1,autoSize:!1,autoMini:!1,loop:!1,flip:!1,playbackRate:!1,aspectRatio:!1,screenshot:!1,setting:!1,hotkey:!0,pip:!1,mutex:!0,backdrop:!0,fullscreen:!1,fullscreenWeb:!1,subtitleOffset:!1,miniProgressBar:!1,useSSR:!1,playsInline:!0,lock:!1,fastForward:!1,autoPlayback:!1,autoOrientation:!1,airplay:!1,proxy:void 0,layers:[],contextmenu:[],controls:[],settings:[],quality:[],highlight:[],plugins:[],thumbnails:{url:"",number:60,column:10,width:0,height:0,scale:1},subtitle:{url:"",type:"",style:{},name:"",escape:!0,encoding:"utf-8",onVttLoad:at=>at},moreVideoAttr:{controls:!1,preload:f.isSafari?"auto":"metadata"},i18n:{},icons:{},cssVar:{},customType:{},lang:navigator.language.toLowerCase()}}get proxy(){return this.events.proxy}get query(){return this.template.query}get video(){return this.template.$video}destroy(at=!0){this.events.destroy(),this.template.destroy(at),ut.splice(ut.indexOf(this),1),this.isDestroy=!0,this.emit("destroy")}}r.default=z,z.STYLE=c.default,z.DEBUG=!1,z.CONTEXTMENU=!0,z.NOTICE_TIME=2e3,z.SETTING_WIDTH=250,z.SETTING_ITEM_WIDTH=200,z.SETTING_ITEM_HEIGHT=35,z.RESIZE_TIME=200,z.SCROLL_TIME=200,z.SCROLL_GAP=50,z.AUTO_PLAYBACK_MAX=10,z.AUTO_PLAYBACK_MIN=5,z.AUTO_PLAYBACK_TIMEOUT=3e3,z.RECONNECT_TIME_MAX=5,z.RECONNECT_SLEEP_TIME=1e3,z.CONTROL_HIDE_TIME=3e3,z.DBCLICK_TIME=300,z.DBCLICK_FULLSCREEN=!0,z.MOBILE_DBCLICK_PLAY=!0,z.MOBILE_CLICK_PLAY=!1,z.AUTO_ORIENTATION_TIME=200,z.INFO_LOOP_TIME=1e3,z.FAST_FORWARD_VALUE=3,z.FAST_FORWARD_TIME=1e3,z.TOUCH_MOVE_RATIO=.5,z.VOLUME_STEP=.1,z.SEEK_STEP=5,z.PLAYBACK_RATE=[.5,.75,1,1.25,1.5,2],z.ASPECT_RATIO=["default","4:3","16:9"],z.FLIP=["normal","horizontal","vertical"],z.FULLSCREEN_WEB_IN_BODY=!1,z.LOG_VERSION=!0,z.USE_RAF=!1,f.isBrowser&&(window.Artplayer=z,f.setStyleText("artplayer-style",c.default),setTimeout(()=>{z.LOG_VERSION&&console.log(`%c ArtPlayer %c ${z.version} %c https://artplayer.org`,"color: #fff; background: #5f5f5f","color: #fff; background: #4bc729","")},100))},{"bundle-text:./style/index.less":"0016T","option-validator":"bAWi2","./utils/emitter":"66mFZ","./utils":"71aH7","./scheme":"AKEiO","./config":"lyjeQ","./template":"X13Zf","./i18n":"3jKkj","./player":"a90nx","./control":"8Z0Uf","./contextmenu":"2KYsr","./info":"02ajl","./subtitle":"eSWto","./events":"jo4S1","./hotkey":"6NoFy","./layer":"6G6hZ","./loading":"3dsEe","./notice":"dWGTw","./mask":"5POkG","./icons":"6OeNg","./setting":"3eYNH","./storage":"2aaJe","./plugins":"8MTUM","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"0016T":[function(t,o,r){o.exports='.art-video-player{--art-theme:red;--art-font-color:#fff;--art-background-color:#000;--art-text-shadow-color:#00000080;--art-transition-duration:.2s;--art-padding:10px;--art-border-radius:3px;--art-progress-height:6px;--art-progress-color:#ffffff40;--art-hover-color:#ffffff40;--art-loaded-color:#ffffff40;--art-state-size:80px;--art-state-opacity:.8;--art-bottom-height:100px;--art-bottom-offset:20px;--art-bottom-gap:5px;--art-highlight-width:8px;--art-highlight-color:#ffffff80;--art-control-height:46px;--art-control-opacity:.75;--art-control-icon-size:36px;--art-control-icon-scale:1.1;--art-volume-height:120px;--art-volume-handle-size:14px;--art-lock-size:36px;--art-indicator-scale:0;--art-indicator-size:16px;--art-fullscreen-web-index:9999;--art-settings-icon-size:24px;--art-settings-max-height:300px;--art-selector-max-height:300px;--art-contextmenus-min-width:250px;--art-subtitle-font-size:20px;--art-subtitle-gap:5px;--art-subtitle-bottom:15px;--art-subtitle-border:#000;--art-widget-background:#000000d9;--art-tip-background:#000000b3;--art-scrollbar-size:4px;--art-scrollbar-background:#ffffff40;--art-scrollbar-background-hover:#ffffff80;--art-mini-progress-height:2px}.art-bg-cover{background-position:50%;background-repeat:no-repeat;background-size:cover}.art-bottom-gradient{background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x}.art-backdrop-filter{backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.art-video-player{zoom:1;text-align:left;user-select:none;box-sizing:border-box;color:var(--art-font-color);background-color:var(--art-background-color);text-shadow:0 0 2px var(--art-text-shadow-color);-webkit-tap-highlight-color:#0000;-ms-touch-action:manipulation;touch-action:manipulation;-ms-high-contrast-adjust:none;direction:ltr;outline:0;width:100%;height:100%;margin:0 auto;padding:0;font-family:PingFang SC,Helvetica Neue,Microsoft YaHei,Roboto,Arial,sans-serif;font-size:14px;line-height:1.3;position:relative}.art-video-player *,.art-video-player :before,.art-video-player :after{box-sizing:border-box}.art-video-player ::-webkit-scrollbar{width:var(--art-scrollbar-size);height:var(--art-scrollbar-size)}.art-video-player ::-webkit-scrollbar-thumb{background-color:var(--art-scrollbar-background)}.art-video-player ::-webkit-scrollbar-thumb:hover{background-color:var(--art-scrollbar-background-hover)}.art-video-player img{vertical-align:top;max-width:100%}.art-video-player svg{fill:var(--art-font-color)}.art-video-player a{color:var(--art-font-color);text-decoration:none}.art-icon{justify-content:center;align-items:center;line-height:1;display:flex}.art-video-player.art-backdrop .art-contextmenus,.art-video-player.art-backdrop .art-info,.art-video-player.art-backdrop .art-settings,.art-video-player.art-backdrop .art-layer-auto-playback,.art-video-player.art-backdrop .art-selector-list,.art-video-player.art-backdrop .art-volume-inner{backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-video{z-index:10;cursor:pointer;width:100%;height:100%;position:absolute;inset:0}.art-poster{z-index:11;pointer-events:none;background-position:50%;background-repeat:no-repeat;background-size:cover;width:100%;height:100%;position:absolute;inset:0}.art-video-player .art-subtitle{z-index:20;text-align:center;pointer-events:none;justify-content:center;align-items:center;gap:var(--art-subtitle-gap);bottom:var(--art-subtitle-bottom);font-size:var(--art-subtitle-font-size);transition:bottom var(--art-transition-duration)ease;text-shadow:var(--art-subtitle-border)1px 0 1px,var(--art-subtitle-border)0 1px 1px,var(--art-subtitle-border)-1px 0 1px,var(--art-subtitle-border)0 -1px 1px,var(--art-subtitle-border)1px 1px 1px,var(--art-subtitle-border)-1px -1px 1px,var(--art-subtitle-border)1px -1px 1px,var(--art-subtitle-border)-1px 1px 1px;flex-direction:column;width:100%;padding:0 5%;display:none;position:absolute}.art-video-player.art-subtitle-show .art-subtitle{display:flex}.art-video-player.art-control-show .art-subtitle{bottom:calc(var(--art-control-height) + var(--art-subtitle-bottom))}.art-danmuku{z-index:30;pointer-events:none;width:100%;height:100%;position:absolute;inset:0;overflow:hidden}.art-video-player .art-layers{z-index:40;pointer-events:none;width:100%;height:100%;display:none;position:absolute;inset:0}.art-video-player .art-layers .art-layer{pointer-events:auto}.art-video-player.art-layer-show .art-layers{display:flex}.art-video-player .art-mask{z-index:50;pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;inset:0}.art-video-player .art-mask .art-state{opacity:0;width:var(--art-state-size);height:var(--art-state-size);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;display:flex;transform:scale(2)}.art-video-player.art-mask-show .art-state{cursor:pointer;pointer-events:auto;opacity:var(--art-state-opacity);transform:scale(1)}.art-video-player.art-loading-show .art-state{display:none}.art-video-player .art-loading{z-index:70;pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:none;position:absolute;inset:0}.art-video-player.art-loading-show .art-loading{display:flex}.art-video-player .art-bottom{z-index:60;opacity:0;pointer-events:none;padding:0 var(--art-padding);transition:all var(--art-transition-duration)ease;background-size:100% var(--art-bottom-height);background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x;flex-direction:column;justify-content:flex-end;width:100%;height:100%;display:flex;position:absolute;inset:0;overflow:hidden}.art-video-player .art-bottom .art-controls,.art-video-player .art-bottom .art-progress{transform:translateY(var(--art-bottom-offset));transition:transform var(--art-transition-duration)ease}.art-video-player.art-control-show .art-bottom,.art-video-player.art-hover .art-bottom{opacity:1}.art-video-player.art-control-show .art-bottom .art-controls,.art-video-player.art-hover .art-bottom .art-controls,.art-video-player.art-control-show .art-bottom .art-progress,.art-video-player.art-hover .art-bottom .art-progress{transform:translateY(0)}.art-bottom .art-progress{z-index:0;pointer-events:auto;padding-bottom:var(--art-bottom-gap);position:relative}.art-bottom .art-progress .art-control-progress{cursor:pointer;height:var(--art-progress-height);justify-content:center;align-items:center;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner{transition:height var(--art-transition-duration)ease;background-color:var(--art-progress-color);align-items:center;width:100%;height:50%;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-hover{z-index:0;background-color:var(--art-hover-color);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-loaded{z-index:10;background-color:var(--art-loaded-color);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-played{z-index:20;background-color:var(--art-theme);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight{z-index:30;pointer-events:none;width:100%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight span{z-index:0;pointer-events:auto;transform:translateX(calc(var(--art-highlight-width)/-2));background-color:var(--art-highlight-color);width:100%;height:100%;position:absolute;inset:0 auto 0 0;width:var(--art-highlight-width)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{z-index:40;width:var(--art-indicator-size);height:var(--art-indicator-size);transform:scale(var(--art-indicator-scale));margin-left:calc(var(--art-indicator-size)/-2);transition:transform var(--art-transition-duration)ease;border-radius:50%;justify-content:center;align-items:center;display:flex;position:absolute;left:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator .art-icon{pointer-events:none;width:100%;height:100%}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:hover{transform:scale(1.2)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:active{transform:scale(1)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-tip{z-index:50;border-radius:var(--art-border-radius);white-space:nowrap;background-color:var(--art-tip-background);padding:3px 5px;font-size:12px;line-height:1;display:none;position:absolute;top:-25px;left:0}.art-bottom .art-progress .art-control-progress:hover .art-control-progress-inner{height:100%}.art-bottom .art-progress .art-control-thumbnails{bottom:calc(var(--art-bottom-gap) + 10px);border-radius:var(--art-border-radius);pointer-events:none;background-color:var(--art-widget-background);display:none;position:absolute;left:0;box-shadow:0 1px 3px #0003,0 1px 2px -1px #0003}.art-bottom:hover .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{transform:scale(1)}.art-controls{z-index:10;pointer-events:auto;height:var(--art-control-height);justify-content:space-between;align-items:center;display:flex;position:relative}.art-controls .art-controls-left,.art-controls .art-controls-right{height:100%;display:flex}.art-controls .art-controls-center{flex:1;justify-content:center;align-items:center;height:100%;padding:0 10px;display:none}.art-controls .art-controls-right{justify-content:flex-end}.art-controls .art-control{cursor:pointer;white-space:nowrap;opacity:var(--art-control-opacity);min-height:var(--art-control-height);min-width:var(--art-control-height);transition:opacity var(--art-transition-duration)ease;flex-shrink:0;justify-content:center;align-items:center;display:flex}.art-controls .art-control .art-icon{height:var(--art-control-icon-size);width:var(--art-control-icon-size);transform:scale(var(--art-control-icon-scale));transition:transform var(--art-transition-duration)ease}.art-controls .art-control .art-icon:active{transform:scale(calc(var(--art-control-icon-scale)*.8))}.art-controls .art-control:hover{opacity:1}.art-control-volume{position:relative}.art-control-volume .art-volume-panel{text-align:center;cursor:default;opacity:0;pointer-events:none;left:0;right:0;bottom:var(--art-control-height);width:var(--art-control-height);height:var(--art-volume-height);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;padding:0 5px;font-size:12px;display:flex;position:absolute;transform:translateY(10px)}.art-control-volume .art-volume-panel .art-volume-inner{border-radius:var(--art-border-radius);background-color:var(--art-widget-background);flex-direction:column;align-items:center;gap:10px;width:100%;height:100%;padding:10px 0 12px;display:flex}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider{cursor:pointer;flex:1;justify-content:center;width:100%;display:flex;position:relative}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle{border-radius:var(--art-border-radius);background-color:#ffffff40;justify-content:center;width:2px;display:flex;position:relative;overflow:hidden}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle .art-volume-loaded{z-index:0;background-color:var(--art-theme);width:100%;height:100%;position:absolute;inset:0}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-indicator{width:var(--art-volume-handle-size);height:var(--art-volume-handle-size);margin-top:calc(var(--art-volume-handle-size)/-2);background-color:var(--art-theme);transition:transform var(--art-transition-duration)ease;border-radius:100%;flex-shrink:0;position:absolute;transform:scale(1)}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider:active .art-volume-indicator{transform:scale(.9)}.art-control-volume:hover .art-volume-panel{opacity:1;pointer-events:auto;transform:translateY(0)}.art-video-player .art-notice{z-index:80;padding:var(--art-padding);pointer-events:none;width:100%;height:auto;display:none;position:absolute;inset:0 0 auto}.art-video-player .art-notice .art-notice-inner{border-radius:var(--art-border-radius);background-color:var(--art-tip-background);padding:5px;line-height:1;display:inline-flex}.art-video-player.art-notice-show .art-notice{display:flex}.art-video-player .art-contextmenus{z-index:120;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);min-width:var(--art-contextmenus-min-width);flex-direction:column;padding:5px 0;font-size:12px;display:none;position:absolute}.art-video-player .art-contextmenus .art-contextmenu{cursor:pointer;border-bottom:1px solid #ffffff1a;padding:10px 15px;display:flex}.art-video-player .art-contextmenus .art-contextmenu span{padding:0 8px}.art-video-player .art-contextmenus .art-contextmenu span:hover,.art-video-player .art-contextmenus .art-contextmenu span.art-current{color:var(--art-theme)}.art-video-player .art-contextmenus .art-contextmenu:hover{background-color:#ffffff1a}.art-video-player .art-contextmenus .art-contextmenu:last-child{border-bottom:none}.art-video-player.art-contextmenu-show .art-contextmenus{display:flex}.art-video-player .art-settings{z-index:90;border-radius:var(--art-border-radius);max-height:var(--art-settings-max-height);left:auto;right:var(--art-padding);bottom:var(--art-control-height);transition:all var(--art-transition-duration)ease;background-color:var(--art-widget-background);flex-direction:column;display:none;position:absolute;overflow:hidden auto}.art-video-player .art-settings .art-setting-panel{flex-direction:column;display:none}.art-video-player .art-settings .art-setting-panel.art-current{display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item{cursor:pointer;transition:background-color var(--art-transition-duration)ease;justify-content:space-between;align-items:center;padding:0 5px;display:flex;overflow:hidden}.art-video-player .art-settings .art-setting-panel .art-setting-item:hover{background-color:#ffffff1a}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current{color:var(--art-theme)}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-icon-check{visibility:hidden;height:15px}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current .art-icon-check{visibility:visible}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left{flex-shrink:0;justify-content:center;align-items:center;gap:5px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left .art-setting-item-left-icon{height:var(--art-settings-icon-size);width:var(--art-settings-icon-size);justify-content:center;align-items:center;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right{justify-content:center;align-items:center;gap:5px;font-size:12px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-tooltip{white-space:nowrap;color:#ffffff80}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-icon{justify-content:center;align-items:center;min-width:32px;height:24px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-range{appearance:none;background-color:#fff3;outline:none;width:80px;height:3px}.art-video-player .art-settings .art-setting-panel .art-setting-item-back{border-bottom:1px solid #ffffff1a}.art-video-player.art-setting-show .art-settings{display:flex}.art-video-player .art-info{left:var(--art-padding);top:var(--art-padding);z-index:100;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);padding:10px;font-size:12px;display:none;position:absolute}.art-video-player .art-info .art-info-panel{flex-direction:column;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item{align-items:center;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item .art-info-title{text-align:right;width:100px}.art-video-player .art-info .art-info-panel .art-info-item .art-info-content{text-overflow:ellipsis;white-space:nowrap;user-select:all;width:250px;overflow:hidden}.art-video-player .art-info .art-info-close{cursor:pointer;position:absolute;top:5px;right:5px}.art-video-player.art-info-show .art-info{display:flex}.art-hide-cursor *{cursor:none!important}.art-video-player[data-aspect-ratio]{overflow:hidden}.art-video-player[data-aspect-ratio] .art-video{object-fit:fill;box-sizing:content-box}.art-fullscreen{--art-progress-height:8px;--art-indicator-size:20px;--art-control-height:60px;--art-control-icon-scale:1.3}.art-fullscreen-web{--art-progress-height:8px;--art-indicator-size:20px;--art-control-height:60px;--art-control-icon-scale:1.3;z-index:var(--art-fullscreen-web-index);width:100%;height:100%;position:fixed;inset:0}.art-mini-popup{z-index:9999;border-radius:var(--art-border-radius);cursor:move;user-select:none;background:#000;width:320px;height:180px;transition:opacity .2s;position:fixed;overflow:hidden;box-shadow:0 0 5px #00000080}.art-mini-popup svg{fill:#fff}.art-mini-popup .art-video{pointer-events:none}.art-mini-popup .art-mini-close{z-index:20;cursor:pointer;opacity:0;transition:opacity .2s;position:absolute;top:10px;right:10px}.art-mini-popup .art-mini-state{z-index:30;pointer-events:none;opacity:0;background-color:#00000040;justify-content:center;align-items:center;width:100%;height:100%;transition:opacity .2s;display:flex;position:absolute;inset:0}.art-mini-popup .art-mini-state .art-icon{opacity:.75;cursor:pointer;pointer-events:auto;transition:transform .2s;transform:scale(3)}.art-mini-popup .art-mini-state .art-icon:active{transform:scale(2.5)}.art-mini-popup.art-mini-droging{opacity:.9}.art-mini-popup:hover .art-mini-close,.art-mini-popup:hover .art-mini-state{opacity:1}.art-video-player[data-flip=horizontal] .art-video{transform:scaleX(-1)}.art-video-player[data-flip=vertical] .art-video{transform:scaleY(-1)}.art-video-player .art-layer-lock{height:var(--art-lock-size);width:var(--art-lock-size);top:50%;left:var(--art-padding);background-color:var(--art-tip-background);border-radius:50%;justify-content:center;align-items:center;display:none;position:absolute;transform:translateY(-50%)}.art-video-player .art-layer-auto-playback{border-radius:var(--art-border-radius);left:var(--art-padding);bottom:calc(var(--art-control-height) + var(--art-bottom-gap) + 10px);background-color:var(--art-widget-background);align-items:center;gap:10px;padding:10px;line-height:1;display:none;position:absolute}.art-video-player .art-layer-auto-playback .art-auto-playback-close{cursor:pointer;justify-content:center;align-items:center;display:flex}.art-video-player .art-layer-auto-playback .art-auto-playback-close svg{fill:var(--art-theme);width:15px;height:15px}.art-video-player .art-layer-auto-playback .art-auto-playback-jump{color:var(--art-theme);cursor:pointer}.art-video-player.art-lock .art-subtitle{bottom:var(--art-subtitle-bottom)!important}.art-video-player.art-mini-progress-bar .art-bottom,.art-video-player.art-lock .art-bottom{opacity:1;background-image:none;padding:0}.art-video-player.art-mini-progress-bar .art-bottom .art-controls,.art-video-player.art-lock .art-bottom .art-controls,.art-video-player.art-mini-progress-bar .art-bottom .art-progress,.art-video-player.art-lock .art-bottom .art-progress{transform:translateY(calc(var(--art-control-height) + var(--art-bottom-gap) + var(--art-progress-height)/4))}.art-video-player.art-mini-progress-bar .art-bottom .art-progress-indicator,.art-video-player.art-lock .art-bottom .art-progress-indicator{display:none!important}.art-video-player.art-control-show .art-layer-lock{display:flex}.art-control-selector{justify-content:center;display:flex;position:relative}.art-control-selector .art-selector-list{text-align:center;border-radius:var(--art-border-radius);opacity:0;pointer-events:none;bottom:var(--art-control-height);max-height:var(--art-selector-max-height);background-color:var(--art-widget-background);transition:all var(--art-transition-duration)ease;flex-direction:column;align-items:center;display:flex;position:absolute;overflow:hidden auto;transform:translateY(10px)}.art-control-selector .art-selector-list .art-selector-item{flex-shrink:0;justify-content:center;align-items:center;width:100%;padding:10px 15px;line-height:1;display:flex}.art-control-selector .art-selector-list .art-selector-item:hover{background-color:#ffffff1a}.art-control-selector .art-selector-list .art-selector-item:hover,.art-control-selector .art-selector-list .art-selector-item.art-current{color:var(--art-theme)}.art-control-selector:hover .art-selector-list{opacity:1;pointer-events:auto;transform:translateY(0)}[class*=hint--]{font-style:normal;display:inline-block;position:relative}[class*=hint--]:before,[class*=hint--]:after{visibility:hidden;opacity:0;z-index:1000000;pointer-events:none;transition:all .3s;position:absolute;transform:translate(0,0)}[class*=hint--]:hover:before,[class*=hint--]:hover:after{visibility:visible;opacity:1;transition-delay:.1s}[class*=hint--]:before{content:"";z-index:1000001;background:0 0;border:6px solid #0000;position:absolute}[class*=hint--]:after{color:#fff;white-space:nowrap;background:#000;padding:8px 10px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:12px}[class*=hint--][aria-label]:after{content:attr(aria-label)}[class*=hint--][data-hint]:after{content:attr(data-hint)}[aria-label=""]:before,[aria-label=""]:after,[data-hint=""]:before,[data-hint=""]:after{display:none!important}.hint--top-left:before,.hint--top-right:before,.hint--top:before{border-top-color:#000}.hint--bottom-left:before,.hint--bottom-right:before,.hint--bottom:before{border-bottom-color:#000}.hint--left:before{border-left-color:#000}.hint--right:before{border-right-color:#000}.hint--top:before{margin-bottom:-11px}.hint--top:before,.hint--top:after{bottom:100%;left:50%}.hint--top:before{left:calc(50% - 6px)}.hint--top:after{transform:translate(-50%)}.hint--top:hover:before{transform:translateY(-8px)}.hint--top:hover:after{transform:translate(-50%)translateY(-8px)}.hint--bottom:before{margin-top:-11px}.hint--bottom:before,.hint--bottom:after{top:100%;left:50%}.hint--bottom:before{left:calc(50% - 6px)}.hint--bottom:after{transform:translate(-50%)}.hint--bottom:hover:before{transform:translateY(8px)}.hint--bottom:hover:after{transform:translate(-50%)translateY(8px)}.hint--right:before{margin-bottom:-6px;margin-left:-11px}.hint--right:after{margin-bottom:-14px}.hint--right:before,.hint--right:after{bottom:50%;left:100%}.hint--right:hover:before,.hint--right:hover:after{transform:translate(8px)}.hint--left:before{margin-bottom:-6px;margin-right:-11px}.hint--left:after{margin-bottom:-14px}.hint--left:before,.hint--left:after{bottom:50%;right:100%}.hint--left:hover:before,.hint--left:hover:after{transform:translate(-8px)}.hint--top-left:before{margin-bottom:-11px}.hint--top-left:before,.hint--top-left:after{bottom:100%;left:50%}.hint--top-left:before{left:calc(50% - 6px)}.hint--top-left:after{margin-left:12px;transform:translate(-100%)}.hint--top-left:hover:before{transform:translateY(-8px)}.hint--top-left:hover:after{transform:translate(-100%)translateY(-8px)}.hint--top-right:before{margin-bottom:-11px}.hint--top-right:before,.hint--top-right:after{bottom:100%;left:50%}.hint--top-right:before{left:calc(50% - 6px)}.hint--top-right:after{margin-left:-12px;transform:translate(0)}.hint--top-right:hover:before,.hint--top-right:hover:after{transform:translateY(-8px)}.hint--bottom-left:before{margin-top:-11px}.hint--bottom-left:before,.hint--bottom-left:after{top:100%;left:50%}.hint--bottom-left:before{left:calc(50% - 6px)}.hint--bottom-left:after{margin-left:12px;transform:translate(-100%)}.hint--bottom-left:hover:before{transform:translateY(8px)}.hint--bottom-left:hover:after{transform:translate(-100%)translateY(8px)}.hint--bottom-right:before{margin-top:-11px}.hint--bottom-right:before,.hint--bottom-right:after{top:100%;left:50%}.hint--bottom-right:before{left:calc(50% - 6px)}.hint--bottom-right:after{margin-left:-12px;transform:translate(0)}.hint--bottom-right:hover:before,.hint--bottom-right:hover:after{transform:translateY(8px)}.hint--small:after,.hint--medium:after,.hint--large:after{white-space:normal;word-wrap:break-word;line-height:1.4em}.hint--small:after{width:80px}.hint--medium:after{width:150px}.hint--large:after{width:300px}[class*=hint--]:after{text-shadow:0 -1px #000;box-shadow:4px 4px 8px #0000004d}.hint--error:after{text-shadow:0 -1px #592726;background-color:#b34e4d}.hint--error.hint--top-left:before,.hint--error.hint--top-right:before,.hint--error.hint--top:before{border-top-color:#b34e4d}.hint--error.hint--bottom-left:before,.hint--error.hint--bottom-right:before,.hint--error.hint--bottom:before{border-bottom-color:#b34e4d}.hint--error.hint--left:before{border-left-color:#b34e4d}.hint--error.hint--right:before{border-right-color:#b34e4d}.hint--warning:after{text-shadow:0 -1px #6c5328;background-color:#c09854}.hint--warning.hint--top-left:before,.hint--warning.hint--top-right:before,.hint--warning.hint--top:before{border-top-color:#c09854}.hint--warning.hint--bottom-left:before,.hint--warning.hint--bottom-right:before,.hint--warning.hint--bottom:before{border-bottom-color:#c09854}.hint--warning.hint--left:before{border-left-color:#c09854}.hint--warning.hint--right:before{border-right-color:#c09854}.hint--info:after{text-shadow:0 -1px #1a3c4d;background-color:#3986ac}.hint--info.hint--top-left:before,.hint--info.hint--top-right:before,.hint--info.hint--top:before{border-top-color:#3986ac}.hint--info.hint--bottom-left:before,.hint--info.hint--bottom-right:before,.hint--info.hint--bottom:before{border-bottom-color:#3986ac}.hint--info.hint--left:before{border-left-color:#3986ac}.hint--info.hint--right:before{border-right-color:#3986ac}.hint--success:after{text-shadow:0 -1px #1a321a;background-color:#458746}.hint--success.hint--top-left:before,.hint--success.hint--top-right:before,.hint--success.hint--top:before{border-top-color:#458746}.hint--success.hint--bottom-left:before,.hint--success.hint--bottom-right:before,.hint--success.hint--bottom:before{border-bottom-color:#458746}.hint--success.hint--left:before{border-left-color:#458746}.hint--success.hint--right:before{border-right-color:#458746}.hint--always:after,.hint--always:before{opacity:1;visibility:visible}.hint--always.hint--top:before{transform:translateY(-8px)}.hint--always.hint--top:after{transform:translate(-50%)translateY(-8px)}.hint--always.hint--top-left:before{transform:translateY(-8px)}.hint--always.hint--top-left:after{transform:translate(-100%)translateY(-8px)}.hint--always.hint--top-right:before,.hint--always.hint--top-right:after{transform:translateY(-8px)}.hint--always.hint--bottom:before{transform:translateY(8px)}.hint--always.hint--bottom:after{transform:translate(-50%)translateY(8px)}.hint--always.hint--bottom-left:before{transform:translateY(8px)}.hint--always.hint--bottom-left:after{transform:translate(-100%)translateY(8px)}.hint--always.hint--bottom-right:before,.hint--always.hint--bottom-right:after{transform:translateY(8px)}.hint--always.hint--left:before,.hint--always.hint--left:after{transform:translate(-8px)}.hint--always.hint--right:before,.hint--always.hint--right:after{transform:translate(8px)}.hint--rounded:after{border-radius:4px}.hint--no-animate:before,.hint--no-animate:after{transition-duration:0s}.hint--bounce:before,.hint--bounce:after{-webkit-transition:opacity .3s,visibility .3s,-webkit-transform .3s cubic-bezier(.71,1.7,.77,1.24);-moz-transition:opacity .3s,visibility .3s,-moz-transform .3s cubic-bezier(.71,1.7,.77,1.24);transition:opacity .3s,visibility .3s,transform .3s cubic-bezier(.71,1.7,.77,1.24)}.hint--no-shadow:before,.hint--no-shadow:after{text-shadow:initial;box-shadow:initial}.hint--no-arrow:before{display:none}.art-video-player.art-mobile{--art-bottom-gap:10px;--art-control-height:38px;--art-control-icon-scale:1;--art-state-size:60px;--art-settings-max-height:180px;--art-selector-max-height:180px;--art-indicator-scale:1;--art-control-opacity:1}.art-video-player.art-mobile .art-controls-left{margin-left:calc(var(--art-padding)/-1)}.art-video-player.art-mobile .art-controls-right{margin-right:calc(var(--art-padding)/-1)}'},{}],bAWi2:[function(t,o,r){var e;e=function(){function n(p){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}var c=Object.prototype.toString,i=function(p){if(p===void 0)return"undefined";if(p===null)return"null";var h=n(p);if(h==="boolean")return"boolean";if(h==="string")return"string";if(h==="number")return"number";if(h==="symbol")return"symbol";if(h==="function")return s(p)==="GeneratorFunction"?"generatorfunction":"function";if(Array.isArray?Array.isArray(p):p instanceof Array)return"array";if(p.constructor&&typeof p.constructor.isBuffer=="function"&&p.constructor.isBuffer(p))return"buffer";if(function(m){try{if(typeof m.length=="number"&&typeof m.callee=="function")return!0}catch(g){if(g.message.indexOf("callee")!==-1)return!0}return!1}(p))return"arguments";if(p instanceof Date||typeof p.toDateString=="function"&&typeof p.getDate=="function"&&typeof p.setDate=="function")return"date";if(p instanceof Error||typeof p.message=="string"&&p.constructor&&typeof p.constructor.stackTraceLimit=="number")return"error";if(p instanceof RegExp||typeof p.flags=="string"&&typeof p.ignoreCase=="boolean"&&typeof p.multiline=="boolean"&&typeof p.global=="boolean")return"regexp";switch(s(p)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(typeof p.throw=="function"&&typeof p.return=="function"&&typeof p.next=="function")return"generator";switch(h=c.call(p)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return h.slice(8,-1).toLowerCase().replace(/\s/g,"")};function s(p){return p.constructor?p.constructor.name:null}function l(p,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:["option"];return d(p,h,m),f(p,h,m),function(g,b,w){var v=i(b),y=i(g);if(v==="object"){if(y!=="object")throw Error("[Type Error]: '".concat(w.join("."),"' require 'object' type, but got '").concat(y,"'"));Object.keys(b).forEach(function(k){var M=g[k],x=b[k],E=w.slice();E.push(k),d(M,x,E),f(M,x,E),l(M,x,E)})}if(v==="array"){if(y!=="array")throw Error("[Type Error]: '".concat(w.join("."),"' require 'array' type, but got '").concat(y,"'"));g.forEach(function(k,M){var x=g[M],E=b[M]||b[0],T=w.slice();T.push(M),d(x,E,T),f(x,E,T),l(x,E,T)})}}(p,h,m),p}function d(p,h,m){if(i(h)==="string"){var g=i(p);if(h[0]==="?"&&(h=h.slice(1)+"|undefined"),!(-1<h.indexOf("|")?h.split("|").map(function(b){return b.toLowerCase().trim()}).filter(Boolean).some(function(b){return g===b}):h.toLowerCase().trim()===g))throw Error("[Type Error]: '".concat(m.join("."),"' require '").concat(h,"' type, but got '").concat(g,"'"))}}function f(p,h,m){if(i(h)==="function"){var g=h(p,i(p),m);if(g!==!0){var b=i(g);throw b==="string"?Error(g):b==="error"?g:Error("[Validator Error]: The scheme for '".concat(m.join("."),"' validator require return true, but got '").concat(g,"'"))}}}return l.kindOf=i,l},o.exports=e()},{}],"66mFZ":[function(t,o,r){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=class{on(e,n,c){let i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:n,ctx:c}),this}once(e,n,c){let i=this;function s(...l){i.off(e,s),n.apply(c,l)}return s._=n,this.on(e,s,c)}emit(e,...n){let c=((this.e||(this.e={}))[e]||[]).slice();for(let i=0;i<c.length;i+=1)c[i].fn.apply(c[i].ctx,n);return this}off(e,n){let c=this.e||(this.e={}),i=c[e],s=[];if(i&&n)for(let l=0,d=i.length;l<d;l+=1)i[l].fn!==n&&i[l].fn._!==n&&s.push(i[l]);return s.length?c[e]=s:delete c[e],this}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9pCYc":[function(t,o,r){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,n){return Object.keys(e).forEach(function(c){c==="default"||c==="__esModule"||Object.prototype.hasOwnProperty.call(n,c)||Object.defineProperty(n,c,{enumerable:!0,get:function(){return e[c]}})}),n},r.export=function(e,n,c){Object.defineProperty(e,n,{enumerable:!0,get:c})}},{}],"71aH7":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./dom");e.exportAll(n,r);var c=t("./error");e.exportAll(c,r);var i=t("./subtitle");e.exportAll(i,r);var s=t("./file");e.exportAll(s,r);var l=t("./property");e.exportAll(l,r);var d=t("./time");e.exportAll(d,r);var f=t("./format");e.exportAll(f,r);var p=t("./compatibility");e.exportAll(p,r)},{"./dom":"bSNiV","./error":"hwmZz","./subtitle":"inzwq","./file":"6b7Ip","./property":"5NSdr","./time":"epmNy","./format":"gapRl","./compatibility":"6ZTr6","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bSNiV:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"query",()=>c),e.export(r,"queryAll",()=>i),e.export(r,"addClass",()=>s),e.export(r,"removeClass",()=>l),e.export(r,"hasClass",()=>d),e.export(r,"append",()=>f),e.export(r,"remove",()=>p),e.export(r,"setStyle",()=>h),e.export(r,"setStyles",()=>m),e.export(r,"getStyle",()=>g),e.export(r,"sublings",()=>b),e.export(r,"inverseClass",()=>w),e.export(r,"tooltip",()=>v),e.export(r,"isInViewport",()=>y),e.export(r,"includeFromEvent",()=>k),e.export(r,"replaceElement",()=>M),e.export(r,"createElement",()=>x),e.export(r,"getIcon",()=>E),e.export(r,"setStyleText",()=>T),e.export(r,"supportsFlex",()=>$),e.export(r,"getRect",()=>P),e.export(r,"loadImg",()=>L);var n=t("./compatibility");function c(j,I=document){return I.querySelector(j)}function i(j,I=document){return Array.from(I.querySelectorAll(j))}function s(j,I){return j.classList.add(I)}function l(j,I){return j.classList.remove(I)}function d(j,I){return j.classList.contains(I)}function f(j,I){return I instanceof Element?j.appendChild(I):j.insertAdjacentHTML("beforeend",String(I)),j.lastElementChild||j.lastChild}function p(j){return j.parentNode.removeChild(j)}function h(j,I,S){return j.style[I]=S,j}function m(j,I){for(let S in I)h(j,S,I[S]);return j}function g(j,I,S=!0){let H=window.getComputedStyle(j,null).getPropertyValue(I);return S?parseFloat(H):H}function b(j){return Array.from(j.parentElement.children).filter(I=>I!==j)}function w(j,I){b(j).forEach(S=>l(S,I)),s(j,I)}function v(j,I,S="top"){n.isMobile||(j.setAttribute("aria-label",I),s(j,"hint--rounded"),s(j,`hint--${S}`))}function y(j,I=0){let S=j.getBoundingClientRect(),H=window.innerHeight||document.documentElement.clientHeight,C=window.innerWidth||document.documentElement.clientWidth,_=S.top-I<=H&&S.top+S.height+I>=0,D=S.left-I<=C+I&&S.left+S.width+I>=0;return _&&D}function k(j,I){return j.composedPath&&j.composedPath().indexOf(I)>-1}function M(j,I){return I.parentNode.replaceChild(j,I),j}function x(j){return document.createElement(j)}function E(j="",I=""){let S=x("i");return s(S,"art-icon"),s(S,`art-icon-${j}`),f(S,I),S}function T(j,I){let S=document.getElementById(j);if(S)S.textContent=I;else{let H=x("style");H.id=j,H.textContent=I,document.head.appendChild(H)}}function $(){let j=document.createElement("div");return j.style.display="flex",j.style.display==="flex"}function P(j){return j.getBoundingClientRect()}function L(j,I){return new Promise((S,H)=>{let C=new Image;C.crossOrigin="Anonymous",C.onload=function(){if(I&&I!==1){let _=document.createElement("canvas"),D=_.getContext("2d");_.width=C.width*I,_.height=C.height*I,D.drawImage(C,0,0,_.width,_.height),_.toBlob(B=>{let N=URL.createObjectURL(B),O=new Image;O.onload=function(){S(O)},O.onerror=function(){URL.revokeObjectURL(N),H(Error(`Image load failed: ${j}`))},O.src=N})}else S(C)},C.onerror=function(){H(Error(`Image load failed: ${j}`))},C.src=j})}},{"./compatibility":"6ZTr6","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6ZTr6":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"userAgent",()=>n),e.export(r,"isSafari",()=>c),e.export(r,"isWechat",()=>i),e.export(r,"isIE",()=>s),e.export(r,"isAndroid",()=>l),e.export(r,"isIOS",()=>d),e.export(r,"isIOS13",()=>f),e.export(r,"isMobile",()=>p),e.export(r,"isBrowser",()=>h);let n=typeof navigator<"u"?navigator.userAgent:"",c=/^((?!chrome|android).)*safari/i.test(n),i=/MicroMessenger/i.test(n),s=/MSIE|Trident/i.test(n),l=/android/i.test(n),d=/iPad|iPhone|iPod/i.test(n)&&!window.MSStream,f=d||n.includes("Macintosh")&&navigator.maxTouchPoints>=1,p=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n)||f,h=typeof window<"u"},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hwmZz:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"ArtPlayerError",()=>n),e.export(r,"errorHandle",()=>c);class n extends Error{constructor(s,l){super(s),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,l||this.constructor),this.name="ArtPlayerError"}}function c(i,s){if(!i)throw new n(s);return i}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],inzwq:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(s){return`WEBVTT \r
\r
`.concat(s.replace(/(\d\d:\d\d:\d\d)[,.](\d+)/g,(l,d,f)=>{let p=f.slice(0,3);return f.length===1&&(p=f+"00"),f.length===2&&(p=f+"0"),`${d},${p}`}).replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/{[\s\S]*?}/g,"").concat(`\r
\r
`))}function c(s){return URL.createObjectURL(new Blob([s],{type:"text/vtt"}))}function i(s){let l=RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function d(f=""){return f.split(/[:.]/).map((p,h,m)=>{if(h===m.length-1){if(p.length===1)return`.${p}00`;if(p.length===2)return`.${p}0`}else if(p.length===1)return(h===0?"0":":0")+p;return h===0?p:h===m.length-1?`.${p}`:`:${p}`}).join("")}return`WEBVTT

`+s.split(/\r?\n/).map(f=>{let p=f.match(l);return p?{start:d(p[1].trim()),end:d(p[2].trim()),text:p[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,`
`).trim().split(/\r?\n/).map(h=>h.trim()).join(`
`)}:null}).filter(f=>f).map((f,p)=>f?p+1+`
${f.start} --> ${f.end}
${f.text}`:"").filter(f=>f.trim()).join(`

`)}e.defineInteropFlag(r),e.export(r,"srtToVtt",()=>n),e.export(r,"vttToBlob",()=>c),e.export(r,"assToVtt",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6b7Ip":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c,i){let s=document.createElement("a");s.style.display="none",s.href=c,s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s)}e.defineInteropFlag(r),e.export(r,"getExt",()=>function c(i){return i.includes("?")?c(i.split("?")[0]):i.includes("#")?c(i.split("#")[0]):i.trim().toLowerCase().split(".").pop()}),e.export(r,"download",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5NSdr":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"def",()=>n),e.export(r,"has",()=>i),e.export(r,"get",()=>s),e.export(r,"mergeDeep",()=>function l(...d){let f=p=>p&&typeof p=="object"&&!Array.isArray(p);return d.reduce((p,h)=>(Object.keys(h).forEach(m=>{let g=p[m],b=h[m];Array.isArray(g)&&Array.isArray(b)?p[m]=g.concat(...b):f(g)&&f(b)?p[m]=l(g,b):p[m]=b}),p),{})});let n=Object.defineProperty,{hasOwnProperty:c}=Object.prototype;function i(l,d){return c.call(l,d)}function s(l,d){return Object.getOwnPropertyDescriptor(l,d)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],epmNy:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(s=0){return new Promise(l=>setTimeout(l,s))}function c(s,l){let d;return function(...f){clearTimeout(d),d=setTimeout(()=>(d=null,s.apply(this,f)),l)}}function i(s,l){let d=!1;return function(...f){d||(s.apply(this,f),d=!0,setTimeout(function(){d=!1},l))}}e.defineInteropFlag(r),e.export(r,"sleep",()=>n),e.export(r,"debounce",()=>c),e.export(r,"throttle",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gapRl:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(d,f,p){return Math.max(Math.min(d,Math.max(f,p)),Math.min(f,p))}function c(d){return d.charAt(0).toUpperCase()+d.slice(1)}function i(d){if(!d)return"00:00";let f=Math.floor(d/3600),p=Math.floor((d-3600*f)/60),h=Math.floor(d-3600*f-60*p);return(f>0?[f,p,h]:[p,h]).map(m=>m<10?`0${m}`:String(m)).join(":")}function s(d){return d.replace(/[&<>'"]/g,f=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"})[f]||f)}function l(d){let f={"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'},p=RegExp(`(${Object.keys(f).join("|")})`,"g");return d.replace(p,h=>f[h]||h)}e.defineInteropFlag(r),e.export(r,"clamp",()=>n),e.export(r,"capitalize",()=>c),e.export(r,"secondToTime",()=>i),e.export(r,"escape",()=>s),e.export(r,"unescape",()=>l)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],AKEiO:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"ComponentOption",()=>h);var n=t("../utils");let c="array",i="boolean",s="string",l="number",d="object",f="function";function p(m,g,b){return(0,n.errorHandle)(g===s||g===l||m instanceof Element,`${b.join(".")} require '${s}' or 'Element' type`)}let h={html:p,disable:`?${i}`,name:`?${s}`,index:`?${l}`,style:`?${d}`,click:`?${f}`,mounted:`?${f}`,tooltip:`?${s}|${l}`,width:`?${l}`,selector:`?${c}`,onSelect:`?${f}`,switch:`?${i}`,onSwitch:`?${f}`,range:`?${c}`,onRange:`?${f}`,onChange:`?${f}`};r.default={id:s,container:p,url:s,poster:s,type:s,theme:s,lang:s,volume:l,isLive:i,muted:i,autoplay:i,autoSize:i,autoMini:i,loop:i,flip:i,playbackRate:i,aspectRatio:i,screenshot:i,setting:i,hotkey:i,pip:i,mutex:i,backdrop:i,fullscreen:i,fullscreenWeb:i,subtitleOffset:i,miniProgressBar:i,useSSR:i,playsInline:i,lock:i,fastForward:i,autoPlayback:i,autoOrientation:i,airplay:i,proxy:`?${f}`,plugins:[f],layers:[h],contextmenu:[h],settings:[h],controls:[{...h,position:(m,g,b)=>{let w=["top","left","right"];return(0,n.errorHandle)(w.includes(m),`${b.join(".")} only accept ${w.toString()} as parameters`)}}],quality:[{default:`?${i}`,html:s,url:s}],highlight:[{time:l,text:s}],thumbnails:{url:s,number:l,column:l,width:l,height:l,scale:l},subtitle:{url:s,name:s,type:s,style:d,escape:i,encoding:s,onVttLoad:f},moreVideoAttr:d,i18n:d,icons:d,cssVar:d,customType:d}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],lyjeQ:[function(t,o,r){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default={propertys:["audioTracks","autoplay","buffered","controller","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","loop","mediaGroup","muted","networkState","paused","playbackRate","played","preload","readyState","seekable","seeking","src","startDate","textTracks","videoTracks","volume"],methods:["addTextTrack","canPlayType","load","play","pause"],events:["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],prototypes:["width","height","videoWidth","videoHeight","poster","webkitDecodedFrameCount","webkitDroppedFrameCount","playsInline","webkitSupportsFullscreen","webkitDisplayingFullscreen","onenterpictureinpicture","onleavepictureinpicture","disablePictureInPicture","cancelVideoFrameCallback","requestVideoFrameCallback","getVideoPlaybackQuality","requestPictureInPicture","webkitEnterFullScreen","webkitEnterFullscreen","webkitExitFullScreen","webkitExitFullscreen"]}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],X13Zf:[function(t,o,r){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var e=t("./utils");class n{constructor(i){this.art=i;let{option:s,constructor:l}=i;s.container instanceof Element?this.$container=s.container:(this.$container=(0,e.query)(s.container),(0,e.errorHandle)(this.$container,`No container element found by ${s.container}`)),(0,e.errorHandle)((0,e.supportsFlex)(),"The current browser does not support flex layout");let d=this.$container.tagName.toLowerCase();(0,e.errorHandle)(d==="div",`Unsupported container element type, only support 'div' but got '${d}'`),(0,e.errorHandle)(l.instances.every(f=>f.template.$container!==this.$container),"Cannot mount multiple instances on the same dom element"),this.query=this.query.bind(this),this.$container.dataset.artId=i.id,this.init()}static get html(){return'<div class="art-video-player art-subtitle-show art-layer-show art-control-show art-mask-show"><video class="art-video"><track default kind="metadata" src=""></track></video><div class="art-poster"></div><div class="art-subtitle"></div><div class="art-danmuku"></div><div class="art-layers"></div><div class="art-mask"><div class="art-state"></div></div><div class="art-bottom"><div class="art-progress"></div><div class="art-controls"><div class="art-controls-left"></div><div class="art-controls-center"></div><div class="art-controls-right"></div></div></div><div class="art-loading"></div><div class="art-notice"><div class="art-notice-inner"></div></div><div class="art-settings"></div><div class="art-info"><div class="art-info-panel"><div class="art-info-item"><div class="art-info-title">Player version:</div><div class="art-info-content">5.2.1</div></div><div class="art-info-item"><div class="art-info-title">Video url:</div><div class="art-info-content" data-video="src"></div></div><div class="art-info-item"><div class="art-info-title">Video volume:</div><div class="art-info-content" data-video="volume"></div></div><div class="art-info-item"><div class="art-info-title">Video time:</div><div class="art-info-content" data-video="currentTime"></div></div><div class="art-info-item"><div class="art-info-title">Video duration:</div><div class="art-info-content" data-video="duration"></div></div><div class="art-info-item"><div class="art-info-title">Video resolution:</div><div class="art-info-content"><span data-video="videoWidth"></span>x<span data-video="videoHeight"></span></div></div></div><div class="art-info-close">[x]</div></div><div class="art-contextmenus"></div></div>'}query(i){return(0,e.query)(i,this.$container)}init(){let{option:i}=this.art;if(i.useSSR||(this.$container.innerHTML=n.html),this.$player=this.query(".art-video-player"),this.$video=this.query(".art-video"),this.$track=this.query("track"),this.$poster=this.query(".art-poster"),this.$subtitle=this.query(".art-subtitle"),this.$danmuku=this.query(".art-danmuku"),this.$bottom=this.query(".art-bottom"),this.$progress=this.query(".art-progress"),this.$controls=this.query(".art-controls"),this.$controlsLeft=this.query(".art-controls-left"),this.$controlsCenter=this.query(".art-controls-center"),this.$controlsRight=this.query(".art-controls-right"),this.$layer=this.query(".art-layers"),this.$loading=this.query(".art-loading"),this.$notice=this.query(".art-notice"),this.$noticeInner=this.query(".art-notice-inner"),this.$mask=this.query(".art-mask"),this.$state=this.query(".art-state"),this.$setting=this.query(".art-settings"),this.$info=this.query(".art-info"),this.$infoPanel=this.query(".art-info-panel"),this.$infoClose=this.query(".art-info-close"),this.$contextmenu=this.query(".art-contextmenus"),i.proxy){let s=i.proxy.call(this.art,this.art);(0,e.errorHandle)(s instanceof HTMLVideoElement||s instanceof HTMLCanvasElement,"Function 'option.proxy' needs to return 'HTMLVideoElement' or 'HTMLCanvasElement'"),(0,e.replaceElement)(s,this.$video),s.className="art-video",this.$video=s}i.backdrop&&(0,e.addClass)(this.$player,"art-backdrop"),e.isMobile&&(0,e.addClass)(this.$player,"art-mobile")}destroy(i){i?this.$container.innerHTML="":(0,e.addClass)(this.$player,"art-destroy")}}r.default=n},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3jKkj":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("../utils"),c=t("./zh-cn"),i=e.interopDefault(c);r.default=class{constructor(s){this.art=s,this.languages={"zh-cn":i.default},this.language={},this.update(s.option.i18n)}init(){let s=this.art.option.lang.toLowerCase();this.language=this.languages[s]||{}}get(s){return this.language[s]||s}update(s){this.languages=(0,n.mergeDeep)(this.languages,s),this.init()}}},{"../utils":"71aH7","./zh-cn":"5Y91w","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5Y91w":[function(t,o,r){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);let e={"Video Info":"",Close:"","Video Load Failed":"",Volume:"",Play:"",Pause:"",Rate:"",Mute:"","Video Flip":"",Horizontal:"",Vertical:"",Reconnect:"","Show Setting":"","Hide Setting":"",Screenshot:"","Play Speed":"","Aspect Ratio":"",Default:"",Normal:"",Open:"","Switch Video":"","Switch Subtitle":"",Fullscreen:"","Exit Fullscreen":"","Web Fullscreen":"","Exit Web Fullscreen":"","Mini Player":"","PIP Mode":"","Exit PIP Mode":"","PIP Not Supported":"","Fullscreen Not Supported":"","Subtitle Offset":"","Last Seen":"","Jump Play":"",AirPlay:"","AirPlay Not Available":""};r.default=e,typeof window<"u"&&(window["artplayer-i18n-zh-cn"]=e)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],a90nx:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./urlMix"),c=e.interopDefault(n),i=t("./attrMix"),s=e.interopDefault(i),l=t("./playMix"),d=e.interopDefault(l),f=t("./pauseMix"),p=e.interopDefault(f),h=t("./toggleMix"),m=e.interopDefault(h),g=t("./seekMix"),b=e.interopDefault(g),w=t("./volumeMix"),v=e.interopDefault(w),y=t("./currentTimeMix"),k=e.interopDefault(y),M=t("./durationMix"),x=e.interopDefault(M),E=t("./switchMix"),T=e.interopDefault(E),$=t("./playbackRateMix"),P=e.interopDefault($),L=t("./aspectRatioMix"),j=e.interopDefault(L),I=t("./screenshotMix"),S=e.interopDefault(I),H=t("./fullscreenMix"),C=e.interopDefault(H),_=t("./fullscreenWebMix"),D=e.interopDefault(_),B=t("./pipMix"),N=e.interopDefault(B),O=t("./loadedMix"),X=e.interopDefault(O),Z=t("./playedMix"),ct=e.interopDefault(Z),vt=t("./playingMix"),St=e.interopDefault(vt),Ft=t("./autoSizeMix"),At=e.interopDefault(Ft),Dt=t("./rectMix"),$t=e.interopDefault(Dt),Pt=t("./flipMix"),Lt=e.interopDefault(Pt),Bt=t("./miniMix"),Rt=e.interopDefault(Bt),ut=t("./posterMix"),z=e.interopDefault(ut),fe=t("./autoHeightMix"),at=e.interopDefault(fe),bt=t("./cssVarMix"),wt=e.interopDefault(bt),dt=t("./themeMix"),st=e.interopDefault(dt),Ht=t("./typeMix"),pe=e.interopDefault(Ht),Zt=t("./stateMix"),zt=e.interopDefault(Zt),$r=t("./subtitleOffsetMix"),Pr=e.interopDefault($r),Lr=t("./airplayMix"),Br=e.interopDefault(Lr),Rr=t("./qualityMix"),Hr=e.interopDefault(Rr),zr=t("./thumbnailsMix"),Nr=e.interopDefault(zr),Or=t("./optionInit"),Ur=e.interopDefault(Or),Yr=t("./eventInit"),Vr=e.interopDefault(Yr);r.default=class{constructor(Y){(0,c.default)(Y),(0,s.default)(Y),(0,d.default)(Y),(0,p.default)(Y),(0,m.default)(Y),(0,b.default)(Y),(0,v.default)(Y),(0,k.default)(Y),(0,x.default)(Y),(0,T.default)(Y),(0,P.default)(Y),(0,j.default)(Y),(0,S.default)(Y),(0,C.default)(Y),(0,D.default)(Y),(0,N.default)(Y),(0,X.default)(Y),(0,ct.default)(Y),(0,St.default)(Y),(0,At.default)(Y),(0,$t.default)(Y),(0,Lt.default)(Y),(0,Rt.default)(Y),(0,z.default)(Y),(0,at.default)(Y),(0,wt.default)(Y),(0,st.default)(Y),(0,pe.default)(Y),(0,zt.default)(Y),(0,Pr.default)(Y),(0,Br.default)(Y),(0,Hr.default)(Y),(0,Nr.default)(Y),(0,Vr.default)(Y),(0,Ur.default)(Y)}}},{"./urlMix":"kQoac","./attrMix":"deCma","./playMix":"fOJuP","./pauseMix":"fzHAy","./toggleMix":"cBHxQ","./seekMix":"koAPr","./volumeMix":"6eyuR","./currentTimeMix":"faaWv","./durationMix":"5y91K","./switchMix":"iceD8","./playbackRateMix":"keKwh","./aspectRatioMix":"jihET","./screenshotMix":"36kPY","./fullscreenMix":"2GYOJ","./fullscreenWebMix":"5aYAP","./pipMix":"7EnIB","./loadedMix":"3N9mP","./playedMix":"et96R","./playingMix":"9DzzM","./autoSizeMix":"i1LDY","./rectMix":"IqARI","./flipMix":"7E7Vs","./miniMix":"gpugx","./posterMix":"1SuFS","./autoHeightMix":"8x4te","./cssVarMix":"1CaTA","./themeMix":"2FqhO","./typeMix":"1fQQs","./stateMix":"iBOQW","./subtitleOffsetMix":"6vlBV","./airplayMix":"eftqT","./qualityMix":"5SdyX","./thumbnailsMix":"4HcqV","./optionInit":"fCWZK","./eventInit":"f8Lv3","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kQoac:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{option:s,template:{$video:l}}=i;(0,n.def)(i,"url",{get:()=>l.src,async set(d){if(d){let f=i.url,p=s.type||(0,n.getExt)(d),h=s.customType[p];p&&h?(await(0,n.sleep)(),i.loading.show=!0,h.call(i,l,d,i)):(URL.revokeObjectURL(f),l.src=d),f!==i.url&&(i.option.url=d,i.isReady&&f&&i.once("video:canplay",()=>{i.emit("restart",d)}))}else await(0,n.sleep)(),i.loading.show=!0}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],deCma:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{template:{$video:s}}=i;(0,n.def)(i,"attr",{value(l,d){if(d===void 0)return s[l];s[l]=d}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fOJuP:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{i18n:s,notice:l,option:d,constructor:{instances:f},template:{$video:p}}=i;(0,n.def)(i,"play",{value:async function(){let h=await p.play();if(l.show=s.get("Play"),i.emit("play"),d.mutex)for(let m=0;m<f.length;m++){let g=f[m];g!==i&&g.pause()}return h}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fzHAy:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{template:{$video:s},i18n:l,notice:d}=i;(0,n.def)(i,"pause",{value(){let f=s.pause();return d.show=l.get("Pause"),i.emit("pause"),f}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cBHxQ:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){(0,n.def)(i,"toggle",{value:()=>i.playing?i.pause():i.play()})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],koAPr:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{notice:s}=i;(0,n.def)(i,"seek",{set(l){i.currentTime=l,i.emit("seek",i.currentTime),i.duration&&(s.show=`${(0,n.secondToTime)(i.currentTime)} / ${(0,n.secondToTime)(i.duration)}`)}}),(0,n.def)(i,"forward",{set(l){i.seek=i.currentTime+l}}),(0,n.def)(i,"backward",{set(l){i.seek=i.currentTime-l}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6eyuR":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{template:{$video:s},i18n:l,notice:d,storage:f}=i;(0,n.def)(i,"volume",{get:()=>s.volume||0,set:p=>{s.volume=(0,n.clamp)(p,0,1),d.show=`${l.get("Volume")}: ${parseInt(100*s.volume,10)}`,s.volume!==0&&f.set("volume",s.volume)}}),(0,n.def)(i,"muted",{get:()=>s.muted,set:p=>{s.muted=p,i.emit("muted",p)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],faaWv:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{$video:s}=i.template;(0,n.def)(i,"currentTime",{get:()=>s.currentTime||0,set:l=>{Number.isNaN(l=parseFloat(l))||(s.currentTime=(0,n.clamp)(l,0,i.duration))}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5y91K":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){(0,n.def)(i,"duration",{get:()=>{let{duration:s}=i.template.$video;return s===1/0?0:s||0}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],iceD8:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){function s(l,d){return new Promise((f,p)=>{if(l===i.url)return;let{playing:h,aspectRatio:m,playbackRate:g}=i;i.pause(),i.url=l,i.notice.show="",i.once("video:error",p),i.once("video:loadedmetadata",()=>{i.currentTime=d}),i.once("video:canplay",async()=>{i.playbackRate=g,i.aspectRatio=m,h&&await i.play(),i.notice.show="",f()})})}(0,n.def)(i,"switchQuality",{value:l=>s(l,i.currentTime)}),(0,n.def)(i,"switchUrl",{value:l=>s(l,0)}),(0,n.def)(i,"switch",{set:i.switchUrl})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],keKwh:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{template:{$video:s},i18n:l,notice:d}=i;(0,n.def)(i,"playbackRate",{get:()=>s.playbackRate,set(f){f?f!==s.playbackRate&&(s.playbackRate=f,d.show=`${l.get("Rate")}: ${f===1?l.get("Normal"):`${f}x`}`):i.playbackRate=1}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jihET:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{i18n:s,notice:l,template:{$video:d,$player:f}}=i;(0,n.def)(i,"aspectRatio",{get:()=>f.dataset.aspectRatio||"default",set(p){if(p||(p="default"),p==="default")(0,n.setStyle)(d,"width",null),(0,n.setStyle)(d,"height",null),(0,n.setStyle)(d,"margin",null),delete f.dataset.aspectRatio;else{let h=p.split(":").map(Number),{clientWidth:m,clientHeight:g}=f,b=h[0]/h[1];m/g>b?((0,n.setStyle)(d,"width",`${b*g}px`),(0,n.setStyle)(d,"height","100%"),(0,n.setStyle)(d,"margin","0 auto")):((0,n.setStyle)(d,"width","100%"),(0,n.setStyle)(d,"height",`${m/b}px`),(0,n.setStyle)(d,"margin","auto 0")),f.dataset.aspectRatio=p}l.show=`${s.get("Aspect Ratio")}: ${p==="default"?s.get("Default"):p}`,i.emit("aspectRatio",p)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"36kPY":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{notice:s,template:{$video:l}}=i,d=(0,n.createElement)("canvas");(0,n.def)(i,"getDataURL",{value:()=>new Promise((f,p)=>{try{d.width=l.videoWidth,d.height=l.videoHeight,d.getContext("2d").drawImage(l,0,0),f(d.toDataURL("image/png"))}catch(h){s.show=h,p(h)}})}),(0,n.def)(i,"getBlobUrl",{value:()=>new Promise((f,p)=>{try{d.width=l.videoWidth,d.height=l.videoHeight,d.getContext("2d").drawImage(l,0,0),d.toBlob(h=>{f(URL.createObjectURL(h))})}catch(h){s.show=h,p(h)}})}),(0,n.def)(i,"screenshot",{value:async f=>{let p=await i.getDataURL(),h=f||`artplayer_${(0,n.secondToTime)(l.currentTime)}`;return(0,n.download)(p,`${h}.png`),i.emit("screenshot",p),p}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2GYOJ":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>s);var n=t("../libs/screenfull"),c=e.interopDefault(n),i=t("../utils");function s(l){let{i18n:d,notice:f,template:{$video:p,$player:h}}=l,m=b=>{c.default.on("change",()=>{b.emit("fullscreen",c.default.isFullscreen)}),c.default.on("error",w=>{b.emit("fullscreenError",w)}),(0,i.def)(b,"fullscreen",{get:()=>c.default.isFullscreen,async set(w){w?(b.state="fullscreen",await c.default.request(h),(0,i.addClass)(h,"art-fullscreen")):(await c.default.exit(),(0,i.removeClass)(h,"art-fullscreen")),b.emit("resize")}})},g=b=>{b.proxy(document,"webkitfullscreenchange",()=>{b.emit("fullscreen",b.fullscreen),b.emit("resize")}),(0,i.def)(b,"fullscreen",{get:()=>document.fullscreenElement===p,set(w){w?(b.state="fullscreen",p.webkitEnterFullscreen()):p.webkitExitFullscreen()}})};l.once("video:loadedmetadata",()=>{c.default.isEnabled?m(l):p.webkitSupportsFullscreen?g(l):(0,i.def)(l,"fullscreen",{get:()=>!1,set(){f.show=d.get("Fullscreen Not Supported")}}),(0,i.def)(l,"fullscreen",(0,i.get)(l,"fullscreen"))})}},{"../libs/screenfull":"8v40z","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8v40z":[function(t,o,r){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);let e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=(()=>{if(typeof document>"u")return!1;let s=e[0],l={};for(let d of e)if(d[1]in document){for(let[f,p]of d.entries())l[s[f]]=p;return l}return!1})(),c={change:n.fullscreenchange,error:n.fullscreenerror},i={request:(s=document.documentElement,l)=>new Promise((d,f)=>{let p=()=>{i.off("change",p),d()};i.on("change",p);let h=s[n.requestFullscreen](l);h instanceof Promise&&h.then(p).catch(f)}),exit:()=>new Promise((s,l)=>{if(!i.isFullscreen){s();return}let d=()=>{i.off("change",d),s()};i.on("change",d);let f=document[n.exitFullscreen]();f instanceof Promise&&f.then(d).catch(l)}),toggle:(s,l)=>i.isFullscreen?i.exit():i.request(s,l),onchange(s){i.on("change",s)},onerror(s){i.on("error",s)},on(s,l){let d=c[s];d&&document.addEventListener(d,l,!1)},off(s,l){let d=c[s];d&&document.removeEventListener(d,l,!1)},raw:n};Object.defineProperties(i,{isFullscreen:{get:()=>!!document[n.fullscreenElement]},element:{enumerable:!0,get:()=>document[n.fullscreenElement]},isEnabled:{enumerable:!0,get:()=>!!document[n.fullscreenEnabled]}}),n||(i={isEnabled:!1}),r.default=i},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5aYAP":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{constructor:s,template:{$container:l,$player:d}}=i,f="";(0,n.def)(i,"fullscreenWeb",{get:()=>(0,n.hasClass)(d,"art-fullscreen-web"),set(p){p?(f=d.style.cssText,s.FULLSCREEN_WEB_IN_BODY&&(0,n.append)(document.body,d),i.state="fullscreenWeb",(0,n.setStyle)(d,"width","100%"),(0,n.setStyle)(d,"height","100%"),(0,n.addClass)(d,"art-fullscreen-web"),i.emit("fullscreenWeb",!0)):(s.FULLSCREEN_WEB_IN_BODY&&(0,n.append)(l,d),f&&(d.style.cssText=f,f=""),(0,n.removeClass)(d,"art-fullscreen-web"),i.emit("fullscreenWeb",!1)),i.emit("resize")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7EnIB":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{i18n:s,notice:l,template:{$video:d}}=i;document.pictureInPictureEnabled?function(f){let{template:{$video:p},proxy:h,notice:m}=f;p.disablePictureInPicture=!1,(0,n.def)(f,"pip",{get:()=>document.pictureInPictureElement,set(g){g?(f.state="pip",p.requestPictureInPicture().catch(b=>{throw m.show=b,b})):document.exitPictureInPicture().catch(b=>{throw m.show=b,b})}}),h(p,"enterpictureinpicture",()=>{f.emit("pip",!0)}),h(p,"leavepictureinpicture",()=>{f.emit("pip",!1)})}(i):d.webkitSupportsPresentationMode?function(f){let{$video:p}=f.template;p.webkitSetPresentationMode("inline"),(0,n.def)(f,"pip",{get:()=>p.webkitPresentationMode==="picture-in-picture",set(h){h?(f.state="pip",p.webkitSetPresentationMode("picture-in-picture"),f.emit("pip",!0)):(p.webkitSetPresentationMode("inline"),f.emit("pip",!1))}})}(i):(0,n.def)(i,"pip",{get:()=>!1,set(){l.show=s.get("PIP Not Supported")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3N9mP":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{$video:s}=i.template;(0,n.def)(i,"loaded",{get:()=>i.loadedTime/s.duration}),(0,n.def)(i,"loadedTime",{get:()=>s.buffered.length?s.buffered.end(s.buffered.length-1):0})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],et96R:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){(0,n.def)(i,"played",{get:()=>i.currentTime/i.duration})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9DzzM":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{$video:s}=i.template;(0,n.def)(i,"playing",{get:()=>typeof s.playing=="boolean"?s.playing:s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],i1LDY:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{$container:s,$player:l,$video:d}=i.template;(0,n.def)(i,"autoSize",{value(){let{videoWidth:f,videoHeight:p}=d,{width:h,height:m}=(0,n.getRect)(s),g=f/p;h/m>g?((0,n.setStyle)(l,"width",`${m*g/h*100}%`),(0,n.setStyle)(l,"height","100%")):((0,n.setStyle)(l,"width","100%"),(0,n.setStyle)(l,"height",`${h/g/m*100}%`)),i.emit("autoSize",{width:i.width,height:i.height})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],IqARI:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){(0,n.def)(i,"rect",{get:()=>(0,n.getRect)(i.template.$player)});let s=["bottom","height","left","right","top","width"];for(let l=0;l<s.length;l++){let d=s[l];(0,n.def)(i,d,{get:()=>i.rect[d]})}(0,n.def)(i,"x",{get:()=>i.left+window.pageXOffset}),(0,n.def)(i,"y",{get:()=>i.top+window.pageYOffset})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7E7Vs":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{template:{$player:s},i18n:l,notice:d}=i;(0,n.def)(i,"flip",{get:()=>s.dataset.flip||"normal",set(f){f||(f="normal"),f==="normal"?delete s.dataset.flip:s.dataset.flip=f,d.show=`${l.get("Video Flip")}: ${l.get((0,n.capitalize)(f))}`,i.emit("flip",f)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gpugx:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{icons:s,proxy:l,storage:d,template:{$player:f,$video:p}}=i,h=!1,m=0,g=0;function b(){let{$mini:y}=i.template;y&&((0,n.removeClass)(f,"art-mini"),(0,n.setStyle)(y,"display","none"),f.prepend(p),i.emit("mini",!1))}function w(y,k){i.playing?((0,n.setStyle)(y,"display","none"),(0,n.setStyle)(k,"display","flex")):((0,n.setStyle)(y,"display","flex"),(0,n.setStyle)(k,"display","none"))}function v(){let{$mini:y}=i.template,k=(0,n.getRect)(y),M=window.innerHeight-k.height-50,x=window.innerWidth-k.width-50;d.set("top",M),d.set("left",x),(0,n.setStyle)(y,"top",`${M}px`),(0,n.setStyle)(y,"left",`${x}px`)}(0,n.def)(i,"mini",{get:()=>(0,n.hasClass)(f,"art-mini"),set(y){if(y){i.state="mini",(0,n.addClass)(f,"art-mini");let k=function(){let{$mini:E}=i.template;if(E)return(0,n.append)(E,p),(0,n.setStyle)(E,"display","flex");{let T=(0,n.createElement)("div");(0,n.addClass)(T,"art-mini-popup"),(0,n.append)(document.body,T),i.template.$mini=T,(0,n.append)(T,p);let $=(0,n.append)(T,'<div class="art-mini-close"></div>');(0,n.append)($,s.close),l($,"click",b);let P=(0,n.append)(T,'<div class="art-mini-state"></div>'),L=(0,n.append)(P,s.play),j=(0,n.append)(P,s.pause);return l(L,"click",()=>i.play()),l(j,"click",()=>i.pause()),w(L,j),i.on("video:playing",()=>w(L,j)),i.on("video:pause",()=>w(L,j)),i.on("video:timeupdate",()=>w(L,j)),l(T,"mousedown",I=>{h=I.button===0,m=I.pageX,g=I.pageY}),i.on("document:mousemove",I=>{if(h){(0,n.addClass)(T,"art-mini-droging");let S=I.pageX-m,H=I.pageY-g;(0,n.setStyle)(T,"transform",`translate(${S}px, ${H}px)`)}}),i.on("document:mouseup",()=>{if(h){h=!1,(0,n.removeClass)(T,"art-mini-droging");let I=(0,n.getRect)(T);d.set("left",I.left),d.set("top",I.top),(0,n.setStyle)(T,"left",`${I.left}px`),(0,n.setStyle)(T,"top",`${I.top}px`),(0,n.setStyle)(T,"transform",null)}}),T}}(),M=d.get("top"),x=d.get("left");M&&x?((0,n.setStyle)(k,"top",`${M}px`),(0,n.setStyle)(k,"left",`${x}px`),(0,n.isInViewport)(k)||v()):v(),i.emit("mini",!0)}else b()}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1SuFS":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{template:{$poster:s}}=i;(0,n.def)(i,"poster",{get:()=>{try{return s.style.backgroundImage.match(/"(.*)"/)[1]}catch{return""}},set(l){(0,n.setStyle)(s,"backgroundImage",`url(${l})`)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8x4te":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{template:{$container:s,$video:l}}=i;(0,n.def)(i,"autoHeight",{value(){let{clientWidth:d}=s,{videoHeight:f,videoWidth:p}=l,h=d/p*f;(0,n.setStyle)(s,"height",h+"px"),i.emit("autoHeight",h)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1CaTA":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{$player:s}=i.template;(0,n.def)(i,"cssVar",{value:(l,d)=>d?s.style.setProperty(l,d):getComputedStyle(s).getPropertyValue(l)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2FqhO":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){(0,n.def)(i,"theme",{get:()=>i.cssVar("--art-theme"),set(s){i.cssVar("--art-theme",s)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1fQQs":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){(0,n.def)(i,"type",{get:()=>i.option.type,set(s){i.option.type=s}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],iBOQW:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let s=["mini","pip","fullscreen","fullscreenWeb"];(0,n.def)(i,"state",{get:()=>s.find(l=>i[l])||"standard",set(l){for(let d=0;d<s.length;d++){let f=s[d];f!==l&&i[f]&&(i[f]=!1)}}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6vlBV":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{notice:s,i18n:l,template:d}=i;(0,n.def)(i,"subtitleOffset",{get:()=>{var f;return((f=d.$track)==null?void 0:f.offset)||0},set(f){let{cues:p}=i.subtitle;if(!d.$track||p.length===0)return;let h=(0,n.clamp)(f,-10,10);d.$track.offset=h;for(let m=0;m<p.length;m++){let g=p[m];g.originalStartTime=g.originalStartTime??g.startTime,g.originalEndTime=g.originalEndTime??g.endTime,g.startTime=(0,n.clamp)(g.originalStartTime+h,0,i.duration),g.endTime=(0,n.clamp)(g.originalEndTime+h,0,i.duration)}i.subtitle.update(),s.show=`${l.get("Subtitle Offset")}: ${f}s`,i.emit("subtitleOffset",f)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eftqT:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{i18n:s,notice:l,proxy:d,template:{$video:f}}=i,p=!0;window.WebKitPlaybackTargetAvailabilityEvent&&f.webkitShowPlaybackTargetPicker?d(f,"webkitplaybacktargetavailabilitychanged",h=>{switch(h.availability){case"available":p=!0;break;case"not-available":p=!1}}):p=!1,(0,n.def)(i,"airplay",{value(){p?(f.webkitShowPlaybackTargetPicker(),i.emit("airplay")):l.show=s.get("AirPlay Not Available")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5SdyX":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){(0,n.def)(i,"quality",{set(s){let{controls:l,notice:d,i18n:f}=i,p=s.find(h=>h.default)||s[0];l.update({name:"quality",position:"right",index:10,style:{marginRight:"10px"},html:(p==null?void 0:p.html)||"",selector:s,onSelect:async h=>(await i.switchQuality(h.url),d.show=`${f.get("Switch Video")}: ${h.html}`,h.html)})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4HcqV":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{events:s,option:l,template:{$progress:d,$video:f}}=i,p=null,h=null,m=!1,g=!1,b=!1;s.hover(d,()=>{b=!0},()=>{b=!1}),i.on("setBar",async(w,v,y)=>{var T;let k=(T=i.controls)==null?void 0:T.thumbnails,{url:M,scale:x}=l.thumbnails;if(!k||!M)return;let E=w==="played"&&y&&n.isMobile;if(w==="hover"||E){if(m||(m=!0,h=await(0,n.loadImg)(M,x),g=!0),!g||!b)return;let $=d.clientWidth*v;(0,n.setStyle)(k,"display","flex"),$>0&&$<d.clientWidth?function(P){var O;let L=(O=i.controls)==null?void 0:O.thumbnails;if(!L)return;let{number:j,column:I,width:S,height:H,scale:C}=l.thumbnails,_=S*C||h.naturalWidth/I,D=H*C||_/(f.videoWidth/f.videoHeight),B=Math.floor(P/(d.clientWidth/j)),N=Math.ceil(B/I)-1;(0,n.setStyle)(L,"backgroundImage",`url(${h.src})`),(0,n.setStyle)(L,"height",`${D}px`),(0,n.setStyle)(L,"width",`${_}px`),(0,n.setStyle)(L,"backgroundPosition",`-${(B%I||I-1)*_}px -${N*D}px`),P<=_/2?(0,n.setStyle)(L,"left",0):P>d.clientWidth-_/2?(0,n.setStyle)(L,"left",`${d.clientWidth-_}px`):(0,n.setStyle)(L,"left",`${P-_/2}px`)}($):n.isMobile||(0,n.setStyle)(k,"display","none"),E&&(clearTimeout(p),p=setTimeout(()=>{(0,n.setStyle)(k,"display","none")},500))}}),(0,n.def)(i,"thumbnails",{get:()=>i.option.thumbnails,set(w){w.url&&!i.option.isLive&&(i.option.thumbnails=w,clearTimeout(p),p=null,h=null,m=!1,g=!1)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fCWZK:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{option:s,storage:l,template:{$video:d,$poster:f}}=i;for(let h in s.moreVideoAttr)i.attr(h,s.moreVideoAttr[h]);s.muted&&(i.muted=s.muted),s.volume&&(d.volume=(0,n.clamp)(s.volume,0,1));let p=l.get("volume");for(let h in typeof p=="number"&&(d.volume=(0,n.clamp)(p,0,1)),s.poster&&(0,n.setStyle)(f,"backgroundImage",`url(${s.poster})`),s.autoplay&&(d.autoplay=s.autoplay),s.playsInline&&(d.playsInline=!0,d["webkit-playsinline"]=!0),s.theme&&(s.cssVar["--art-theme"]=s.theme),s.cssVar)i.cssVar(h,s.cssVar[h]);i.url=s.url}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],f8Lv3:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>s);var n=t("../config"),c=e.interopDefault(n),i=t("../utils");function s(l){let{i18n:d,notice:f,option:p,constructor:h,proxy:m,template:{$player:g,$video:b,$poster:w}}=l,v=0;for(let y=0;y<c.default.events.length;y++)m(b,c.default.events[y],k=>{l.emit(`video:${k.type}`,k)});l.on("video:canplay",()=>{v=0,l.loading.show=!1}),l.once("video:canplay",()=>{l.loading.show=!1,l.controls.show=!0,l.mask.show=!0,l.isReady=!0,l.emit("ready")}),l.on("video:ended",()=>{p.loop?(l.seek=0,l.play(),l.controls.show=!1,l.mask.show=!1):(l.controls.show=!0,l.mask.show=!0)}),l.on("video:error",async y=>{v<h.RECONNECT_TIME_MAX?(await(0,i.sleep)(h.RECONNECT_SLEEP_TIME),v+=1,l.url=p.url,f.show=`${d.get("Reconnect")}: ${v}`,l.emit("error",y,v)):(l.mask.show=!0,l.loading.show=!1,l.controls.show=!0,(0,i.addClass)(g,"art-error"),await(0,i.sleep)(h.RECONNECT_SLEEP_TIME),f.show=d.get("Video Load Failed"))}),l.on("video:loadedmetadata",()=>{l.emit("resize"),i.isMobile&&(l.loading.show=!1,l.controls.show=!0,l.mask.show=!0)}),l.on("video:loadstart",()=>{l.loading.show=!0,l.mask.show=!1,l.controls.show=!0}),l.on("video:pause",()=>{l.controls.show=!0,l.mask.show=!0}),l.on("video:play",()=>{l.mask.show=!1,(0,i.setStyle)(w,"display","none")}),l.on("video:playing",()=>{l.mask.show=!1}),l.on("video:progress",()=>{l.playing&&(l.loading.show=!1)}),l.on("video:seeked",()=>{l.loading.show=!1,l.mask.show=!0}),l.on("video:seeking",()=>{l.loading.show=!0,l.mask.show=!1}),l.on("video:timeupdate",()=>{l.mask.show=!1}),l.on("video:waiting",()=>{l.loading.show=!0,l.mask.show=!1})}},{"../config":"lyjeQ","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8Z0Uf":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("../utils/component"),c=e.interopDefault(n),i=t("./fullscreen"),s=e.interopDefault(i),l=t("./fullscreenWeb"),d=e.interopDefault(l),f=t("./pip"),p=e.interopDefault(f),h=t("./playAndPause"),m=e.interopDefault(h),g=t("./progress"),b=e.interopDefault(g),w=t("./time"),v=e.interopDefault(w),y=t("./volume"),k=e.interopDefault(y),M=t("./setting"),x=e.interopDefault(M),E=t("./screenshot"),T=e.interopDefault(E),$=t("./airplay"),P=e.interopDefault($),L=t("../utils");class j extends c.default{constructor(S){super(S),this.isHover=!1,this.name="control",this.timer=Date.now();let{constructor:H}=S,{$player:C,$bottom:_}=this.art.template;S.on("mousemove",()=>{L.isMobile||(this.show=!0)}),S.on("click",()=>{L.isMobile?this.toggle():this.show=!0}),S.on("document:mousemove",D=>{this.isHover=(0,L.includeFromEvent)(D,_)}),S.on("video:timeupdate",()=>{!S.setting.show&&!this.isHover&&!S.isInput&&S.playing&&this.show&&Date.now()-this.timer>=H.CONTROL_HIDE_TIME&&(this.show=!1)}),S.on("control",D=>{D?((0,L.removeClass)(C,"art-hide-cursor"),(0,L.addClass)(C,"art-hover"),this.timer=Date.now()):((0,L.addClass)(C,"art-hide-cursor"),(0,L.removeClass)(C,"art-hover"))}),this.init()}init(){let{option:S}=this.art;S.isLive||this.add((0,b.default)({name:"progress",position:"top",index:10})),this.add({name:"thumbnails",position:"top",index:20}),this.add((0,m.default)({name:"playAndPause",position:"left",index:10})),this.add((0,k.default)({name:"volume",position:"left",index:20})),S.isLive||this.add((0,v.default)({name:"time",position:"left",index:30})),S.quality.length&&(0,L.sleep)().then(()=>{this.art.quality=S.quality}),S.screenshot&&!L.isMobile&&this.add((0,T.default)({name:"screenshot",position:"right",index:20})),S.setting&&this.add((0,x.default)({name:"setting",position:"right",index:30})),S.pip&&this.add((0,p.default)({name:"pip",position:"right",index:40})),S.airplay&&window.WebKitPlaybackTargetAvailabilityEvent&&this.add((0,P.default)({name:"airplay",position:"right",index:50})),S.fullscreenWeb&&this.add((0,d.default)({name:"fullscreenWeb",position:"right",index:60})),S.fullscreen&&this.add((0,s.default)({name:"fullscreen",position:"right",index:70}));for(let H=0;H<S.controls.length;H++)this.add(S.controls[H])}add(S){let H=typeof S=="function"?S(this.art):S,{$progress:C,$controlsLeft:_,$controlsRight:D}=this.art.template;switch(H.position){case"top":this.$parent=C;break;case"left":this.$parent=_;break;case"right":this.$parent=D;break;default:(0,L.errorHandle)(!1,"Control option.position must one of 'top', 'left', 'right'")}super.add(H)}check(S){S.$control_value.innerHTML=S.html;for(let H=0;H<S.$control_option.length;H++){let C=S.$control_option[H];C.default=C===S,C.default&&(0,L.inverseClass)(C.$control_item,"art-current")}}selector(S,H,C){let{proxy:_}=this.art.events;(0,L.addClass)(H,"art-control-selector");let D=(0,L.createElement)("div");(0,L.addClass)(D,"art-selector-value"),(0,L.append)(D,S.html),H.innerText="",(0,L.append)(H,D);let B=(0,L.createElement)("div");(0,L.addClass)(B,"art-selector-list"),(0,L.append)(H,B);for(let O=0;O<S.selector.length;O++){let X=S.selector[O],Z=(0,L.createElement)("div");(0,L.addClass)(Z,"art-selector-item"),X.default&&(0,L.addClass)(Z,"art-current"),Z.dataset.index=O,Z.dataset.value=X.value,Z.innerHTML=X.html,(0,L.append)(B,Z),(0,L.def)(X,"$control_option",{get:()=>S.selector}),(0,L.def)(X,"$control_item",{get:()=>Z}),(0,L.def)(X,"$control_value",{get:()=>D})}let N=_(B,"click",async O=>{let X=O.composedPath()||[],Z=S.selector.find(ct=>ct.$control_item===X.find(vt=>ct.$control_item===vt));this.check(Z),S.onSelect&&(D.innerHTML=await S.onSelect.call(this.art,Z,Z.$control_item,O))});C.push(N)}}r.default=j},{"../utils/component":"18nVI","./fullscreen":"c61Lj","./fullscreenWeb":"03jeB","./pip":"u8l8e","./playAndPause":"ebXtb","./progress":"bgoVP","./time":"ikc2j","./volume":"b8NFx","./setting":"03o9l","./screenshot":"4KCF5","./airplay":"4IS2d","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"18nVI":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./dom"),c=t("./error"),i=t("option-validator"),s=e.interopDefault(i),l=t("../scheme");r.default=class{constructor(d){this.id=0,this.art=d,this.cache=new Map,this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.update=this.update.bind(this)}get show(){return(0,n.hasClass)(this.art.template.$player,`art-${this.name}-show`)}set show(d){let{$player:f}=this.art.template,p=`art-${this.name}-show`;d?(0,n.addClass)(f,p):(0,n.removeClass)(f,p),this.art.emit(this.name,d)}toggle(){this.show=!this.show}add(d){let f=typeof d=="function"?d(this.art):d;if(f.html=f.html||"",(0,s.default)(f,l.ComponentOption),!this.$parent||!this.name||f.disable)return;let p=f.name||`${this.name}${this.id}`,h=this.cache.get(p);(0,c.errorHandle)(!h,`Can't add an existing [${p}] to the [${this.name}]`),this.id+=1;let m=(0,n.createElement)("div");(0,n.addClass)(m,`art-${this.name}`),(0,n.addClass)(m,`art-${this.name}-${p}`);let g=Array.from(this.$parent.children);m.dataset.index=f.index||this.id;let b=g.find(v=>Number(v.dataset.index)>=Number(m.dataset.index));b?b.insertAdjacentElement("beforebegin",m):(0,n.append)(this.$parent,m),f.html&&(0,n.append)(m,f.html),f.style&&(0,n.setStyles)(m,f.style),f.tooltip&&(0,n.tooltip)(m,f.tooltip);let w=[];if(f.click){let v=this.art.events.proxy(m,"click",y=>{y.preventDefault(),f.click.call(this.art,this,y)});w.push(v)}return f.selector&&["left","right"].includes(f.position)&&this.selector(f,m,w),this[p]=m,this.cache.set(p,{$ref:m,events:w,option:f}),f.mounted&&f.mounted.call(this.art,m),m}remove(d){let f=this.cache.get(d);(0,c.errorHandle)(f,`Can't find [${d}] from the [${this.name}]`),f.option.beforeUnmount&&f.option.beforeUnmount.call(this.art,f.$ref);for(let p=0;p<f.events.length;p++)this.art.events.remove(f.events[p]);this.cache.delete(d),delete this[d],(0,n.remove)(f.$ref)}update(d){let f=this.cache.get(d.name);return f&&(d=Object.assign(f.option,d),this.remove(d.name)),this.add(d)}}},{"./dom":"bSNiV","./error":"hwmZz","option-validator":"bAWi2","../scheme":"AKEiO","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],c61Lj:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return s=>({...i,tooltip:s.i18n.get("Fullscreen"),mounted:l=>{let{proxy:d,icons:f,i18n:p}=s,h=(0,n.append)(l,f.fullscreenOn),m=(0,n.append)(l,f.fullscreenOff);(0,n.setStyle)(m,"display","none"),d(l,"click",()=>{s.fullscreen=!s.fullscreen}),s.on("fullscreen",g=>{g?((0,n.tooltip)(l,p.get("Exit Fullscreen")),(0,n.setStyle)(h,"display","none"),(0,n.setStyle)(m,"display","inline-flex")):((0,n.tooltip)(l,p.get("Fullscreen")),(0,n.setStyle)(h,"display","inline-flex"),(0,n.setStyle)(m,"display","none"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"03jeB":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return s=>({...i,tooltip:s.i18n.get("Web Fullscreen"),mounted:l=>{let{proxy:d,icons:f,i18n:p}=s,h=(0,n.append)(l,f.fullscreenWebOn),m=(0,n.append)(l,f.fullscreenWebOff);(0,n.setStyle)(m,"display","none"),d(l,"click",()=>{s.fullscreenWeb=!s.fullscreenWeb}),s.on("fullscreenWeb",g=>{g?((0,n.tooltip)(l,p.get("Exit Web Fullscreen")),(0,n.setStyle)(h,"display","none"),(0,n.setStyle)(m,"display","inline-flex")):((0,n.tooltip)(l,p.get("Web Fullscreen")),(0,n.setStyle)(h,"display","inline-flex"),(0,n.setStyle)(m,"display","none"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],u8l8e:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return s=>({...i,tooltip:s.i18n.get("PIP Mode"),mounted:l=>{let{proxy:d,icons:f,i18n:p}=s;(0,n.append)(l,f.pip),d(l,"click",()=>{s.pip=!s.pip}),s.on("pip",h=>{(0,n.tooltip)(l,p.get(h?"Exit PIP Mode":"PIP Mode"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ebXtb:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return s=>({...i,mounted:l=>{let{proxy:d,icons:f,i18n:p}=s,h=(0,n.append)(l,f.play),m=(0,n.append)(l,f.pause);function g(){(0,n.setStyle)(h,"display","flex"),(0,n.setStyle)(m,"display","none")}function b(){(0,n.setStyle)(h,"display","none"),(0,n.setStyle)(m,"display","flex")}(0,n.tooltip)(h,p.get("Play")),(0,n.tooltip)(m,p.get("Pause")),d(h,"click",()=>{s.play()}),d(m,"click",()=>{s.pause()}),s.playing?b():g(),s.on("video:playing",()=>{b()}),s.on("video:pause",()=>{g()})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bgoVP:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"getPosFromEvent",()=>c),e.export(r,"setCurrentTime",()=>i),e.export(r,"default",()=>s);var n=t("../utils");function c(l,d){let{$progress:f}=l.template,{left:p}=(0,n.getRect)(f),h=n.isMobile?d.touches[0].clientX:d.clientX,m=(0,n.clamp)(h-p,0,f.clientWidth),g=m/f.clientWidth*l.duration,b=(0,n.secondToTime)(g),w=(0,n.clamp)(m/f.clientWidth,0,1);return{second:g,time:b,width:m,percentage:w}}function i(l,d){if(l.isRotate){let f=d.touches[0].clientY/l.height,p=f*l.duration;l.emit("setBar","played",f,d),l.seek=p}else{let{second:f,percentage:p}=c(l,d);l.emit("setBar","played",p,d),l.seek=f}}function s(l){return d=>{let{icons:f,option:p,proxy:h}=d;return{...l,html:'<div class="art-control-progress-inner"><div class="art-progress-hover"></div><div class="art-progress-loaded"></div><div class="art-progress-played"></div><div class="art-progress-highlight"></div><div class="art-progress-indicator"></div><div class="art-progress-tip"></div></div>',mounted:m=>{let g=null,b=!1,w=(0,n.query)(".art-progress-hover",m),v=(0,n.query)(".art-progress-loaded",m),y=(0,n.query)(".art-progress-played",m),k=(0,n.query)(".art-progress-highlight",m),M=(0,n.query)(".art-progress-indicator",m),x=(0,n.query)(".art-progress-tip",m);function E(T,$){let{width:P,time:L}=$||c(d,T);x.innerText=L;let j=x.clientWidth;P<=j/2?(0,n.setStyle)(x,"left",0):P>m.clientWidth-j/2?(0,n.setStyle)(x,"left",`${m.clientWidth-j}px`):(0,n.setStyle)(x,"left",`${P-j/2}px`)}f.indicator?(0,n.append)(M,f.indicator):(0,n.setStyle)(M,"backgroundColor","var(--art-theme)"),d.on("setBar",function(T,$,P){let L=T==="played"&&P&&n.isMobile;T==="loaded"&&(0,n.setStyle)(v,"width",`${100*$}%`),T==="hover"&&(0,n.setStyle)(w,"width",`${100*$}%`),T==="played"&&((0,n.setStyle)(y,"width",`${100*$}%`),(0,n.setStyle)(M,"left",`${100*$}%`)),L&&((0,n.setStyle)(x,"display","flex"),E(P,{width:m.clientWidth*$,time:(0,n.secondToTime)($*d.duration)}),clearTimeout(g),g=setTimeout(()=>{(0,n.setStyle)(x,"display","none")},500))}),d.on("video:loadedmetadata",function(){k.innerText="";for(let T=0;T<p.highlight.length;T++){let $=p.highlight[T],P=(0,n.clamp)($.time,0,d.duration)/d.duration*100,L=`<span data-text="${$.text}" data-time="${$.time}" style="left: ${P}%"></span>`;(0,n.append)(k,L)}}),d.on("video:progress",()=>{d.emit("setBar","loaded",d.loaded)}),d.constructor.USE_RAF?d.on("raf",()=>{d.emit("setBar","played",d.played)}):d.on("video:timeupdate",()=>{d.emit("setBar","played",d.played)}),d.on("video:ended",()=>{d.emit("setBar","played",1)}),d.emit("setBar","loaded",d.loaded||0),n.isMobile||(h(m,"click",T=>{T.target!==M&&i(d,T)}),h(m,"mousemove",T=>{let{percentage:$}=c(d,T);d.emit("setBar","hover",$,T),(0,n.setStyle)(x,"display","flex"),(0,n.includeFromEvent)(T,k)?function(P){let{width:L}=c(d,P),{text:j}=P.target.dataset;x.innerText=j;let I=x.clientWidth;L<=I/2?(0,n.setStyle)(x,"left",0):L>m.clientWidth-I/2?(0,n.setStyle)(x,"left",`${m.clientWidth-I}px`):(0,n.setStyle)(x,"left",`${L-I/2}px`)}(T):E(T)}),h(m,"mouseleave",T=>{(0,n.setStyle)(x,"display","none"),d.emit("setBar","hover",0,T)}),h(m,"mousedown",T=>{b=T.button===0}),d.on("document:mousemove",T=>{if(b){let{second:$,percentage:P}=c(d,T);d.emit("setBar","played",P,T),d.seek=$}}),d.on("document:mouseup",()=>{b&&(b=!1)}))}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ikc2j:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return s=>({...i,style:n.isMobile?{fontSize:"12px",padding:"0 5px"}:{cursor:"auto",padding:"0 10px"},mounted:l=>{function d(){let p=`${(0,n.secondToTime)(s.currentTime)} / ${(0,n.secondToTime)(s.duration)}`;p!==l.innerText&&(l.innerText=p)}d();let f=["video:loadedmetadata","video:timeupdate","video:progress"];for(let p=0;p<f.length;p++)s.on(f[p],d)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],b8NFx:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return s=>({...i,mounted:l=>{let{proxy:d,icons:f}=s,p=(0,n.append)(l,f.volume),h=(0,n.append)(l,f.volumeClose),m=(0,n.append)(l,'<div class="art-volume-panel"></div>'),g=(0,n.append)(m,'<div class="art-volume-inner"></div>'),b=(0,n.append)(g,'<div class="art-volume-val"></div>'),w=(0,n.append)(g,'<div class="art-volume-slider"></div>'),v=(0,n.append)(w,'<div class="art-volume-handle"></div>'),y=(0,n.append)(v,'<div class="art-volume-loaded"></div>'),k=(0,n.append)(w,'<div class="art-volume-indicator"></div>');function M(E){let{top:T,height:$}=(0,n.getRect)(w);return 1-(E.clientY-T)/$}function x(){if(s.muted||s.volume===0)(0,n.setStyle)(p,"display","none"),(0,n.setStyle)(h,"display","flex"),(0,n.setStyle)(k,"top","100%"),(0,n.setStyle)(y,"top","100%"),b.innerText=0;else{let E=100*s.volume;(0,n.setStyle)(p,"display","flex"),(0,n.setStyle)(h,"display","none"),(0,n.setStyle)(k,"top",`${100-E}%`),(0,n.setStyle)(y,"top",`${100-E}%`),b.innerText=Math.floor(E)}}if(x(),s.on("video:volumechange",x),d(p,"click",()=>{s.muted=!0}),d(h,"click",()=>{s.muted=!1}),n.isMobile)(0,n.setStyle)(m,"display","none");else{let E=!1;d(w,"mousedown",T=>{E=T.button===0,s.volume=M(T)}),s.on("document:mousemove",T=>{E&&(s.muted=!1,s.volume=M(T))}),s.on("document:mouseup",()=>{E&&(E=!1)})}}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"03o9l":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return s=>({...i,tooltip:s.i18n.get("Show Setting"),mounted:l=>{let{proxy:d,icons:f,i18n:p}=s;(0,n.append)(l,f.setting),d(l,"click",()=>{s.setting.toggle(),s.setting.resize()}),s.on("setting",h=>{(0,n.tooltip)(l,p.get(h?"Hide Setting":"Show Setting"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4KCF5":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return s=>({...i,tooltip:s.i18n.get("Screenshot"),mounted:l=>{let{proxy:d,icons:f}=s;(0,n.append)(l,f.screenshot),d(l,"click",()=>{s.screenshot()})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4IS2d":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return s=>({...i,tooltip:s.i18n.get("AirPlay"),mounted:l=>{let{proxy:d,icons:f}=s;(0,n.append)(l,f.airplay),d(l,"click",()=>s.airplay())}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2KYsr":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("../utils"),c=t("../utils/component"),i=e.interopDefault(c),s=t("./playbackRate"),l=e.interopDefault(s),d=t("./aspectRatio"),f=e.interopDefault(d),p=t("./flip"),h=e.interopDefault(p),m=t("./info"),g=e.interopDefault(m),b=t("./version"),w=e.interopDefault(b),v=t("./close"),y=e.interopDefault(v);class k extends i.default{constructor(x){super(x),this.name="contextmenu",this.$parent=x.template.$contextmenu,n.isMobile||this.init()}init(){let{option:x,proxy:E,template:{$player:T,$contextmenu:$}}=this.art;x.playbackRate&&this.add((0,l.default)({name:"playbackRate",index:10})),x.aspectRatio&&this.add((0,f.default)({name:"aspectRatio",index:20})),x.flip&&this.add((0,h.default)({name:"flip",index:30})),this.add((0,g.default)({name:"info",index:40})),this.add((0,w.default)({name:"version",index:50})),this.add((0,y.default)({name:"close",index:60}));for(let P=0;P<x.contextmenu.length;P++)this.add(x.contextmenu[P]);E(T,"contextmenu",P=>{if(!this.art.constructor.CONTEXTMENU)return;P.preventDefault(),this.show=!0;let L=P.clientX,j=P.clientY,{height:I,width:S,left:H,top:C}=(0,n.getRect)(T),{height:_,width:D}=(0,n.getRect)($),B=L-H,N=j-C;L+D>H+S&&(B=S-D),j+_>C+I&&(N=I-_),(0,n.setStyles)($,{top:`${N}px`,left:`${B}px`})}),E(T,"click",P=>{(0,n.includeFromEvent)(P,$)||(this.show=!1)}),this.art.on("blur",()=>{this.show=!1})}}r.default=k},{"../utils":"71aH7","../utils/component":"18nVI","./playbackRate":"69eLi","./aspectRatio":"lUefg","./flip":"kysiM","./info":"gqIgJ","./version":"kRU7C","./close":"jQ8Pm","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"69eLi":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return s=>{let{i18n:l,constructor:{PLAYBACK_RATE:d}}=s,f=d.map(p=>`<span data-value="${p}">${p===1?l.get("Normal"):p.toFixed(1)}</span>`).join("");return{...i,html:`${l.get("Play Speed")}: ${f}`,click:(p,h)=>{let{value:m}=h.target.dataset;m&&(s.playbackRate=Number(m),p.show=!1)},mounted:p=>{let h=(0,n.query)('[data-value="1"]',p);h&&(0,n.inverseClass)(h,"art-current"),s.on("video:ratechange",()=>{let m=(0,n.queryAll)("span",p).find(g=>Number(g.dataset.value)===s.playbackRate);m&&(0,n.inverseClass)(m,"art-current")})}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],lUefg:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return s=>{let{i18n:l,constructor:{ASPECT_RATIO:d}}=s,f=d.map(p=>`<span data-value="${p}">${p==="default"?l.get("Default"):p}</span>`).join("");return{...i,html:`${l.get("Aspect Ratio")}: ${f}`,click:(p,h)=>{let{value:m}=h.target.dataset;m&&(s.aspectRatio=m,p.show=!1)},mounted:p=>{let h=(0,n.query)('[data-value="default"]',p);h&&(0,n.inverseClass)(h,"art-current"),s.on("aspectRatio",m=>{let g=(0,n.queryAll)("span",p).find(b=>b.dataset.value===m);g&&(0,n.inverseClass)(g,"art-current")})}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kysiM:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return s=>{let{i18n:l,constructor:{FLIP:d}}=s,f=d.map(p=>`<span data-value="${p}">${l.get((0,n.capitalize)(p))}</span>`).join("");return{...i,html:`${l.get("Video Flip")}: ${f}`,click:(p,h)=>{let{value:m}=h.target.dataset;m&&(s.flip=m.toLowerCase(),p.show=!1)},mounted:p=>{let h=(0,n.query)('[data-value="normal"]',p);h&&(0,n.inverseClass)(h,"art-current"),s.on("flip",m=>{let g=(0,n.queryAll)("span",p).find(b=>b.dataset.value===m);g&&(0,n.inverseClass)(g,"art-current")})}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gqIgJ:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c){return i=>({...c,html:i.i18n.get("Video Info"),click:s=>{i.info.show=!0,s.show=!1}})}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kRU7C:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c){return{...c,html:'<a href="https://artplayer.org" target="_blank">ArtPlayer 5.2.1</a>'}}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jQ8Pm:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c){return i=>({...c,html:i.i18n.get("Close"),click:s=>{s.show=!1}})}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"02ajl":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./utils"),c=t("./utils/component"),i=e.interopDefault(c);class s extends i.default{constructor(d){super(d),this.name="info",n.isMobile||this.init()}init(){let{proxy:d,constructor:f,template:{$infoPanel:p,$infoClose:h,$video:m}}=this.art;d(h,"click",()=>{this.show=!1});let g=null,b=(0,n.queryAll)("[data-video]",p)||[];this.art.on("destroy",()=>clearTimeout(g)),function w(){for(let v=0;v<b.length;v++){let y=b[v],k=m[y.dataset.video],M=typeof k=="number"?k.toFixed(2):k;y.innerText!==M&&(y.innerText=M)}g=setTimeout(w,f.INFO_LOOP_TIME)}()}}r.default=s},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eSWto:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./utils"),c=t("./utils/component"),i=e.interopDefault(c),s=t("option-validator"),l=e.interopDefault(s),d=t("./scheme"),f=e.interopDefault(d);class p extends i.default{constructor(m){super(m),this.name="subtitle",this.option=null,this.destroyEvent=()=>null,this.init(m.option.subtitle);let g=!1;m.on("video:timeupdate",()=>{if(!this.url)return;let b=this.art.template.$video.webkitDisplayingFullscreen;typeof b=="boolean"&&b!==g&&(g=b,this.createTrack(b?"subtitles":"metadata",this.url))})}get url(){return this.art.template.$track.src}set url(m){this.switch(m)}get textTrack(){var m,g;return(g=(m=this.art.template.$video)==null?void 0:m.textTracks)==null?void 0:g[0]}get activeCues(){return this.textTrack?Array.from(this.textTrack.activeCues):[]}get cues(){return this.textTrack?Array.from(this.textTrack.cues):[]}style(m,g){let{$subtitle:b}=this.art.template;return typeof m=="object"?(0,n.setStyles)(b,m):(0,n.setStyle)(b,m,g)}update(){let{option:{subtitle:m},template:{$subtitle:g}}=this.art;g.innerHTML="",this.activeCues.length&&(this.art.emit("subtitleBeforeUpdate",this.activeCues),g.innerHTML=this.activeCues.map((b,w)=>b.text.split(/\r?\n/).filter(v=>v.trim()).map(v=>`<div class="art-subtitle-line" data-group="${w}">${m.escape?(0,n.escape)(v):v}</div>`).join("")).join(""),this.art.emit("subtitleAfterUpdate",this.activeCues))}async switch(m,g={}){let{i18n:b,notice:w,option:v}=this.art,y={...v.subtitle,...g,url:m},k=await this.init(y);return g.name&&(w.show=`${b.get("Switch Subtitle")}: ${g.name}`),k}createTrack(m,g){let{template:b,proxy:w,option:v}=this.art,{$video:y,$track:k}=b,M=(0,n.createElement)("track");M.default=!0,M.kind=m,M.src=g,M.label=v.subtitle.name||"Artplayer",M.track.mode="hidden",M.onload=()=>{this.art.emit("subtitleLoad",this.cues,this.option)},this.art.events.remove(this.destroyEvent),k.onload=null,(0,n.remove)(k),(0,n.append)(y,M),b.$track=M,this.destroyEvent=w(this.textTrack,"cuechange",()=>this.update())}async init(m){let{notice:g,template:{$subtitle:b}}=this.art;return this.textTrack?((0,l.default)(m,f.default.subtitle),m.url?(this.option=m,this.style(m.style),fetch(m.url).then(w=>w.arrayBuffer()).then(w=>{let v=new TextDecoder(m.encoding).decode(w);switch(m.type||(0,n.getExt)(m.url)){case"srt":{let y=(0,n.srtToVtt)(v),k=m.onVttLoad(y);return(0,n.vttToBlob)(k)}case"ass":{let y=(0,n.assToVtt)(v),k=m.onVttLoad(y);return(0,n.vttToBlob)(k)}case"vtt":{let y=m.onVttLoad(v);return(0,n.vttToBlob)(y)}default:return m.url}}).then(w=>(b.innerHTML="",this.url===w||(URL.revokeObjectURL(this.url),this.createTrack("metadata",w)),w)).catch(w=>{throw b.innerHTML="",g.show=w,w})):void 0):null}}r.default=p},{"./utils":"71aH7","./utils/component":"18nVI","option-validator":"bAWi2","./scheme":"AKEiO","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jo4S1:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./clickInit"),c=e.interopDefault(n),i=t("./hoverInit"),s=e.interopDefault(i),l=t("./moveInit"),d=e.interopDefault(l),f=t("./resizeInit"),p=e.interopDefault(f),h=t("./gestureInit"),m=e.interopDefault(h),g=t("./viewInit"),b=e.interopDefault(g),w=t("./documentInit"),v=e.interopDefault(w),y=t("./updateInit"),k=e.interopDefault(y),M=t("./restoreInit"),x=e.interopDefault(M);r.default=class{constructor(E){this.destroyEvents=[],this.proxy=this.proxy.bind(this),this.hover=this.hover.bind(this),(0,c.default)(E,this),(0,s.default)(E,this),(0,d.default)(E,this),(0,p.default)(E,this),(0,m.default)(E,this),(0,b.default)(E,this),(0,v.default)(E,this),(0,k.default)(E,this),(0,x.default)(E,this)}proxy(E,T,$,P={}){if(Array.isArray(T))return T.map(j=>this.proxy(E,j,$,P));E.addEventListener(T,$,P);let L=()=>E.removeEventListener(T,$,P);return this.destroyEvents.push(L),L}hover(E,T,$){T&&this.proxy(E,"mouseenter",T),$&&this.proxy(E,"mouseleave",$)}remove(E){let T=this.destroyEvents.indexOf(E);T>-1&&(E(),this.destroyEvents.splice(T,1))}destroy(){for(let E=0;E<this.destroyEvents.length;E++)this.destroyEvents[E]()}}},{"./clickInit":"6UrCm","./hoverInit":"4jWHi","./moveInit":"eqaUm","./resizeInit":"eDXPO","./gestureInit":"95GtS","./viewInit":"InUBx","./documentInit":"hoLfM","./updateInit":"cl8m3","./restoreInit":"bK8As","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6UrCm":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i,s){let{constructor:l,template:{$player:d,$video:f}}=i;s.proxy(document,["click","contextmenu"],h=>{(0,n.includeFromEvent)(h,d)?(i.isInput=h.target.tagName==="INPUT",i.isFocus=!0,i.emit("focus",h)):(i.isInput=!1,i.isFocus=!1,i.emit("blur",h))});let p=[];s.proxy(f,"click",h=>{let m=Date.now();p.push(m);let{MOBILE_CLICK_PLAY:g,DBCLICK_TIME:b,MOBILE_DBCLICK_PLAY:w,DBCLICK_FULLSCREEN:v}=l,y=p.filter(k=>m-k<=b);switch(y.length){case 1:i.emit("click",h),n.isMobile?!i.isLock&&g&&i.toggle():i.toggle(),p=y;break;case 2:i.emit("dblclick",h),n.isMobile?!i.isLock&&w&&i.toggle():v&&(i.fullscreen=!i.fullscreen),p=[];break;default:p=[]}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4jWHi":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i,s){let{$player:l}=i.template;s.hover(l,d=>{(0,n.addClass)(l,"art-hover"),i.emit("hover",!0,d)},d=>{(0,n.removeClass)(l,"art-hover"),i.emit("hover",!1,d)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eqaUm:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c,i){let{$player:s}=c.template;i.proxy(s,"mousemove",l=>{c.emit("mousemove",l)})}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eDXPO:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i,s){let{option:l,constructor:d}=i;i.on("resize",()=>{let{aspectRatio:p,notice:h}=i;i.state==="standard"&&l.autoSize&&i.autoSize(),i.aspectRatio=p,h.show=""});let f=(0,n.debounce)(()=>i.emit("resize"),d.RESIZE_TIME);s.proxy(window,["orientationchange","resize"],()=>f()),screen&&screen.orientation&&screen.orientation.onchange&&s.proxy(screen.orientation,"change",()=>f())}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"95GtS":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>i);var n=t("../utils"),c=t("../control/progress");function i(s,l){if(n.isMobile&&!s.option.isLive){let{$video:d,$progress:f}=s.template,p=null,h=!1,m=0,g=0,b=0,w=y=>{if(y.touches.length===1&&!s.isLock){p===f&&(0,c.setCurrentTime)(s,y),h=!0;let{pageX:k,pageY:M}=y.touches[0];m=k,g=M,b=s.currentTime}},v=y=>{if(y.touches.length===1&&h&&s.duration){let{pageX:k,pageY:M}=y.touches[0],x=function($,P,L,j){var I=P-j,S=L-$,H=0;if(2>Math.abs(S)&&2>Math.abs(I))return H;var C=180*Math.atan2(I,S)/Math.PI;return C>=-45&&C<45?H=4:C>=45&&C<135?H=1:C>=-135&&C<-45?H=2:(C>=135&&C<=180||C>=-180&&C<-135)&&(H=3),H}(m,g,k,M),E=[3,4].includes(x),T=[1,2].includes(x);if(E&&!s.isRotate||T&&s.isRotate){let $=(0,n.clamp)((k-m)/s.width,-1,1),P=(0,n.clamp)((M-g)/s.height,-1,1),L=s.isRotate?P:$,j=p===d?s.constructor.TOUCH_MOVE_RATIO:1,I=(0,n.clamp)(b+s.duration*L*j,0,s.duration);s.seek=I,s.emit("setBar","played",(0,n.clamp)(I/s.duration,0,1),y),s.notice.show=`${(0,n.secondToTime)(I)} / ${(0,n.secondToTime)(s.duration)}`}}};l.proxy(f,"touchstart",y=>{p=f,w(y)}),l.proxy(d,"touchstart",y=>{p=d,w(y)}),l.proxy(d,"touchmove",v),l.proxy(f,"touchmove",v),l.proxy(document,"touchend",()=>{h&&(m=0,g=0,b=0,h=!1,p=null)})}}},{"../utils":"71aH7","../control/progress":"bgoVP","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],InUBx:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i,s){let{option:l,constructor:d,template:{$container:f}}=i,p=(0,n.throttle)(()=>{i.emit("view",(0,n.isInViewport)(f,d.SCROLL_GAP))},d.SCROLL_TIME);s.proxy(window,"scroll",()=>p()),i.on("view",h=>{l.autoMini&&(i.mini=!h)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hoLfM:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c,i){i.proxy(document,"mousemove",s=>{c.emit("document:mousemove",s)}),i.proxy(document,"mouseup",s=>{c.emit("document:mouseup",s)})}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cl8m3:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c){if(c.constructor.USE_RAF){let i=null;(function s(){c.playing&&c.emit("raf"),c.isDestroy||(i=requestAnimationFrame(s))})(),c.on("destroy",()=>{cancelAnimationFrame(i)})}}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bK8As:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c,i){}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6NoFy":[function(t,o,r){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var e=t("./utils");r.default=class{constructor(n){this.art=n,this.keys={},n.option.hotkey&&!e.isMobile&&this.init()}init(){let{proxy:n,constructor:c}=this.art;this.add("Escape",()=>{this.art.fullscreenWeb&&(this.art.fullscreenWeb=!1)}),this.add("Space",()=>{this.art.toggle()}),this.add("ArrowLeft",()=>{this.art.backward=c.SEEK_STEP}),this.add("ArrowUp",()=>{this.art.volume+=c.VOLUME_STEP}),this.add("ArrowRight",()=>{this.art.forward=c.SEEK_STEP}),this.add("ArrowDown",()=>{this.art.volume-=c.VOLUME_STEP}),n(document,"keydown",i=>{if(this.art.isFocus){let s=document.activeElement.tagName.toUpperCase(),l=document.activeElement.getAttribute("contenteditable");if(s!=="INPUT"&&s!=="TEXTAREA"&&l!==""&&l!=="true"&&!i.altKey&&!i.ctrlKey&&!i.metaKey&&!i.shiftKey){let d=this.keys[i.code];if(d){i.preventDefault();for(let f=0;f<d.length;f++)d[f].call(this.art,i);this.art.emit("hotkey",i)}}}this.art.emit("keydown",i)})}add(n,c){return this.keys[n]?this.keys[n].push(c):this.keys[n]=[c],this}remove(n,c){if(this.keys[n]){let i=this.keys[n].indexOf(c);i!==-1&&this.keys[n].splice(i,1)}return this}}},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6G6hZ":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./utils/component"),c=e.interopDefault(n);class i extends c.default{constructor(l){super(l);let{option:d,template:{$layer:f}}=l;this.name="layer",this.$parent=f;for(let p=0;p<d.layers.length;p++)this.add(d.layers[p])}}r.default=i},{"./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3dsEe":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./utils"),c=t("./utils/component"),i=e.interopDefault(c);class s extends i.default{constructor(d){super(d),this.name="loading",(0,n.append)(d.template.$loading,d.icons.loading)}}r.default=s},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],dWGTw:[function(t,o,r){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var e=t("./utils");r.default=class{constructor(n){this.art=n,this.timer=null}set show(n){let{constructor:c,template:{$player:i,$noticeInner:s}}=this.art;n?(s.innerText=n instanceof Error?n.message.trim():n,(0,e.addClass)(i,"art-notice-show"),clearTimeout(this.timer),this.timer=setTimeout(()=>{s.innerText="",(0,e.removeClass)(i,"art-notice-show")},c.NOTICE_TIME)):(0,e.removeClass)(i,"art-notice-show")}}},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5POkG":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./utils"),c=t("./utils/component"),i=e.interopDefault(c);class s extends i.default{constructor(d){super(d),this.name="mask";let{template:f,icons:p,events:h}=d,m=(0,n.append)(f.$state,p.state),g=(0,n.append)(f.$state,p.error);(0,n.setStyle)(g,"display","none"),d.on("destroy",()=>{(0,n.setStyle)(m,"display","none"),(0,n.setStyle)(g,"display",null)}),h.proxy(f.$state,"click",()=>d.play())}}r.default=s},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6OeNg":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("../utils"),c=t("bundle-text:./loading.svg"),i=e.interopDefault(c),s=t("bundle-text:./state.svg"),l=e.interopDefault(s),d=t("bundle-text:./check.svg"),f=e.interopDefault(d),p=t("bundle-text:./play.svg"),h=e.interopDefault(p),m=t("bundle-text:./pause.svg"),g=e.interopDefault(m),b=t("bundle-text:./volume.svg"),w=e.interopDefault(b),v=t("bundle-text:./volume-close.svg"),y=e.interopDefault(v),k=t("bundle-text:./screenshot.svg"),M=e.interopDefault(k),x=t("bundle-text:./setting.svg"),E=e.interopDefault(x),T=t("bundle-text:./arrow-left.svg"),$=e.interopDefault(T),P=t("bundle-text:./arrow-right.svg"),L=e.interopDefault(P),j=t("bundle-text:./playback-rate.svg"),I=e.interopDefault(j),S=t("bundle-text:./aspect-ratio.svg"),H=e.interopDefault(S),C=t("bundle-text:./config.svg"),_=e.interopDefault(C),D=t("bundle-text:./pip.svg"),B=e.interopDefault(D),N=t("bundle-text:./lock.svg"),O=e.interopDefault(N),X=t("bundle-text:./unlock.svg"),Z=e.interopDefault(X),ct=t("bundle-text:./fullscreen-off.svg"),vt=e.interopDefault(ct),St=t("bundle-text:./fullscreen-on.svg"),Ft=e.interopDefault(St),At=t("bundle-text:./fullscreen-web-off.svg"),Dt=e.interopDefault(At),$t=t("bundle-text:./fullscreen-web-on.svg"),Pt=e.interopDefault($t),Lt=t("bundle-text:./switch-on.svg"),Bt=e.interopDefault(Lt),Rt=t("bundle-text:./switch-off.svg"),ut=e.interopDefault(Rt),z=t("bundle-text:./flip.svg"),fe=e.interopDefault(z),at=t("bundle-text:./error.svg"),bt=e.interopDefault(at),wt=t("bundle-text:./close.svg"),dt=e.interopDefault(wt),st=t("bundle-text:./airplay.svg"),Ht=e.interopDefault(st);r.default=class{constructor(pe){let Zt={loading:i.default,state:l.default,play:h.default,pause:g.default,check:f.default,volume:w.default,volumeClose:y.default,screenshot:M.default,setting:E.default,pip:B.default,arrowLeft:$.default,arrowRight:L.default,playbackRate:I.default,aspectRatio:H.default,config:_.default,lock:O.default,flip:fe.default,unlock:Z.default,fullscreenOff:vt.default,fullscreenOn:Ft.default,fullscreenWebOff:Dt.default,fullscreenWebOn:Pt.default,switchOn:Bt.default,switchOff:ut.default,error:bt.default,close:dt.default,airplay:Ht.default,...pe.option.icons};for(let zt in Zt)(0,n.def)(this,zt,{get:()=>(0,n.getIcon)(zt,Zt[zt])})}}},{"../utils":"71aH7","bundle-text:./loading.svg":"7tDub","bundle-text:./state.svg":"1ElZc","bundle-text:./check.svg":"lmgoP","bundle-text:./play.svg":"lVWoQ","bundle-text:./pause.svg":"5Mnax","bundle-text:./volume.svg":"w3eIa","bundle-text:./volume-close.svg":"rHjo1","bundle-text:./screenshot.svg":"2KcqM","bundle-text:./setting.svg":"8rQMV","bundle-text:./arrow-left.svg":"kqGBE","bundle-text:./arrow-right.svg":"aFjpC","bundle-text:./playback-rate.svg":"lx7ZM","bundle-text:./aspect-ratio.svg":"2sEjf","bundle-text:./config.svg":"fQTgE","bundle-text:./pip.svg":"2CaxO","bundle-text:./lock.svg":"aCGnW","bundle-text:./unlock.svg":"bTrAV","bundle-text:./fullscreen-off.svg":"bA3p0","bundle-text:./fullscreen-on.svg":"fTuY8","bundle-text:./fullscreen-web-off.svg":"tvKf4","bundle-text:./fullscreen-web-on.svg":"1F1oB","bundle-text:./switch-on.svg":"7qNHs","bundle-text:./switch-off.svg":"28aV8","bundle-text:./flip.svg":"1uXI6","bundle-text:./error.svg":"9f4dh","bundle-text:./close.svg":"4nTtS","bundle-text:./airplay.svg":"cDPXC","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7tDub":[function(t,o,r){o.exports='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="uil-default"><path fill="none" class="bk" d="M0 0h100v100H0z"/><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-1s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(30 105.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(60 75.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(90 65 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.75s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(120 58.66 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(150 54.02 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(180 50 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-150 45.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-120 41.34 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-90 35 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.25s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-60 24.02 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-30 -5.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"/></rect></svg>'},{}],"1ElZc":[function(t,o,r){o.exports='<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24"><path fill="#fff" d="M9.5 9.325v5.35q0 .575.525.875t1.025-.05l4.15-2.65q.475-.3.475-.85t-.475-.85L11.05 8.5q-.5-.35-1.025-.05t-.525.875ZM12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22Z"/></svg>'},{}],lmgoP:[function(t,o,r){o.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="width:100%;height:100%"><path d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="#fff"/></svg>'},{}],lVWoQ:[function(t,o,r){o.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M17.982 9.275 8.06 3.27A2.013 2.013 0 0 0 5 4.994v12.011a2.017 2.017 0 0 0 3.06 1.725l9.922-6.005a2.017 2.017 0 0 0 0-3.45z"/></svg>'},{}],"5Mnax":[function(t,o,r){o.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M7 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2zm8 0a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2z"/></svg>'},{}],w3eIa:[function(t,o,r){o.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M10.188 4.65 6 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39V5.04a.498.498 0 0 0-.812-.39zm4.258-.872a1 1 0 0 0-.862 1.804 6.002 6.002 0 0 1-.007 10.838 1 1 0 0 0 .86 1.806A8.001 8.001 0 0 0 19 11a8.001 8.001 0 0 0-4.554-7.222z"/><path d="M15 11a3.998 3.998 0 0 0-2-3.465v6.93A3.998 3.998 0 0 0 15 11z"/></svg>'},{}],rHjo1:[function(t,o,r){o.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M15 11a3.998 3.998 0 0 0-2-3.465v2.636l1.865 1.865A4.02 4.02 0 0 0 15 11z"/><path d="M13.583 5.583A5.998 5.998 0 0 1 17 11a6 6 0 0 1-.585 2.587l1.477 1.477a8.001 8.001 0 0 0-3.446-11.286 1 1 0 0 0-.863 1.805zm5.195 13.195-2.121-2.121-1.414-1.414-1.415-1.415L13 13l-2-2-3.889-3.889-3.889-3.889a.999.999 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39v-3.131l2.587 2.587-.01.005a1 1 0 0 0 .86 1.806c.215-.102.424-.214.627-.333l2.3 2.3a1.001 1.001 0 0 0 1.414-1.416zM11 5.04a.5.5 0 0 0-.813-.39L8.682 5.854 11 8.172V5.04z"/></svg>'},{}],"2KcqM":[function(t,o,r){o.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 50 50"><path d="M19.402 6a5 5 0 0 0-4.902 4.012L14.098 12H9a5 5 0 0 0-5 5v21a5 5 0 0 0 5 5h32a5 5 0 0 0 5-5V17a5 5 0 0 0-5-5h-5.098l-.402-1.988A5 5 0 0 0 30.598 6ZM25 17c5.52 0 10 4.48 10 10s-4.48 10-10 10-10-4.48-10-10 4.48-10 10-10Zm0 2c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8Z"/></svg>'},{}],"8rQMV":[function(t,o,r){o.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><circle cx="11" cy="11" r="2"/><path d="M19.164 8.861 17.6 8.6a6.978 6.978 0 0 0-1.186-2.099l.574-1.533a1 1 0 0 0-.436-1.217l-1.997-1.153a1.001 1.001 0 0 0-1.272.23l-1.008 1.225a7.04 7.04 0 0 0-2.55.001L8.716 2.829a1 1 0 0 0-1.272-.23L5.447 3.751a1 1 0 0 0-.436 1.217l.574 1.533A6.997 6.997 0 0 0 4.4 8.6l-1.564.261A.999.999 0 0 0 2 9.847v2.306c0 .489.353.906.836.986l1.613.269a7 7 0 0 0 1.228 2.075l-.558 1.487a1 1 0 0 0 .436 1.217l1.997 1.153c.423.244.961.147 1.272-.23l1.04-1.263a7.089 7.089 0 0 0 2.272 0l1.04 1.263a1 1 0 0 0 1.272.23l1.997-1.153a1 1 0 0 0 .436-1.217l-.557-1.487c.521-.61.94-1.31 1.228-2.075l1.613-.269a.999.999 0 0 0 .835-.986V9.847a.999.999 0 0 0-.836-.986zM11 15a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/></svg>'},{}],kqGBE:[function(t,o,r){o.exports='<svg xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="0 0 32 32"><path d="m19.41 20.09-4.58-4.59 4.58-4.59L18 9.5l-6 6 6 6z" fill="#fff"/></svg>'},{}],aFjpC:[function(t,o,r){o.exports='<svg xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="0 0 32 32"><path d="m12.59 20.34 4.58-4.59-4.58-4.59L14 9.75l6 6-6 6z" fill="#fff"/></svg>'},{}],lx7ZM:[function(t,o,r){o.exports='<svg height="24" viewBox="0 0 24 24" width="24"><path d="M10 8v8l6-4-6-4zM6.3 5l-.6-.8C7.2 3 9 2.2 11 2l.1 1c-1.8.2-3.4.9-4.8 2zM5 6.3l-.8-.6C3 7.2 2.2 9 2 11l1 .1c.2-1.8.9-3.4 2-4.8zm0 11.4c-1.1-1.4-1.8-3.1-2-4.8L2 13c.2 2 1 3.8 2.2 5.4l.8-.7zm6.1 3.3c-1.8-.2-3.4-.9-4.8-2l-.6.8C7.2 21 9 21.8 11 22l.1-1zM22 12c0-5.2-3.9-9.4-9-10l-.1 1c4.6.5 8.1 4.3 8.1 9s-3.5 8.5-8.1 9l.1 1c5.2-.5 9-4.8 9-10z" fill="#fff" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],"2sEjf":[function(t,o,r){o.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" style="width:100%;height:100%;transform:translate(0,0)"><defs><clipPath id="a"><path d="M0 0h88v88H0z"/></clipPath></defs><g style="display:block" clip-path="url('#a')"><path fill="#FFF" d="m12.438-12.702-2.82 2.82c-.79.79-.79 2.05 0 2.83l7.07 7.07-7.07 7.07c-.79.79-.79 2.05 0 2.83l2.82 2.83c.79.78 2.05.78 2.83 0l11.32-11.31c.78-.78.78-2.05 0-2.83l-11.32-11.31c-.78-.79-2.04-.79-2.83 0zm-24.88 0c-.74-.74-1.92-.78-2.7-.12l-.13.12-11.31 11.31a2 2 0 0 0-.12 2.7l.12.13 11.31 11.31a2 2 0 0 0 2.7.12l.13-.12 2.83-2.83c.74-.74.78-1.91.11-2.7l-.11-.13-7.07-7.07 7.07-7.07c.74-.74.78-1.91.11-2.7l-.11-.13-2.83-2.82zM28-28c4.42 0 8 3.58 8 8v40c0 4.42-3.58 8-8 8h-56c-4.42 0-8-3.58-8-8v-40c0-4.42 3.58-8 8-8h56z" style="--darkreader-inline-fill:#a8a6a4" transform="translate(44 44)"/></g></svg>`},{}],fQTgE:[function(t,o,r){o.exports='<svg height="24" viewBox="0 0 24 24" width="24"><path d="M15 17h6v1h-6v-1zm-4 0H3v1h8v2h1v-5h-1v2zm3-9h1V3h-1v2H3v1h11v2zm4-3v1h3V5h-3zM6 14h1V9H6v2H3v1h3v2zm4-2h11v-1H10v1z" fill="#fff" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],"2CaxO":[function(t,o,r){o.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" height="32" width="32"><path d="M25 17h-8v6h8v-6Zm4 8V10.98C29 9.88 28.1 9 27 9H9c-1.1 0-2 .88-2 1.98V25c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2Zm-2 .02H9V10.97h18v14.05Z"/></svg>'},{}],aCGnW:[function(t,o,r){o.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="M298.667 426.667v-85.334a213.333 213.333 0 1 1 426.666 0v85.334H768A85.333 85.333 0 0 1 853.333 512v256A85.333 85.333 0 0 1 768 853.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667h42.667zM512 213.333a128 128 0 0 0-128 128v85.334h256v-85.334a128 128 0 0 0-128-128z" fill="#fff"/></svg>'},{}],bTrAV:[function(t,o,r){o.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="m666.752 194.517-49.365 74.112A128 128 0 0 0 384 341.333l.043 85.334h384A85.333 85.333 0 0 1 853.376 512v256a85.333 85.333 0 0 1-85.333 85.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667h42.667v-85.334a213.333 213.333 0 0 1 368.085-146.816z" fill="#fff"/></svg>'},{}],bA3p0:[function(t,o,r){o.exports='<svg class="icon" width="22" height="22" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M768 298.667h170.667V384h-256V128H768v170.667zM341.333 384h-256v-85.333H256V128h85.333v256zM768 725.333V896h-85.333V640h256v85.333H768zM341.333 640v256H256V725.333H85.333V640h256z"/></svg>'},{}],fTuY8:[function(t,o,r){o.exports='<svg class="icon" width="22" height="22" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M625.778 256H768v142.222h113.778v-256h-256V256zM256 398.222V256h142.222V142.222h-256v256H256zm512 227.556V768H625.778v113.778h256v-256H768zM398.222 768H256V625.778H142.222v256h256V768z"/></svg>'},{}],tvKf4:[function(t,o,r){o.exports='<svg class="icon" width="18" height="18" viewBox="0 0 1152 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0zM1024 128v768H128V128h896zM896 512a64 64 0 0 1 7.488 127.552L896 640H768v128a64 64 0 0 1-56.512 63.552L704 832a64 64 0 0 1-63.552-56.512L640 768V582.592c0-34.496 25.024-66.112 61.632-70.208l8-.384H896zm-640 0a64 64 0 0 1-7.488-127.552L256 384h128V256a64 64 0 0 1 56.512-63.552L448 192a64 64 0 0 1 63.552 56.512L512 256v185.408c0 34.432-25.024 66.112-61.632 70.144l-8 .448H256z"/></svg>'},{}],"1F1oB":[function(t,o,r){o.exports='<svg class="icon" width="18" height="18" viewBox="0 0 1152 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0zM1024 128v768H128V128h896zm-576 64a64 64 0 0 1 7.488 127.552L448 320H320v128a64 64 0 0 1-56.512 63.552L256 512a64 64 0 0 1-63.552-56.512L192 448V262.592c0-34.432 25.024-66.112 61.632-70.144l8-.448H448zm256 640a64 64 0 0 1-7.488-127.552L704 704h128V576a64 64 0 0 1 56.512-63.552L896 512a64 64 0 0 1 63.552 56.512L960 576v185.408c0 34.496-25.024 66.112-61.632 70.208l-8 .384H704z"/></svg>'},{}],"7qNHs":[function(t,o,r){o.exports='<svg class="icon" width="26" height="26" viewBox="0 0 1664 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#648FFC" d="M1152 0H512a512 512 0 0 0 0 1024h640a512 512 0 0 0 0-1024zm0 960a448 448 0 1 1 448-448 448 448 0 0 1-448 448z"/></svg>'},{}],"28aV8":[function(t,o,r){o.exports='<svg class="icon" width="26" height="26" viewBox="0 0 1740 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M511.898 1024h670.515c282.419-.41 511.18-229.478 511.18-511.898 0-282.419-228.761-511.488-511.18-511.897H511.898C229.478.615.717 229.683.717 512.102c0 282.42 228.761 511.488 511.18 511.898zm-.564-975.36A464.589 464.589 0 1 1 48.026 513.024 463.872 463.872 0 0 1 511.334 48.435v.205z"/></svg>'},{}],"1uXI6":[function(t,o,r){o.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M554.667 810.667V896h-85.334v-85.333h85.334zm-384-632.662a42.667 42.667 0 0 1 34.986 18.219l203.904 291.328a42.667 42.667 0 0 1 0 48.896L205.611 827.776A42.667 42.667 0 0 1 128 803.328V220.672a42.667 42.667 0 0 1 42.667-42.667zm682.666 0a42.667 42.667 0 0 1 42.368 37.718l.299 4.949v582.656a42.667 42.667 0 0 1-74.24 28.63l-3.413-4.182-203.904-291.328a42.667 42.667 0 0 1-3.03-43.861l3.03-5.035 203.946-291.328a42.667 42.667 0 0 1 34.944-18.219zM554.667 640v85.333h-85.334V640h85.334zm-358.4-320.896V716.8L335.957 512 196.31 319.104zm358.4 150.23v85.333h-85.334v-85.334h85.334zm0-170.667V384h-85.334v-85.333h85.334zm0-170.667v85.333h-85.334V128h85.334z" fill="#fff"/></svg>'},{}],"9f4dh":[function(t,o,r){o.exports='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="50" height="50"><path d="M593.818 168.55 949.82 763.76c26.153 43.746 10.732 99.738-34.447 125.052-14.397 8.069-30.72 12.308-47.37 12.308H155.976c-52.224 0-94.536-40.96-94.536-91.505 0-16.097 4.383-31.928 12.718-45.875l356.004-595.19c26.173-43.724 84.009-58.654 129.208-33.341a93.082 93.082 0 0 1 34.448 33.341zM512 819.2a61.44 61.44 0 1 0 0-122.88 61.44 61.44 0 0 0 0 122.88zm0-512a72.315 72.315 0 0 0-71.762 81.306l25.723 205.721a46.408 46.408 0 0 0 92.078 0l25.723-205.742A72.315 72.315 0 0 0 512 307.2z"/></svg>'},{}],"4nTtS":[function(t,o,r){o.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="m571.733 512 268.8-268.8c17.067-17.067 17.067-42.667 0-59.733-17.066-17.067-42.666-17.067-59.733 0L512 452.267l-268.8-268.8c-17.067-17.067-42.667-17.067-59.733 0-17.067 17.066-17.067 42.666 0 59.733l268.8 268.8-268.8 268.8c-17.067 17.067-17.067 42.667 0 59.733 8.533 8.534 19.2 12.8 29.866 12.8s21.334-4.266 29.867-12.8l268.8-268.8 268.8 268.8c8.533 8.534 19.2 12.8 29.867 12.8s21.333-4.266 29.866-12.8c17.067-17.066 17.067-42.666 0-59.733L571.733 512z"/></svg>'},{}],cDPXC:[function(t,o,r){o.exports='<svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><g fill="#fff"><path d="M16 1H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h3v-2H3V3h12v8h-2v2h3a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1Z"/><path d="M4 17h10l-5-6z"/></g></svg>'},{}],"3eYNH":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("./flip"),c=e.interopDefault(n),i=t("./aspectRatio"),s=e.interopDefault(i),l=t("./playbackRate"),d=e.interopDefault(l),f=t("./subtitleOffset"),p=e.interopDefault(f),h=t("../utils/component"),m=e.interopDefault(h),g=t("../utils");class b extends m.default{constructor(v){super(v);let{option:y,controls:k,template:{$setting:M}}=v;this.name="setting",this.$parent=M,this.id=0,this.active=null,this.cache=new Map,this.option=[...this.builtin,...y.settings],y.setting&&(this.format(),this.render(),v.on("blur",()=>{this.show&&(this.show=!1,this.render())}),v.on("focus",x=>{let E=(0,g.includeFromEvent)(x,k.setting),T=(0,g.includeFromEvent)(x,this.$parent);!this.show||E||T||(this.show=!1,this.render())}),v.on("resize",()=>this.resize()))}get builtin(){let v=[],{option:y}=this.art;return y.playbackRate&&v.push((0,d.default)(this.art)),y.aspectRatio&&v.push((0,s.default)(this.art)),y.flip&&v.push((0,c.default)(this.art)),y.subtitleOffset&&v.push((0,p.default)(this.art)),v}traverse(v,y=this.option){var k;for(let M=0;M<y.length;M++){let x=y[M];v(x),(k=x.selector)!=null&&k.length&&this.traverse.call(this,v,x.selector)}}check(v){v.$parent.tooltip=v.html,this.traverse(y=>{y.default=y===v,y.default&&y.$item&&(0,g.inverseClass)(y.$item,"art-current")},v.$option),this.render(v.$parents)}format(v=this.option,y,k,M=[]){for(let x=0;x<v.length;x++){let E=v[x];if(E!=null&&E.name?((0,g.errorHandle)(!M.includes(E.name),`The [${E.name}] is already exist in [setting]`),M.push(E.name)):E.name=`setting-${this.id++}`,!E.$formatted){(0,g.def)(E,"$parent",{get:()=>y}),(0,g.def)(E,"$parents",{get:()=>k}),(0,g.def)(E,"$option",{get:()=>v});let T=[];(0,g.def)(E,"$events",{get:()=>T}),(0,g.def)(E,"$formatted",{get:()=>!0})}this.format(E.selector||[],E,v,M)}this.option=v}find(v=""){let y=null;return this.traverse(k=>{k.name===v&&(y=k)}),y}resize(){var E,T;let{controls:v,constructor:{SETTING_WIDTH:y,SETTING_ITEM_HEIGHT:k},template:{$player:M,$setting:x}}=this.art;if(v.setting&&this.show){let $=((T=(E=this.active[0])==null?void 0:E.$parent)==null?void 0:T.width)||y,{left:P,width:L}=(0,g.getRect)(v.setting),{left:j,width:I}=(0,g.getRect)(M),S=P-j+L/2-$/2,H=this.active===this.option?this.active.length*k:(this.active.length+1)*k;(0,g.setStyle)(x,"height",`${H}px`),(0,g.setStyle)(x,"width",`${$}px`),S+$>I?((0,g.setStyle)(x,"left",null),(0,g.setStyle)(x,"right",null)):((0,g.setStyle)(x,"left",`${S}px`),(0,g.setStyle)(x,"right","auto"))}}inactivate(v){for(let y=0;y<v.$events.length;y++)this.art.events.remove(v.$events[y]);v.$events.length=0}remove(v){let y=this.find(v);(0,g.errorHandle)(y,`Can't find [${v}] in the [setting]`);let k=y.$option.indexOf(y);y.$option.splice(k,1),this.inactivate(y),y.$item&&(0,g.remove)(y.$item),this.render()}update(v){let y=this.find(v.name);return y?(this.inactivate(y),Object.assign(y,v),this.format(),this.creatItem(y,!0),this.render(),y):this.add(v)}add(v,y=this.option){return y.push(v),this.format(),this.creatItem(v),this.render(),v}creatHeader(v){if(!this.cache.has(v.$option))return;let y=this.cache.get(v.$option),{proxy:k,icons:{arrowLeft:M},constructor:{SETTING_ITEM_HEIGHT:x}}=this.art,E=(0,g.createElement)("div");(0,g.setStyle)(E,"height",`${x}px`),(0,g.addClass)(E,"art-setting-item"),(0,g.addClass)(E,"art-setting-item-back");let T=(0,g.append)(E,'<div class="art-setting-item-left"></div>'),$=(0,g.createElement)("div");(0,g.addClass)($,"art-setting-item-left-icon"),(0,g.append)($,M),(0,g.append)(T,$),(0,g.append)(T,v.$parent.html);let P=k(E,"click",()=>this.render(v.$parents));v.$parent.$events.push(P),(0,g.append)(y,E)}creatItem(v,y=!1){var C,_;if(!this.cache.has(v.$option))return;let k=this.cache.get(v.$option),M=v.$item,x="selector";(0,g.has)(v,"switch")&&(x="switch"),(0,g.has)(v,"range")&&(x="range");let{icons:E,proxy:T,constructor:$}=this.art,P=(0,g.createElement)("div");(0,g.addClass)(P,"art-setting-item"),(0,g.setStyle)(P,"height",`${$.SETTING_ITEM_HEIGHT}px`),P.dataset.name=v.name||"",P.dataset.value=v.value||"";let L=(0,g.append)(P,'<div class="art-setting-item-left"></div>'),j=(0,g.append)(P,'<div class="art-setting-item-right"></div>'),I=(0,g.createElement)("div");switch((0,g.addClass)(I,"art-setting-item-left-icon"),x){case"switch":case"range":(0,g.append)(I,v.icon||E.config);break;case"selector":(C=v.selector)!=null&&C.length?(0,g.append)(I,v.icon||E.config):(0,g.append)(I,E.check)}(0,g.append)(L,I),(0,g.def)(v,"$icon",{configurable:!0,get:()=>I}),(0,g.def)(v,"icon",{configurable:!0,get:()=>I.innerHTML,set(D){I.innerHTML="",(0,g.append)(I,D)}});let S=(0,g.createElement)("div");(0,g.addClass)(S,"art-setting-item-left-text"),(0,g.append)(S,v.html||""),(0,g.append)(L,S),(0,g.def)(v,"$html",{configurable:!0,get:()=>S}),(0,g.def)(v,"html",{configurable:!0,get:()=>S.innerHTML,set(D){S.innerHTML="",(0,g.append)(S,D)}});let H=(0,g.createElement)("div");switch((0,g.addClass)(H,"art-setting-item-right-tooltip"),(0,g.append)(H,v.tooltip||""),(0,g.append)(j,H),(0,g.def)(v,"$tooltip",{configurable:!0,get:()=>H}),(0,g.def)(v,"tooltip",{configurable:!0,get:()=>H.innerHTML,set(D){H.innerHTML="",(0,g.append)(H,D)}}),x){case"switch":{let D=(0,g.createElement)("div");(0,g.addClass)(D,"art-setting-item-right-icon");let B=(0,g.append)(D,E.switchOn),N=(0,g.append)(D,E.switchOff);(0,g.setStyle)(v.switch?N:B,"display","none"),(0,g.append)(j,D),(0,g.def)(v,"$switch",{configurable:!0,get:()=>D});let O=v.switch;(0,g.def)(v,"switch",{configurable:!0,get:()=>O,set(X){O=X,X?((0,g.setStyle)(N,"display","none"),(0,g.setStyle)(B,"display",null)):((0,g.setStyle)(N,"display",null),(0,g.setStyle)(B,"display","none"))}});break}case"range":{let D=(0,g.createElement)("div");(0,g.addClass)(D,"art-setting-item-right-icon");let B=(0,g.append)(D,'<input type="range">');B.value=v.range[0],B.min=v.range[1],B.max=v.range[2],B.step=v.range[3],(0,g.addClass)(B,"art-setting-range"),(0,g.append)(j,D),(0,g.def)(v,"$range",{configurable:!0,get:()=>B});let N=[...v.range];(0,g.def)(v,"range",{configurable:!0,get:()=>N,set(O){N=[...O],B.value=O[0],B.min=O[1],B.max=O[2],B.step=O[3]}})}break;case"selector":if((_=v.selector)!=null&&_.length){let D=(0,g.createElement)("div");(0,g.addClass)(D,"art-setting-item-right-icon"),(0,g.append)(D,E.arrowRight),(0,g.append)(j,D)}}switch(x){case"switch":if(v.onSwitch){let D=T(P,"click",async B=>{v.switch=await v.onSwitch.call(this.art,v,P,B)});v.$events.push(D)}break;case"range":if(v.$range){if(v.onRange){let D=T(v.$range,"change",async B=>{v.range[0]=v.$range.valueAsNumber,v.tooltip=await v.onRange.call(this.art,v,P,B)});v.$events.push(D)}if(v.onChange){let D=T(v.$range,"input",async B=>{v.range[0]=v.$range.valueAsNumber,v.tooltip=await v.onChange.call(this.art,v,P,B)});v.$events.push(D)}}break;case"selector":{let D=T(P,"click",async B=>{var N;(N=v.selector)!=null&&N.length?this.render(v.selector):(this.check(v),v.$parent.onSelect&&(v.$parent.tooltip=await v.$parent.onSelect.call(this.art,v,P,B)))});v.$events.push(D),v.default&&(0,g.addClass)(P,"art-current")}}(0,g.def)(v,"$item",{configurable:!0,get:()=>P}),y?(0,g.replaceElement)(P,M):(0,g.append)(k,P),v.mounted&&setTimeout(()=>v.mounted.call(this.art,v.$item,v),0)}render(v=this.option){var y;if(this.active=v,this.cache.has(v)){let k=this.cache.get(v);(0,g.inverseClass)(k,"art-current")}else{let k=(0,g.createElement)("div");this.cache.set(v,k),(0,g.addClass)(k,"art-setting-panel"),(0,g.append)(this.$parent,k),(0,g.inverseClass)(k,"art-current"),(y=v[0])!=null&&y.$parent&&this.creatHeader(v[0]);for(let M=0;M<v.length;M++)this.creatItem(v[M])}this.resize()}}r.default=b},{"./flip":"kONUB","./aspectRatio":"84NBV","./playbackRate":"aetWt","./subtitleOffset":"fIBkO","../utils/component":"18nVI","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kONUB:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{i18n:s,icons:l,constructor:{SETTING_ITEM_WIDTH:d,FLIP:f}}=i;function p(m){return s.get((0,n.capitalize)(m))}function h(){let m=i.setting.find(`flip-${i.flip}`);i.setting.check(m)}return{width:d,name:"flip",html:s.get("Video Flip"),tooltip:p(i.flip),icon:l.flip,selector:f.map(m=>({value:m,name:`flip-${m}`,default:m===i.flip,html:p(m)})),onSelect:m=>(i.flip=m.value,m.html),mounted:()=>{h(),i.on("flip",()=>h())}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"84NBV":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c){let{i18n:i,icons:s,constructor:{SETTING_ITEM_WIDTH:l,ASPECT_RATIO:d}}=c;function f(h){return h==="default"?i.get("Default"):h}function p(){let h=c.setting.find(`aspect-ratio-${c.aspectRatio}`);c.setting.check(h)}return{width:l,name:"aspect-ratio",html:i.get("Aspect Ratio"),icon:s.aspectRatio,tooltip:f(c.aspectRatio),selector:d.map(h=>({value:h,name:`aspect-ratio-${h}`,default:h===c.aspectRatio,html:f(h)})),onSelect:h=>(c.aspectRatio=h.value,h.html),mounted:()=>{p(),c.on("aspectRatio",()=>p())}}}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],aetWt:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c){let{i18n:i,icons:s,constructor:{SETTING_ITEM_WIDTH:l,PLAYBACK_RATE:d}}=c;function f(h){return h===1?i.get("Normal"):h.toFixed(1)}function p(){let h=c.setting.find(`playback-rate-${c.playbackRate}`);c.setting.check(h)}return{width:l,name:"playback-rate",html:i.get("Play Speed"),tooltip:f(c.playbackRate),icon:s.playbackRate,selector:d.map(h=>({value:h,name:`playback-rate-${h}`,default:h===c.playbackRate,html:f(h)})),onSelect:h=>(c.playbackRate=h.value,h.html),mounted:()=>{p(),c.on("video:ratechange",()=>p())}}}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fIBkO:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");function n(c){let{i18n:i,icons:s,constructor:l}=c;return{width:l.SETTING_ITEM_WIDTH,name:"subtitle-offset",html:i.get("Subtitle Offset"),icon:s.subtitle,tooltip:"0s",range:[0,-10,10,.1],onChange:d=>(c.subtitleOffset=d.range[0],d.range[0]+"s"),mounted:(d,f)=>{c.on("subtitleOffset",p=>{f.$range.value=p,f.tooltip=p+"s"})}}}e.defineInteropFlag(r),e.export(r,"default",()=>n)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2aaJe":[function(t,o,r){t("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=class{constructor(){this.name="artplayer_settings",this.settings={}}get(e){try{let n=JSON.parse(window.localStorage.getItem(this.name))||{};return e?n[e]:n}catch{return e?this.settings[e]:this.settings}}set(e,n){try{let c=Object.assign({},this.get(),{[e]:n});window.localStorage.setItem(this.name,JSON.stringify(c))}catch{this.settings[e]=n}}del(e){try{let n=this.get();delete n[e],window.localStorage.setItem(this.name,JSON.stringify(n))}catch{delete this.settings[e]}}clear(){try{window.localStorage.removeItem(this.name)}catch{this.settings={}}}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8MTUM":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r);var n=t("../utils"),c=t("./miniProgressBar"),i=e.interopDefault(c),s=t("./autoOrientation"),l=e.interopDefault(s),d=t("./autoPlayback"),f=e.interopDefault(d),p=t("./fastForward"),h=e.interopDefault(p),m=t("./lock"),g=e.interopDefault(m);r.default=class{constructor(b){this.art=b,this.id=0;let{option:w}=b;w.miniProgressBar&&!w.isLive&&this.add(i.default),w.lock&&n.isMobile&&this.add(g.default),w.autoPlayback&&!w.isLive&&this.add(f.default),w.autoOrientation&&n.isMobile&&this.add(l.default),w.fastForward&&n.isMobile&&!w.isLive&&this.add(h.default);for(let v=0;v<w.plugins.length;v++)this.add(w.plugins[v])}add(b){this.id+=1;let w=b.call(this.art,this.art);return w instanceof Promise?w.then(v=>this.next(b,v)):this.next(b,w)}next(b,w){let v=w&&w.name||b.name||`plugin${this.id}`;return(0,n.errorHandle)(!(0,n.has)(this,v),`Cannot add a plugin that already has the same name: ${v}`),(0,n.def)(this,v,{value:w}),this}}},{"../utils":"71aH7","./miniProgressBar":"87pSL","./autoOrientation":"ePEg5","./autoPlayback":"cVO99","./fastForward":"hFDwt","./lock":"1hsTH","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"87pSL":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){return i.on("control",s=>{s?(0,n.removeClass)(i.template.$player,"art-mini-progress-bar"):(0,n.addClass)(i.template.$player,"art-mini-progress-bar")}),{name:"mini-progress-bar"}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ePEg5:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{constructor:s,template:{$player:l,$video:d}}=i;return i.on("fullscreenWeb",f=>{if(f){let{videoWidth:p,videoHeight:h}=d,{clientWidth:m,clientHeight:g}=document.documentElement;(p>h&&m<g||p<h&&m>g)&&setTimeout(()=>{(0,n.setStyle)(l,"width",`${g}px`),(0,n.setStyle)(l,"height",`${m}px`),(0,n.setStyle)(l,"transform-origin","0 0"),(0,n.setStyle)(l,"transform",`rotate(90deg) translate(0, -${m}px)`),(0,n.addClass)(l,"art-auto-orientation"),i.isRotate=!0,i.emit("resize")},s.AUTO_ORIENTATION_TIME)}else(0,n.hasClass)(l,"art-auto-orientation")&&((0,n.removeClass)(l,"art-auto-orientation"),i.isRotate=!1,i.emit("resize"))}),i.on("fullscreen",async f=>{var h;if(!((h=screen==null?void 0:screen.orientation)!=null&&h.lock))return;let p=screen.orientation.type;if(f){let{videoWidth:m,videoHeight:g}=d,{clientWidth:b,clientHeight:w}=document.documentElement;if(m>g&&b<w||m<g&&b>w){let v=p.startsWith("portrait")?"landscape":"portrait";await screen.orientation.lock(v),(0,n.addClass)(l,"art-auto-orientation-fullscreen")}}else(0,n.hasClass)(l,"art-auto-orientation-fullscreen")&&(await screen.orientation.lock(p),(0,n.removeClass)(l,"art-auto-orientation-fullscreen"))}),{name:"autoOrientation",get state(){return(0,n.hasClass)(l,"art-auto-orientation")}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cVO99:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{i18n:s,icons:l,storage:d,constructor:f,proxy:p,template:{$poster:h}}=i,m=i.layers.add({name:"auto-playback",html:'<div class="art-auto-playback-close"></div><div class="art-auto-playback-last"></div><div class="art-auto-playback-jump"></div>'}),g=(0,n.query)(".art-auto-playback-last",m),b=(0,n.query)(".art-auto-playback-jump",m),w=(0,n.query)(".art-auto-playback-close",m);(0,n.append)(w,l.close);let v=null;function y(){let k=(d.get("times")||{})[i.option.id||i.option.url];clearTimeout(v),(0,n.setStyle)(m,"display","none"),k&&k>=f.AUTO_PLAYBACK_MIN&&((0,n.setStyle)(m,"display","flex"),g.innerText=`${s.get("Last Seen")} ${(0,n.secondToTime)(k)}`,b.innerText=s.get("Jump Play"),p(w,"click",()=>{(0,n.setStyle)(m,"display","none")}),p(b,"click",()=>{i.seek=k,i.play(),(0,n.setStyle)(h,"display","none"),(0,n.setStyle)(m,"display","none")}),i.once("video:timeupdate",()=>{v=setTimeout(()=>{(0,n.setStyle)(m,"display","none")},f.AUTO_PLAYBACK_TIMEOUT)}))}return i.on("video:timeupdate",()=>{if(i.playing){let k=d.get("times")||{},M=Object.keys(k);M.length>f.AUTO_PLAYBACK_MAX&&delete k[M[0]],k[i.option.id||i.option.url]=i.currentTime,d.set("times",k)}}),i.on("ready",y),i.on("restart",y),{name:"auto-playback",get times(){return d.get("times")||{}},clear:()=>d.del("times"),delete(k){let M=d.get("times")||{};return delete M[k],d.set("times",M),M}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hFDwt:[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{constructor:s,proxy:l,template:{$player:d,$video:f}}=i,p=null,h=!1,m=1,g=()=>{clearTimeout(p),h&&(h=!1,i.playbackRate=m,(0,n.removeClass)(d,"art-fast-forward"))};return l(f,"touchstart",b=>{b.touches.length===1&&i.playing&&!i.isLock&&(p=setTimeout(()=>{h=!0,m=i.playbackRate,i.playbackRate=s.FAST_FORWARD_VALUE,(0,n.addClass)(d,"art-fast-forward")},s.FAST_FORWARD_TIME))}),l(document,"touchmove",g),l(document,"touchend",g),{name:"fastForward",get state(){return(0,n.hasClass)(d,"art-fast-forward")}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1hsTH":[function(t,o,r){var e=t("@parcel/transformer-js/src/esmodule-helpers.js");e.defineInteropFlag(r),e.export(r,"default",()=>c);var n=t("../utils");function c(i){let{layers:s,icons:l,template:{$player:d}}=i;function f(){return(0,n.hasClass)(d,"art-lock")}function p(){(0,n.addClass)(d,"art-lock"),i.isLock=!0,i.emit("lock",!0)}function h(){(0,n.removeClass)(d,"art-lock"),i.isLock=!1,i.emit("lock",!1)}return s.add({name:"lock",mounted(m){let g=(0,n.append)(m,l.lock),b=(0,n.append)(m,l.unlock);(0,n.setStyle)(g,"display","none"),i.on("lock",w=>{w?((0,n.setStyle)(g,"display","inline-flex"),(0,n.setStyle)(b,"display","none")):((0,n.setStyle)(g,"display","none"),(0,n.setStyle)(b,"display","inline-flex"))})},click(){f()?h():p()}}),{name:"lock",get state(){return f()},set state(m){m?p():h()}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}]},["5lTcX"],"5lTcX","parcelRequire4dc0")})(ae,ae.exports);var an=ae.exports;const me=hr(an);function on(u){let a;return{c(){a=R("div"),a.innerHTML="",F(a,"class","artplayer-app")},m(t,o){q(t,a,o),u[11](a)},p:J,i:J,o:J,d(t){t&&V(a),u[11](null)}}}function sn({url:u,title:a,headers:t}){let o=null,r=!1;return e=>{o=new Audio;const n=new URL(u);t!=null&&t.Referer&&n.searchParams.set("referer",t.Referer),t!=null&&t.Cookie&&n.searchParams.set("cookie",t.Cookie),o.src=n.toString(),e.on("video:volumechange",()=>{o&&!r&&(o.currentTime=e.currentTime,o.volume=e.volume,o.muted=e.muted)}),e.on("play",()=>{o&&!r&&(o.currentTime=e.currentTime,o.play().catch(i=>{console.error("[] B:",i)}))}),e.on("pause",()=>{o&&!r&&(o.currentTime=e.currentTime,o.pause())}),e.on("video:ratechange",()=>{o&&!r&&(o.currentTime=e.currentTime,o.playbackRate=e.playbackRate)}),e.on("video:seeked",()=>{o&&!r&&(o.currentTime=e.currentTime)}),e.on("video:ended",()=>{o.pause(),o.currentTime=0});const c=()=>{o&&!r&&(r=!0,o.pause(),o.src="",o.remove(),o=null)};return e.on("destroy",c),{name:"bilibili",destroy:c}}}function ln(u){const a=Math.floor(u/3600),t=Math.floor(u%3600/60),o=Math.floor(u%60);return a>0?`${a.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`:`${t.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`}function cn(u,a,t){let{app:o}=a,{config:r}=a,e,n,c=null,i=null,s=null;async function l(v,y){if(!e)throw new Error("");return c=(y==null?void 0:y.originalUrl)||v,i=(y==null?void 0:y.type)||null,s=(y==null?void 0:y.bvid)||null,new Promise((k,M)=>{try{if(e.plugins){const x=e.plugins.bilibili;x&&typeof x.destroy=="function"&&x.destroy()}(y==null?void 0:y.type)==="bilibili"&&y.audioUrl?(console.log("[] B:",{:y.title,:{:{:v,:y.headers},:{:y.audioUrl,:y.headers}}}),e.destroy(!0),e=new me({...e.option,container:n,url:v,autoplay:(r==null?void 0:r.autoplay)??!1,customType:{bilibili(x,E){var $,P;const T=new URL(E);if(($=y.headers)!=null&&$.Referer&&T.searchParams.set("referer",y.headers.Referer),(P=y.headers)!=null&&P.Cookie&&T.searchParams.set("cookie",y.headers.Cookie),x.src=T.toString(),y.startTime!==null&&y.startTime!==void 0){const L=parseFloat(y.startTime);Number.isFinite(L)&&L>=0?x.addEventListener("loadedmetadata",()=>{try{const j=Math.min(L,x.duration);x.currentTime=j}catch(j){console.error("[] :",j)}},{once:!0}):console.warn("[] :",y.startTime)}}},type:"bilibili",plugins:[sn({url:y.audioUrl,title:y.title,headers:y.headers})]}),e.on("error",async()=>{console.error("[] B");try{const x=new CustomEvent("streamError",{detail:{type:"bilibili",url:v,options:y}});n.dispatchEvent(x)}catch(x){console.error("[] :",x)}}),e.once("ready",()=>{y.startTime!==null&&(e.currentTime=y.startTime),r!=null&&r.autoplay&&e.play(),k()}),e.once("error",x=>M(x))):(e.destroy(!0),e=new me({...e.option,container:n,url:v,autoplay:(r==null?void 0:r.autoplay)??!1,volume:e.volume,currentTime:0,customType:{},plugins:[]}),e.once("ready",()=>{(y==null?void 0:y.startTime)!==void 0&&(e.currentTime=y.startTime),y!=null&&y.autoplay&&e.play(),k()}),e.once("error",x=>M(x)))}catch(x){M(x)}})}function d(v){e&&(e.volume=v.volume/100,e.playbackRate=v.speed/100,e.loop=v.loop,v.autoplay&&e.url&&e.play())}async function f(){if(!e)return!1;try{const v=await e.getDataURL(),k=await(await fetch(v)).blob();return await navigator.clipboard.write([new ClipboardItem({"image/png":k})]),!0}catch(v){return console.error("[] :",v),!1}}function p(v){if(!e)return null;const y=ln(e.currentTime),k=e.currentTime.toFixed(1);if(i==="bilibili"&&s){const M=`https://www.bilibili.com/video/${s}/`;return`[${y}](${M}?t=${k})`}return c?c.startsWith("http")?`[${y}](${c}#t=${k})`:`[${y}](${c}#t=${k})`:null}function h(v){if(e)try{const y=parseFloat(String(v));if(!Number.isFinite(y)||y<0){console.warn("[] :",v);return}const k=Math.min(y,e.duration);e.currentTime=k}catch(y){console.error("[] :",y)}}function m(v,y){e&&e.on(v,y)}function g(v,y){e&&e.off(v,y)}function b(v,y){e&&e.once(v,y)}Et(()=>{if(n){const v={volume:70,speed:100,hotkey:!0,loop:!1,autoplay:!1},y=r?{...v,...r}:v;e=new me({container:n,url:"",volume:y.volume/100,isLive:!1,muted:!1,autoplay:y.autoplay,pip:!0,autoSize:!0,autoMini:!0,setting:!0,loop:y.loop,flip:!0,playbackRate:!0,aspectRatio:!0,fullscreen:!0,fullscreenWeb:!0,subtitleOffset:!0,miniProgressBar:!0,mutex:!0,backdrop:!0,playsInline:!0,autoPlayback:!0,theme:"var(--b3-theme-primary)",lang:"zh-cn",crossOrigin:"anonymous"}),e.on("all",(k,...M)=>{console.log(`[Artplayer Event] ${k}:`,...M)}),y&&d(y)}}),Xr(()=>{if(e){if(e.plugins){const v=e.plugins.bilibili;v&&typeof v.destroy=="function"&&v.destroy()}e.destroy(!0)}});function w(v){Yt[v?"unshift":"push"](()=>{n=v,t(0,n)})}return u.$$set=v=>{"app"in v&&t(1,o=v.app),"config"in v&&t(2,r=v.config)},[n,o,r,l,d,f,p,h,m,g,b,w]}class un extends Qt{constructor(a){super(),Gt(this,a,cn,on,Kt,{app:1,config:2,play:3,updateConfig:4,screenshot:5,generateTimestampLink:6,seek:7,on:8,off:9,once:10})}get play(){return this.$$.ctx[3]}get updateConfig(){return this.$$.ctx[4]}get screenshot(){return this.$$.ctx[5]}get generateTimestampLink(){return this.$$.ctx[6]}get seek(){return this.$$.ctx[7]}get on(){return this.$$.ctx[8]}get off(){return this.$$.ctx[9]}get once(){return this.$$.ctx[10]}}var Xt={},dn=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},mr={},rt={};let De;const fn=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];rt.getSymbolSize=function(a){if(!a)throw new Error('"version" cannot be null or undefined');if(a<1||a>40)throw new Error('"version" should be in range from 1 to 40');return a*4+17};rt.getSymbolTotalCodewords=function(a){return fn[a]};rt.getBCHDigit=function(u){let a=0;for(;u!==0;)a++,u>>>=1;return a};rt.setToSJISFunction=function(a){if(typeof a!="function")throw new Error('"toSJISFunc" is not a valid function.');De=a};rt.isKanjiModeEnabled=function(){return typeof De<"u"};rt.toSJIS=function(a){return De(a)};var le={};(function(u){u.L={bit:1},u.M={bit:0},u.Q={bit:3},u.H={bit:2};function a(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return u.L;case"m":case"medium":return u.M;case"q":case"quartile":return u.Q;case"h":case"high":return u.H;default:throw new Error("Unknown EC Level: "+t)}}u.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},u.from=function(o,r){if(u.isValid(o))return o;try{return a(o)}catch{return r}}})(le);function gr(){this.buffer=[],this.length=0}gr.prototype={get:function(u){const a=Math.floor(u/8);return(this.buffer[a]>>>7-u%8&1)===1},put:function(u,a){for(let t=0;t<a;t++)this.putBit((u>>>a-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(u){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),u&&(this.buffer[a]|=128>>>this.length%8),this.length++}};var pn=gr;function Jt(u){if(!u||u<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=u,this.data=new Uint8Array(u*u),this.reservedBit=new Uint8Array(u*u)}Jt.prototype.set=function(u,a,t,o){const r=u*this.size+a;this.data[r]=t,o&&(this.reservedBit[r]=!0)};Jt.prototype.get=function(u,a){return this.data[u*this.size+a]};Jt.prototype.xor=function(u,a,t){this.data[u*this.size+a]^=t};Jt.prototype.isReserved=function(u,a){return this.reservedBit[u*this.size+a]};var hn=Jt,vr={};(function(u){const a=rt.getSymbolSize;u.getRowColCoords=function(o){if(o===1)return[];const r=Math.floor(o/7)+2,e=a(o),n=e===145?26:Math.ceil((e-13)/(2*r-2))*2,c=[e-7];for(let i=1;i<r-1;i++)c[i]=c[i-1]-n;return c.push(6),c.reverse()},u.getPositions=function(o){const r=[],e=u.getRowColCoords(o),n=e.length;for(let c=0;c<n;c++)for(let i=0;i<n;i++)c===0&&i===0||c===0&&i===n-1||c===n-1&&i===0||r.push([e[c],e[i]]);return r}})(vr);var yr={};const mn=rt.getSymbolSize,Ve=7;yr.getPositions=function(a){const t=mn(a);return[[0,0],[t-Ve,0],[0,t-Ve]]};var br={};(function(u){u.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const a={N1:3,N2:3,N3:40,N4:10};u.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},u.from=function(r){return u.isValid(r)?parseInt(r,10):void 0},u.getPenaltyN1=function(r){const e=r.size;let n=0,c=0,i=0,s=null,l=null;for(let d=0;d<e;d++){c=i=0,s=l=null;for(let f=0;f<e;f++){let p=r.get(d,f);p===s?c++:(c>=5&&(n+=a.N1+(c-5)),s=p,c=1),p=r.get(f,d),p===l?i++:(i>=5&&(n+=a.N1+(i-5)),l=p,i=1)}c>=5&&(n+=a.N1+(c-5)),i>=5&&(n+=a.N1+(i-5))}return n},u.getPenaltyN2=function(r){const e=r.size;let n=0;for(let c=0;c<e-1;c++)for(let i=0;i<e-1;i++){const s=r.get(c,i)+r.get(c,i+1)+r.get(c+1,i)+r.get(c+1,i+1);(s===4||s===0)&&n++}return n*a.N2},u.getPenaltyN3=function(r){const e=r.size;let n=0,c=0,i=0;for(let s=0;s<e;s++){c=i=0;for(let l=0;l<e;l++)c=c<<1&2047|r.get(s,l),l>=10&&(c===1488||c===93)&&n++,i=i<<1&2047|r.get(l,s),l>=10&&(i===1488||i===93)&&n++}return n*a.N3},u.getPenaltyN4=function(r){let e=0;const n=r.data.length;for(let i=0;i<n;i++)e+=r.data[i];return Math.abs(Math.ceil(e*100/n/5)-10)*a.N4};function t(o,r,e){switch(o){case u.Patterns.PATTERN000:return(r+e)%2===0;case u.Patterns.PATTERN001:return r%2===0;case u.Patterns.PATTERN010:return e%3===0;case u.Patterns.PATTERN011:return(r+e)%3===0;case u.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(e/3))%2===0;case u.Patterns.PATTERN101:return r*e%2+r*e%3===0;case u.Patterns.PATTERN110:return(r*e%2+r*e%3)%2===0;case u.Patterns.PATTERN111:return(r*e%3+(r+e)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}u.applyMask=function(r,e){const n=e.size;for(let c=0;c<n;c++)for(let i=0;i<n;i++)e.isReserved(i,c)||e.xor(i,c,t(r,i,c))},u.getBestMask=function(r,e){const n=Object.keys(u.Patterns).length;let c=0,i=1/0;for(let s=0;s<n;s++){e(s),u.applyMask(s,r);const l=u.getPenaltyN1(r)+u.getPenaltyN2(r)+u.getPenaltyN3(r)+u.getPenaltyN4(r);u.applyMask(s,r),l<i&&(i=l,c=s)}return c}})(br);var ce={};const pt=le,ee=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],re=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ce.getBlocksCount=function(a,t){switch(t){case pt.L:return ee[(a-1)*4+0];case pt.M:return ee[(a-1)*4+1];case pt.Q:return ee[(a-1)*4+2];case pt.H:return ee[(a-1)*4+3];default:return}};ce.getTotalCodewordsCount=function(a,t){switch(t){case pt.L:return re[(a-1)*4+0];case pt.M:return re[(a-1)*4+1];case pt.Q:return re[(a-1)*4+2];case pt.H:return re[(a-1)*4+3];default:return}};var wr={},ue={};const Ot=new Uint8Array(512),oe=new Uint8Array(256);(function(){let a=1;for(let t=0;t<255;t++)Ot[t]=a,oe[a]=t,a<<=1,a&256&&(a^=285);for(let t=255;t<512;t++)Ot[t]=Ot[t-255]})();ue.log=function(a){if(a<1)throw new Error("log("+a+")");return oe[a]};ue.exp=function(a){return Ot[a]};ue.mul=function(a,t){return a===0||t===0?0:Ot[oe[a]+oe[t]]};(function(u){const a=ue;u.mul=function(o,r){const e=new Uint8Array(o.length+r.length-1);for(let n=0;n<o.length;n++)for(let c=0;c<r.length;c++)e[n+c]^=a.mul(o[n],r[c]);return e},u.mod=function(o,r){let e=new Uint8Array(o);for(;e.length-r.length>=0;){const n=e[0];for(let i=0;i<r.length;i++)e[i]^=a.mul(r[i],n);let c=0;for(;c<e.length&&e[c]===0;)c++;e=e.slice(c)}return e},u.generateECPolynomial=function(o){let r=new Uint8Array([1]);for(let e=0;e<o;e++)r=u.mul(r,new Uint8Array([1,a.exp(e)]));return r}})(wr);const xr=wr;function $e(u){this.genPoly=void 0,this.degree=u,this.degree&&this.initialize(this.degree)}$e.prototype.initialize=function(a){this.degree=a,this.genPoly=xr.generateECPolynomial(this.degree)};$e.prototype.encode=function(a){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(a.length+this.degree);t.set(a);const o=xr.mod(t,this.genPoly),r=this.degree-o.length;if(r>0){const e=new Uint8Array(this.degree);return e.set(o,r),e}return o};var gn=$e,kr={},gt={},Pe={};Pe.isValid=function(a){return!isNaN(a)&&a>=1&&a<=40};var ot={};const Cr="[0-9]+",vn="[A-Z $%*+\\-./:]+";let Wt="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Wt=Wt.replace(/u/g,"\\u");const yn="(?:(?![A-Z0-9 $%*+\\-./:]|"+Wt+`)(?:.|[\r
]))+`;ot.KANJI=new RegExp(Wt,"g");ot.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ot.BYTE=new RegExp(yn,"g");ot.NUMERIC=new RegExp(Cr,"g");ot.ALPHANUMERIC=new RegExp(vn,"g");const bn=new RegExp("^"+Wt+"$"),wn=new RegExp("^"+Cr+"$"),xn=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ot.testKanji=function(a){return bn.test(a)};ot.testNumeric=function(a){return wn.test(a)};ot.testAlphanumeric=function(a){return xn.test(a)};(function(u){const a=Pe,t=ot;u.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},u.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},u.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},u.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},u.MIXED={bit:-1},u.getCharCountIndicator=function(e,n){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!a.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?e.ccBits[0]:n<27?e.ccBits[1]:e.ccBits[2]},u.getBestModeForData=function(e){return t.testNumeric(e)?u.NUMERIC:t.testAlphanumeric(e)?u.ALPHANUMERIC:t.testKanji(e)?u.KANJI:u.BYTE},u.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},u.isValid=function(e){return e&&e.bit&&e.ccBits};function o(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return u.NUMERIC;case"alphanumeric":return u.ALPHANUMERIC;case"kanji":return u.KANJI;case"byte":return u.BYTE;default:throw new Error("Unknown mode: "+r)}}u.from=function(e,n){if(u.isValid(e))return e;try{return o(e)}catch{return n}}})(gt);(function(u){const a=rt,t=ce,o=le,r=gt,e=Pe,n=7973,c=a.getBCHDigit(n);function i(f,p,h){for(let m=1;m<=40;m++)if(p<=u.getCapacity(m,h,f))return m}function s(f,p){return r.getCharCountIndicator(f,p)+4}function l(f,p){let h=0;return f.forEach(function(m){const g=s(m.mode,p);h+=g+m.getBitsLength()}),h}function d(f,p){for(let h=1;h<=40;h++)if(l(f,h)<=u.getCapacity(h,p,r.MIXED))return h}u.from=function(p,h){return e.isValid(p)?parseInt(p,10):h},u.getCapacity=function(p,h,m){if(!e.isValid(p))throw new Error("Invalid QR Code version");typeof m>"u"&&(m=r.BYTE);const g=a.getSymbolTotalCodewords(p),b=t.getTotalCodewordsCount(p,h),w=(g-b)*8;if(m===r.MIXED)return w;const v=w-s(m,p);switch(m){case r.NUMERIC:return Math.floor(v/10*3);case r.ALPHANUMERIC:return Math.floor(v/11*2);case r.KANJI:return Math.floor(v/13);case r.BYTE:default:return Math.floor(v/8)}},u.getBestVersionForData=function(p,h){let m;const g=o.from(h,o.M);if(Array.isArray(p)){if(p.length>1)return d(p,g);if(p.length===0)return 1;m=p[0]}else m=p;return i(m.mode,m.getLength(),g)},u.getEncodedBits=function(p){if(!e.isValid(p)||p<7)throw new Error("Invalid QR Code version");let h=p<<12;for(;a.getBCHDigit(h)-c>=0;)h^=n<<a.getBCHDigit(h)-c;return p<<12|h}})(kr);var Er={};const Ee=rt,Tr=1335,kn=21522,qe=Ee.getBCHDigit(Tr);Er.getEncodedBits=function(a,t){const o=a.bit<<3|t;let r=o<<10;for(;Ee.getBCHDigit(r)-qe>=0;)r^=Tr<<Ee.getBCHDigit(r)-qe;return(o<<10|r)^kn};var _r={};const Cn=gt;function _t(u){this.mode=Cn.NUMERIC,this.data=u.toString()}_t.getBitsLength=function(a){return 10*Math.floor(a/3)+(a%3?a%3*3+1:0)};_t.prototype.getLength=function(){return this.data.length};_t.prototype.getBitsLength=function(){return _t.getBitsLength(this.data.length)};_t.prototype.write=function(a){let t,o,r;for(t=0;t+3<=this.data.length;t+=3)o=this.data.substr(t,3),r=parseInt(o,10),a.put(r,10);const e=this.data.length-t;e>0&&(o=this.data.substr(t),r=parseInt(o,10),a.put(r,e*3+1))};var En=_t;const Tn=gt,ge=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Mt(u){this.mode=Tn.ALPHANUMERIC,this.data=u}Mt.getBitsLength=function(a){return 11*Math.floor(a/2)+6*(a%2)};Mt.prototype.getLength=function(){return this.data.length};Mt.prototype.getBitsLength=function(){return Mt.getBitsLength(this.data.length)};Mt.prototype.write=function(a){let t;for(t=0;t+2<=this.data.length;t+=2){let o=ge.indexOf(this.data[t])*45;o+=ge.indexOf(this.data[t+1]),a.put(o,11)}this.data.length%2&&a.put(ge.indexOf(this.data[t]),6)};var _n=Mt;const Mn=gt;function jt(u){this.mode=Mn.BYTE,typeof u=="string"?this.data=new TextEncoder().encode(u):this.data=new Uint8Array(u)}jt.getBitsLength=function(a){return a*8};jt.prototype.getLength=function(){return this.data.length};jt.prototype.getBitsLength=function(){return jt.getBitsLength(this.data.length)};jt.prototype.write=function(u){for(let a=0,t=this.data.length;a<t;a++)u.put(this.data[a],8)};var jn=jt;const In=gt,Sn=rt;function It(u){this.mode=In.KANJI,this.data=u}It.getBitsLength=function(a){return a*13};It.prototype.getLength=function(){return this.data.length};It.prototype.getBitsLength=function(){return It.getBitsLength(this.data.length)};It.prototype.write=function(u){let a;for(a=0;a<this.data.length;a++){let t=Sn.toSJIS(this.data[a]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[a]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),u.put(t,13)}};var Fn=It,Mr={exports:{}};(function(u){var a={single_source_shortest_paths:function(t,o,r){var e={},n={};n[o]=0;var c=a.PriorityQueue.make();c.push(o,0);for(var i,s,l,d,f,p,h,m,g;!c.empty();){i=c.pop(),s=i.value,d=i.cost,f=t[s]||{};for(l in f)f.hasOwnProperty(l)&&(p=f[l],h=d+p,m=n[l],g=typeof n[l]>"u",(g||m>h)&&(n[l]=h,c.push(l,h),e[l]=s))}if(typeof r<"u"&&typeof n[r]>"u"){var b=["Could not find a path from ",o," to ",r,"."].join("");throw new Error(b)}return e},extract_shortest_path_from_predecessor_list:function(t,o){for(var r=[],e=o;e;)r.push(e),t[e],e=t[e];return r.reverse(),r},find_path:function(t,o,r){var e=a.single_source_shortest_paths(t,o,r);return a.extract_shortest_path_from_predecessor_list(e,r)},PriorityQueue:{make:function(t){var o=a.PriorityQueue,r={},e;t=t||{};for(e in o)o.hasOwnProperty(e)&&(r[e]=o[e]);return r.queue=[],r.sorter=t.sorter||o.default_sorter,r},default_sorter:function(t,o){return t.cost-o.cost},push:function(t,o){var r={value:t,cost:o};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};u.exports=a})(Mr);var An=Mr.exports;(function(u){const a=gt,t=En,o=_n,r=jn,e=Fn,n=ot,c=rt,i=An;function s(b){return unescape(encodeURIComponent(b)).length}function l(b,w,v){const y=[];let k;for(;(k=b.exec(v))!==null;)y.push({data:k[0],index:k.index,mode:w,length:k[0].length});return y}function d(b){const w=l(n.NUMERIC,a.NUMERIC,b),v=l(n.ALPHANUMERIC,a.ALPHANUMERIC,b);let y,k;return c.isKanjiModeEnabled()?(y=l(n.BYTE,a.BYTE,b),k=l(n.KANJI,a.KANJI,b)):(y=l(n.BYTE_KANJI,a.BYTE,b),k=[]),w.concat(v,y,k).sort(function(x,E){return x.index-E.index}).map(function(x){return{data:x.data,mode:x.mode,length:x.length}})}function f(b,w){switch(w){case a.NUMERIC:return t.getBitsLength(b);case a.ALPHANUMERIC:return o.getBitsLength(b);case a.KANJI:return e.getBitsLength(b);case a.BYTE:return r.getBitsLength(b)}}function p(b){return b.reduce(function(w,v){const y=w.length-1>=0?w[w.length-1]:null;return y&&y.mode===v.mode?(w[w.length-1].data+=v.data,w):(w.push(v),w)},[])}function h(b){const w=[];for(let v=0;v<b.length;v++){const y=b[v];switch(y.mode){case a.NUMERIC:w.push([y,{data:y.data,mode:a.ALPHANUMERIC,length:y.length},{data:y.data,mode:a.BYTE,length:y.length}]);break;case a.ALPHANUMERIC:w.push([y,{data:y.data,mode:a.BYTE,length:y.length}]);break;case a.KANJI:w.push([y,{data:y.data,mode:a.BYTE,length:s(y.data)}]);break;case a.BYTE:w.push([{data:y.data,mode:a.BYTE,length:s(y.data)}])}}return w}function m(b,w){const v={},y={start:{}};let k=["start"];for(let M=0;M<b.length;M++){const x=b[M],E=[];for(let T=0;T<x.length;T++){const $=x[T],P=""+M+T;E.push(P),v[P]={node:$,lastCount:0},y[P]={};for(let L=0;L<k.length;L++){const j=k[L];v[j]&&v[j].node.mode===$.mode?(y[j][P]=f(v[j].lastCount+$.length,$.mode)-f(v[j].lastCount,$.mode),v[j].lastCount+=$.length):(v[j]&&(v[j].lastCount=$.length),y[j][P]=f($.length,$.mode)+4+a.getCharCountIndicator($.mode,w))}}k=E}for(let M=0;M<k.length;M++)y[k[M]].end=0;return{map:y,table:v}}function g(b,w){let v;const y=a.getBestModeForData(b);if(v=a.from(w,y),v!==a.BYTE&&v.bit<y.bit)throw new Error('"'+b+'" cannot be encoded with mode '+a.toString(v)+`.
 Suggested mode is: `+a.toString(y));switch(v===a.KANJI&&!c.isKanjiModeEnabled()&&(v=a.BYTE),v){case a.NUMERIC:return new t(b);case a.ALPHANUMERIC:return new o(b);case a.KANJI:return new e(b);case a.BYTE:return new r(b)}}u.fromArray=function(w){return w.reduce(function(v,y){return typeof y=="string"?v.push(g(y,null)):y.data&&v.push(g(y.data,y.mode)),v},[])},u.fromString=function(w,v){const y=d(w,c.isKanjiModeEnabled()),k=h(y),M=m(k,v),x=i.find_path(M.map,"start","end"),E=[];for(let T=1;T<x.length-1;T++)E.push(M.table[x[T]].node);return u.fromArray(p(E))},u.rawSplit=function(w){return u.fromArray(d(w,c.isKanjiModeEnabled()))}})(_r);const de=rt,ve=le,Dn=pn,$n=hn,Pn=vr,Ln=yr,Te=br,_e=ce,Bn=gn,se=kr,Rn=Er,Hn=gt,ye=_r;function zn(u,a){const t=u.size,o=Ln.getPositions(a);for(let r=0;r<o.length;r++){const e=o[r][0],n=o[r][1];for(let c=-1;c<=7;c++)if(!(e+c<=-1||t<=e+c))for(let i=-1;i<=7;i++)n+i<=-1||t<=n+i||(c>=0&&c<=6&&(i===0||i===6)||i>=0&&i<=6&&(c===0||c===6)||c>=2&&c<=4&&i>=2&&i<=4?u.set(e+c,n+i,!0,!0):u.set(e+c,n+i,!1,!0))}}function Nn(u){const a=u.size;for(let t=8;t<a-8;t++){const o=t%2===0;u.set(t,6,o,!0),u.set(6,t,o,!0)}}function On(u,a){const t=Pn.getPositions(a);for(let o=0;o<t.length;o++){const r=t[o][0],e=t[o][1];for(let n=-2;n<=2;n++)for(let c=-2;c<=2;c++)n===-2||n===2||c===-2||c===2||n===0&&c===0?u.set(r+n,e+c,!0,!0):u.set(r+n,e+c,!1,!0)}}function Un(u,a){const t=u.size,o=se.getEncodedBits(a);let r,e,n;for(let c=0;c<18;c++)r=Math.floor(c/3),e=c%3+t-8-3,n=(o>>c&1)===1,u.set(r,e,n,!0),u.set(e,r,n,!0)}function be(u,a,t){const o=u.size,r=Rn.getEncodedBits(a,t);let e,n;for(e=0;e<15;e++)n=(r>>e&1)===1,e<6?u.set(e,8,n,!0):e<8?u.set(e+1,8,n,!0):u.set(o-15+e,8,n,!0),e<8?u.set(8,o-e-1,n,!0):e<9?u.set(8,15-e-1+1,n,!0):u.set(8,15-e-1,n,!0);u.set(o-8,8,1,!0)}function Yn(u,a){const t=u.size;let o=-1,r=t-1,e=7,n=0;for(let c=t-1;c>0;c-=2)for(c===6&&c--;;){for(let i=0;i<2;i++)if(!u.isReserved(r,c-i)){let s=!1;n<a.length&&(s=(a[n]>>>e&1)===1),u.set(r,c-i,s),e--,e===-1&&(n++,e=7)}if(r+=o,r<0||t<=r){r-=o,o=-o;break}}}function Vn(u,a,t){const o=new Dn;t.forEach(function(i){o.put(i.mode.bit,4),o.put(i.getLength(),Hn.getCharCountIndicator(i.mode,u)),i.write(o)});const r=de.getSymbolTotalCodewords(u),e=_e.getTotalCodewordsCount(u,a),n=(r-e)*8;for(o.getLengthInBits()+4<=n&&o.put(0,4);o.getLengthInBits()%8!==0;)o.putBit(0);const c=(n-o.getLengthInBits())/8;for(let i=0;i<c;i++)o.put(i%2?17:236,8);return qn(o,u,a)}function qn(u,a,t){const o=de.getSymbolTotalCodewords(a),r=_e.getTotalCodewordsCount(a,t),e=o-r,n=_e.getBlocksCount(a,t),c=o%n,i=n-c,s=Math.floor(o/n),l=Math.floor(e/n),d=l+1,f=s-l,p=new Bn(f);let h=0;const m=new Array(n),g=new Array(n);let b=0;const w=new Uint8Array(u.buffer);for(let x=0;x<n;x++){const E=x<i?l:d;m[x]=w.slice(h,h+E),g[x]=p.encode(m[x]),h+=E,b=Math.max(b,E)}const v=new Uint8Array(o);let y=0,k,M;for(k=0;k<b;k++)for(M=0;M<n;M++)k<m[M].length&&(v[y++]=m[M][k]);for(k=0;k<f;k++)for(M=0;M<n;M++)v[y++]=g[M][k];return v}function Wn(u,a,t,o){let r;if(Array.isArray(u))r=ye.fromArray(u);else if(typeof u=="string"){let s=a;if(!s){const l=ye.rawSplit(u);s=se.getBestVersionForData(l,t)}r=ye.fromString(u,s||40)}else throw new Error("Invalid data");const e=se.getBestVersionForData(r,t);if(!e)throw new Error("The amount of data is too big to be stored in a QR Code");if(!a)a=e;else if(a<e)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+e+`.
`);const n=Vn(a,t,r),c=de.getSymbolSize(a),i=new $n(c);return zn(i,a),Nn(i),On(i,a),be(i,t,0),a>=7&&Un(i,a),Yn(i,n),isNaN(o)&&(o=Te.getBestMask(i,be.bind(null,i,t))),Te.applyMask(o,i),be(i,t,o),{modules:i,version:a,errorCorrectionLevel:t,maskPattern:o,segments:r}}mr.create=function(a,t){if(typeof a>"u"||a==="")throw new Error("No input text");let o=ve.M,r,e;return typeof t<"u"&&(o=ve.from(t.errorCorrectionLevel,ve.M),r=se.from(t.version),e=Te.from(t.maskPattern),t.toSJISFunc&&de.setToSJISFunction(t.toSJISFunc)),Wn(a,r,o,e)};var jr={},Le={};(function(u){function a(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let o=t.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+t);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(e){return[e,e]}))),o.length===6&&o.push("F","F");const r=parseInt(o.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+o.slice(0,6).join("")}}u.getOptions=function(o){o||(o={}),o.color||(o.color={});const r=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,e=o.width&&o.width>=21?o.width:void 0,n=o.scale||4;return{width:e,scale:e?4:n,margin:r,color:{dark:a(o.color.dark||"#000000ff"),light:a(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},u.getScale=function(o,r){return r.width&&r.width>=o+r.margin*2?r.width/(o+r.margin*2):r.scale},u.getImageWidth=function(o,r){const e=u.getScale(o,r);return Math.floor((o+r.margin*2)*e)},u.qrToImageData=function(o,r,e){const n=r.modules.size,c=r.modules.data,i=u.getScale(n,e),s=Math.floor((n+e.margin*2)*i),l=e.margin*i,d=[e.color.light,e.color.dark];for(let f=0;f<s;f++)for(let p=0;p<s;p++){let h=(f*s+p)*4,m=e.color.light;if(f>=l&&p>=l&&f<s-l&&p<s-l){const g=Math.floor((f-l)/i),b=Math.floor((p-l)/i);m=d[c[g*n+b]?1:0]}o[h++]=m.r,o[h++]=m.g,o[h++]=m.b,o[h]=m.a}}})(Le);(function(u){const a=Le;function t(r,e,n){r.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=n,e.width=n,e.style.height=n+"px",e.style.width=n+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}u.render=function(e,n,c){let i=c,s=n;typeof i>"u"&&(!n||!n.getContext)&&(i=n,n=void 0),n||(s=o()),i=a.getOptions(i);const l=a.getImageWidth(e.modules.size,i),d=s.getContext("2d"),f=d.createImageData(l,l);return a.qrToImageData(f.data,e,i),t(d,s,l),d.putImageData(f,0,0),s},u.renderToDataURL=function(e,n,c){let i=c;typeof i>"u"&&(!n||!n.getContext)&&(i=n,n=void 0),i||(i={});const s=u.render(e,n,i),l=i.type||"image/png",d=i.rendererOpts||{};return s.toDataURL(l,d.quality)}})(jr);var Ir={};const Kn=Le;function We(u,a){const t=u.a/255,o=a+'="'+u.hex+'"';return t<1?o+" "+a+'-opacity="'+t.toFixed(2).slice(1)+'"':o}function we(u,a,t){let o=u+a;return typeof t<"u"&&(o+=" "+t),o}function Gn(u,a,t){let o="",r=0,e=!1,n=0;for(let c=0;c<u.length;c++){const i=Math.floor(c%a),s=Math.floor(c/a);!i&&!e&&(e=!0),u[c]?(n++,c>0&&i>0&&u[c-1]||(o+=e?we("M",i+t,.5+s+t):we("m",r,0),r=0,e=!1),i+1<a&&u[c+1]||(o+=we("h",n),n=0)):r++}return o}Ir.render=function(a,t,o){const r=Kn.getOptions(t),e=a.modules.size,n=a.modules.data,c=e+r.margin*2,i=r.color.light.a?"<path "+We(r.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",s="<path "+We(r.color.dark,"stroke")+' d="'+Gn(n,e,r.margin)+'"/>',l='viewBox="0 0 '+c+" "+c+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+l+' shape-rendering="crispEdges">'+i+s+`</svg>
`;return typeof o=="function"&&o(null,f),f};const Qn=dn,Me=mr,Sr=jr,Xn=Ir;function Be(u,a,t,o,r){const e=[].slice.call(arguments,1),n=e.length,c=typeof e[n-1]=="function";if(!c&&!Qn())throw new Error("Callback required as last argument");if(c){if(n<2)throw new Error("Too few arguments provided");n===2?(r=t,t=a,a=o=void 0):n===3&&(a.getContext&&typeof r>"u"?(r=o,o=void 0):(r=o,o=t,t=a,a=void 0))}else{if(n<1)throw new Error("Too few arguments provided");return n===1?(t=a,a=o=void 0):n===2&&!a.getContext&&(o=t,t=a,a=void 0),new Promise(function(i,s){try{const l=Me.create(t,o);i(u(l,a,o))}catch(l){s(l)}})}try{const i=Me.create(t,o);r(null,u(i,a,o))}catch(i){r(i)}}Xt.create=Me.create;Xt.toCanvas=Be.bind(null,Sr.render);Xt.toDataURL=Be.bind(null,Sr.renderToDataURL);Xt.toString=Be.bind(null,function(u,a,t){return Xn.render(u,t)});var Fr={exports:{}},Ar={exports:{}};(function(){var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a={rotl:function(t,o){return t<<o|t>>>32-o},rotr:function(t,o){return t<<32-o|t>>>o},endian:function(t){if(t.constructor==Number)return a.rotl(t,8)&16711935|a.rotl(t,24)&4278255360;for(var o=0;o<t.length;o++)t[o]=a.endian(t[o]);return t},randomBytes:function(t){for(var o=[];t>0;t--)o.push(Math.floor(Math.random()*256));return o},bytesToWords:function(t){for(var o=[],r=0,e=0;r<t.length;r++,e+=8)o[e>>>5]|=t[r]<<24-e%32;return o},wordsToBytes:function(t){for(var o=[],r=0;r<t.length*32;r+=8)o.push(t[r>>>5]>>>24-r%32&255);return o},bytesToHex:function(t){for(var o=[],r=0;r<t.length;r++)o.push((t[r]>>>4).toString(16)),o.push((t[r]&15).toString(16));return o.join("")},hexToBytes:function(t){for(var o=[],r=0;r<t.length;r+=2)o.push(parseInt(t.substr(r,2),16));return o},bytesToBase64:function(t){for(var o=[],r=0;r<t.length;r+=3)for(var e=t[r]<<16|t[r+1]<<8|t[r+2],n=0;n<4;n++)r*8+n*6<=t.length*8?o.push(u.charAt(e>>>6*(3-n)&63)):o.push("=");return o.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/ig,"");for(var o=[],r=0,e=0;r<t.length;e=++r%4)e!=0&&o.push((u.indexOf(t.charAt(r-1))&Math.pow(2,-2*e+8)-1)<<e*2|u.indexOf(t.charAt(r))>>>6-e*2);return o}};Ar.exports=a})();var Jn=Ar.exports,je={utf8:{stringToBytes:function(u){return je.bin.stringToBytes(unescape(encodeURIComponent(u)))},bytesToString:function(u){return decodeURIComponent(escape(je.bin.bytesToString(u)))}},bin:{stringToBytes:function(u){for(var a=[],t=0;t<u.length;t++)a.push(u.charCodeAt(t)&255);return a},bytesToString:function(u){for(var a=[],t=0;t<u.length;t++)a.push(String.fromCharCode(u[t]));return a.join("")}}},Ke=je;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Zn=function(u){return u!=null&&(Dr(u)||ti(u)||!!u._isBuffer)};function Dr(u){return!!u.constructor&&typeof u.constructor.isBuffer=="function"&&u.constructor.isBuffer(u)}function ti(u){return typeof u.readFloatLE=="function"&&typeof u.slice=="function"&&Dr(u.slice(0,0))}(function(){var u=Jn,a=Ke.utf8,t=Zn,o=Ke.bin,r=function(e,n){e.constructor==String?n&&n.encoding==="binary"?e=o.stringToBytes(e):e=a.stringToBytes(e):t(e)?e=Array.prototype.slice.call(e,0):!Array.isArray(e)&&e.constructor!==Uint8Array&&(e=e.toString());for(var c=u.bytesToWords(e),i=e.length*8,s=1732584193,l=-271733879,d=-1732584194,f=271733878,p=0;p<c.length;p++)c[p]=(c[p]<<8|c[p]>>>24)&16711935|(c[p]<<24|c[p]>>>8)&4278255360;c[i>>>5]|=128<<i%32,c[(i+64>>>9<<4)+14]=i;for(var h=r._ff,m=r._gg,g=r._hh,b=r._ii,p=0;p<c.length;p+=16){var w=s,v=l,y=d,k=f;s=h(s,l,d,f,c[p+0],7,-680876936),f=h(f,s,l,d,c[p+1],12,-389564586),d=h(d,f,s,l,c[p+2],17,606105819),l=h(l,d,f,s,c[p+3],22,-1044525330),s=h(s,l,d,f,c[p+4],7,-176418897),f=h(f,s,l,d,c[p+5],12,1200080426),d=h(d,f,s,l,c[p+6],17,-1473231341),l=h(l,d,f,s,c[p+7],22,-45705983),s=h(s,l,d,f,c[p+8],7,1770035416),f=h(f,s,l,d,c[p+9],12,-1958414417),d=h(d,f,s,l,c[p+10],17,-42063),l=h(l,d,f,s,c[p+11],22,-1990404162),s=h(s,l,d,f,c[p+12],7,1804603682),f=h(f,s,l,d,c[p+13],12,-40341101),d=h(d,f,s,l,c[p+14],17,-1502002290),l=h(l,d,f,s,c[p+15],22,1236535329),s=m(s,l,d,f,c[p+1],5,-165796510),f=m(f,s,l,d,c[p+6],9,-1069501632),d=m(d,f,s,l,c[p+11],14,643717713),l=m(l,d,f,s,c[p+0],20,-373897302),s=m(s,l,d,f,c[p+5],5,-701558691),f=m(f,s,l,d,c[p+10],9,38016083),d=m(d,f,s,l,c[p+15],14,-660478335),l=m(l,d,f,s,c[p+4],20,-405537848),s=m(s,l,d,f,c[p+9],5,568446438),f=m(f,s,l,d,c[p+14],9,-1019803690),d=m(d,f,s,l,c[p+3],14,-187363961),l=m(l,d,f,s,c[p+8],20,1163531501),s=m(s,l,d,f,c[p+13],5,-1444681467),f=m(f,s,l,d,c[p+2],9,-51403784),d=m(d,f,s,l,c[p+7],14,1735328473),l=m(l,d,f,s,c[p+12],20,-1926607734),s=g(s,l,d,f,c[p+5],4,-378558),f=g(f,s,l,d,c[p+8],11,-2022574463),d=g(d,f,s,l,c[p+11],16,1839030562),l=g(l,d,f,s,c[p+14],23,-35309556),s=g(s,l,d,f,c[p+1],4,-1530992060),f=g(f,s,l,d,c[p+4],11,1272893353),d=g(d,f,s,l,c[p+7],16,-155497632),l=g(l,d,f,s,c[p+10],23,-1094730640),s=g(s,l,d,f,c[p+13],4,681279174),f=g(f,s,l,d,c[p+0],11,-358537222),d=g(d,f,s,l,c[p+3],16,-722521979),l=g(l,d,f,s,c[p+6],23,76029189),s=g(s,l,d,f,c[p+9],4,-640364487),f=g(f,s,l,d,c[p+12],11,-421815835),d=g(d,f,s,l,c[p+15],16,530742520),l=g(l,d,f,s,c[p+2],23,-995338651),s=b(s,l,d,f,c[p+0],6,-198630844),f=b(f,s,l,d,c[p+7],10,1126891415),d=b(d,f,s,l,c[p+14],15,-1416354905),l=b(l,d,f,s,c[p+5],21,-57434055),s=b(s,l,d,f,c[p+12],6,1700485571),f=b(f,s,l,d,c[p+3],10,-1894986606),d=b(d,f,s,l,c[p+10],15,-1051523),l=b(l,d,f,s,c[p+1],21,-2054922799),s=b(s,l,d,f,c[p+8],6,1873313359),f=b(f,s,l,d,c[p+15],10,-30611744),d=b(d,f,s,l,c[p+6],15,-1560198380),l=b(l,d,f,s,c[p+13],21,1309151649),s=b(s,l,d,f,c[p+4],6,-145523070),f=b(f,s,l,d,c[p+11],10,-1120210379),d=b(d,f,s,l,c[p+2],15,718787259),l=b(l,d,f,s,c[p+9],21,-343485551),s=s+w>>>0,l=l+v>>>0,d=d+y>>>0,f=f+k>>>0}return u.endian([s,l,d,f])};r._ff=function(e,n,c,i,s,l,d){var f=e+(n&c|~n&i)+(s>>>0)+d;return(f<<l|f>>>32-l)+n},r._gg=function(e,n,c,i,s,l,d){var f=e+(n&i|c&~i)+(s>>>0)+d;return(f<<l|f>>>32-l)+n},r._hh=function(e,n,c,i,s,l,d){var f=e+(n^c^i)+(s>>>0)+d;return(f<<l|f>>>32-l)+n},r._ii=function(e,n,c,i,s,l,d){var f=e+(c^(n|~i))+(s>>>0)+d;return(f<<l|f>>>32-l)+n},r._blocksize=16,r._digestsize=16,Fr.exports=function(e,n){if(e==null)throw new Error("Illegal argument "+e);var c=u.wordsToBytes(r(e,n));return n&&n.asBytes?c:n&&n.asString?o.bytesToString(c):u.bytesToHex(c)}})();var ei=Fr.exports;const ri=hr(ei);class lt{static getMixinKey(a){return this.MIXIN_KEY_ENC_TAB.map(t=>a[t]).join("").slice(0,32)}static encWbi(a,t,o){const r=this.getMixinKey(t+o),e=Math.round(Date.now()/1e3),n=/[!'()*]/g;a={...a,wts:e};const c=Object.keys(a).sort().map(s=>{const l=a[s].toString().replace(n,"");return`${encodeURIComponent(s)}=${encodeURIComponent(l)}`}).join("&"),i=ri(c+r);return c+"&w_rid="+i}static getWbiKeysFromConfig(a){var r,e,n,c;if(!((e=(r=a==null?void 0:a.bilibiliLogin)==null?void 0:r.userInfo)!=null&&e.wbi_img))return null;const{img_url:t,sub_url:o}=a.bilibiliLogin.userInfo.wbi_img;return{imgKey:((n=t.split("/").pop())==null?void 0:n.split(".")[0])||"",subKey:((c=o.split("/").pop())==null?void 0:c.split(".")[0])||""}}static async proxyRequest(a,t={}){try{const r=await(await fetch(this.API.PROXY,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:a,method:"GET",timeout:7e3,contentType:"application/json",headers:Object.entries(t).map(([e,n])=>({[e]:n}))})})).json();if(r.code!==0)throw new Error(": "+r.msg);return JSON.parse(r.data.body)}catch(o){throw console.error(":",o),new Error("")}}static extractVideoId(a){try{const t=new URL(a);if(t.hostname==="b23.tv")return null;const o=t.pathname.match(/\/(BV[\w]+)/);if(o)return{bvid:o[1]};const r=t.searchParams.get("aid"),e=t.searchParams.get("bvid");return r?{aid:r}:e?{bvid:e}:null}catch{return null}}static formatDuration(a){const t=Math.floor(a/3600),o=Math.floor(a%3600/60),r=a%60;return t>0?`${t}:${o.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`:`${o}:${r.toString().padStart(2,"0")}`}static async generateQRCode(a){try{return await Xt.toDataURL(a,{width:200,margin:2,color:{dark:"#000000",light:"#ffffff"}})}catch(t){throw console.error(":",t),new Error("")}}static extractSessData(a){try{return new URL(a).searchParams.get("SESSDATA")}catch{return null}}static async getVideoInfo(a){const t=this.extractVideoId(a);if(!t)return null;try{const o=new URLSearchParams(t),r=await this.proxyRequest(`${this.API.VIDEO_INFO}?${o.toString()}`);if(r.code===0){const e=r.data;return{url:a,title:e.title,artist:e.owner.name,artistIcon:e.owner.face,duration:this.formatDuration(e.duration),thumbnail:e.pic,aid:String(e.aid),bvid:e.bvid,cid:String(e.cid)}}return null}catch(o){return console.error(":",o),null}}static async getLoginQRCode(){try{const a=await this.proxyRequest(this.API.QR_LOGIN);if(a.code!==0)throw new Error(": "+a.message);if(a.data)return{qrcodeData:await this.generateQRCode(a.data.url),qrcode_key:a.data.qrcode_key};throw new Error("")}catch{throw new Error("")}}static async checkQRCodeStatus(a){try{const t=await this.proxyRequest(`${this.API.QR_POLL}?qrcode_key=${a}`);if(t.code===0&&t.data.code===0){const o=this.extractSessData(t.data.url),r=o?await this.getUserInfo(o):null;return{code:0,message:"",url:t.data.url,refresh_token:t.data.refresh_token,timestamp:t.data.timestamp,userInfo:r}}return{code:t.data.code,message:t.data.message||""}}catch{throw new Error("")}}static async getUserInfo(a){try{const t=await this.proxyRequest(this.API.USER_INFO,{Cookie:`SESSDATA=${a}`});if(t.code===0){const{face:o,level_info:r,mid:e,uname:n,wbi_img:c}=t.data;return{face:o,level_info:r,mid:e,uname:n,wbi_img:c?{img_url:c.img_url,sub_url:c.sub_url}:void 0}}throw new Error(t.message||"")}catch{throw new Error("")}}static async getVideoUrl(a,t,o,r){var i,s,l,d,f;const e={bvid:a,cid:t,qn:o,fnval:16,fnver:0,fourk:1,platform:"html5",high_quality:1},n=this.getWbiKeysFromConfig(r);if(!n)throw new Error("WBI");const c=this.encWbi(e,n.imgKey,n.subKey);console.log("[] API:",c);try{const p=(i=r.bilibiliLogin)!=null&&i.url?this.extractSessData(r.bilibiliLogin.url):null,h={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",Referer:"https://www.bilibili.com",Origin:"https://www.bilibili.com"};p&&(h.Cookie=`SESSDATA=${p}`);const m=await this.proxyRequest(`${this.API.VIDEO_STREAM}?${c}`,h);if(m.data.durl)m.data.dash={video:[{id:m.data.quality,baseUrl:decodeURIComponent(m.data.durl[0].url),codecs:"avc1.640032",bandwidth:m.data.durl[0].size,frameRate:"30"}],audio:[]};else if(m.data.dash)m.data.dash.video&&(m.data.dash.video=m.data.dash.video.map(g=>({...g,baseUrl:decodeURIComponent(g.baseUrl)}))),m.data.dash.audio&&(m.data.dash.audio=m.data.dash.audio.map(g=>({...g,baseUrl:decodeURIComponent(g.baseUrl)})));else throw new Error("");return console.log("[] :",{:m.code,:m.message,:{:m.data.quality,:m.data.format,:Math.floor(m.data.timelength/1e3)+"",:m.data.accept_description,:m.data.video_codecid,DASH:{:(l=(s=m.data.dash)==null?void 0:s.video)==null?void 0:l.map(g=>({:g.id,:g.codecs,:g.bandwidth,:g.frameRate,:g.baseUrl})),:(f=(d=m.data.dash)==null?void 0:d.audio)==null?void 0:f.map(g=>({:g.codecs,:g.bandwidth,:g.baseUrl}))}}}),m}catch(p){throw console.error("[] :",p),p}}static selectBestStream(a,t=null){return a!=null&&a.length?a.sort((r,e)=>{if(t){if(r.id===t)return-1;if(e.id===t)return 1}return e.id-r.id||e.bandwidth-r.bandwidth})[0]:null}static async getProcessedVideoStream(a,t,o,r){var s;let e=null,n=null,c=0;const i=3;for(;c<i;)try{const l=await this.getVideoUrl(a,t,o,r);if(!l.data.dash&&!l.data.durl)throw new Error("");if(l.data.durl)e={id:l.data.quality,baseUrl:l.data.durl[0].url,codecs:"avc1.640032",bandwidth:l.data.durl[0].size,frameRate:"30"},n=null;else{const f=l.data.dash.video||[],p=l.data.dash.audio||[],h=c>0?null:o;e=this.selectBestStream(f,h),n=this.selectBestStream(p)}if(!e)throw new Error("");const d={Referer:`https://www.bilibili.com/video/${a}/`,"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"};if((s=r.bilibiliLogin)!=null&&s.url){const f=new URL(r.bilibiliLogin.url),p=Array.from(f.searchParams.entries()).filter(([h])=>h!=="url").map(([h,m])=>`${h}=${m}`).join("; ");p&&(d.Cookie=p)}return{video:{url:e.baseUrl,quality:e.id,codecs:e.codecs,bandwidth:e.bandwidth,frameRate:e.frameRate},audio:n?{url:n.baseUrl,codecs:n.codecs,bandwidth:n.bandwidth}:void 0,headers:{...d,Origin:"https://www.bilibili.com"}}}catch(l){if(console.error(`[]  ( ${c+1}/${i}):`,l),c++,c===i)throw new Error(`: ${l.message}`);await new Promise(d=>setTimeout(d,1e3*c))}throw new Error("")}}Q(lt,"API",{BASE:"https://api.bilibili.com",PROXY:"/api/network/forwardProxy",QR_LOGIN:"https://passport.bilibili.com/x/passport-login/web/qrcode/generate",QR_POLL:"https://passport.bilibili.com/x/passport-login/web/qrcode/poll",USER_INFO:"https://api.bilibili.com/x/web-interface/nav",VIDEO_INFO:"https://api.bilibili.com/x/web-interface/view",VIDEO_PAGES:"https://api.bilibili.com/x/player/pagelist",VIDEO_STREAM:"https://api.bilibili.com/x/player/wbi/playurl"}),Q(lt,"MIXIN_KEY_ENC_TAB",[46,47,18,2,53,8,23,32,15,50,10,31,58,3,45,35,27,43,5,49,33,9,42,19,29,28,14,39,12,38,41,13,37,48,7,16,24,55,40,61,26,17,0,1,60,51,30,4,22,25,54,21,56,59,6,63,57,62,11,36,20,34,44,52]);class ht{static convertToFileUrl(a){return a.startsWith("http://")||a.startsWith("https://")||a.startsWith("file://")?a:/^[a-zA-Z]:\\/.test(a)?"file:///"+a.replace(/\\/g,"/"):"file://"+a}static getCachedInfo(a){try{const t=localStorage.getItem(`media_info_${a}`);if(!t)return null;const{timestamp:o,info:r}=JSON.parse(t);return Date.now()-o>this.CACHE_EXPIRY?(localStorage.removeItem(`media_info_${a}`),null):r}catch{return null}}static cacheInfo(a,t){if(t)try{localStorage.setItem(`media_info_${a}`,JSON.stringify({timestamp:Date.now(),info:t}))}catch(o){console.error("Failed to cache media info:",o)}}static cleanupCache(){try{const a=Date.now();for(let t=0;t<localStorage.length;t++){const o=localStorage.key(t);if(o!=null&&o.startsWith("media_info_"))try{const{timestamp:r}=JSON.parse(localStorage.getItem(o));a-r>this.CACHE_EXPIRY&&localStorage.removeItem(o)}catch{localStorage.removeItem(o)}}}catch(a){console.warn("Failed to cleanup cache:",a)}}static async getMediaInfoFromElement(a){return new Promise((t,o)=>{const r=this.convertToFileUrl(a),e=this.getMediaType(a),n=document.createElement(e);n.style.display="none",document.body.appendChild(n);let c;const i=async()=>{const d=this.formatDuration(n.duration);let f="";if(n instanceof HTMLVideoElement)try{n.currentTime=n.duration/2,await new Promise(m=>n.addEventListener("seeked",m,{once:!0}));const p=document.createElement("canvas");p.width=n.videoWidth,p.height=n.videoHeight,p.getContext("2d").drawImage(n,0,0,p.width,p.height),f=p.toDataURL("image/jpeg",.7)}catch(p){console.warn("Failed to get video thumbnail:",p)}l(),t({title:this.extractTitleFromUrl(a),duration:d,thumbnail:f,artist:"",artistIcon:""})},s=()=>{l(),o(new Error("Failed to load media"))},l=()=>{n.removeEventListener("loadedmetadata",i),n.removeEventListener("error",s),n.parentNode&&n.parentNode.removeChild(n),c&&clearTimeout(c)};c=window.setTimeout(()=>{l(),o(new Error("Media load timeout"))},1e4),n.addEventListener("loadedmetadata",i),n.addEventListener("error",s),n.src=r,n.load()})}static extractTitleFromUrl(a){try{const o=new URL(a).pathname.split("/"),r=o[o.length-1];return decodeURIComponent(r.split(".")[0])||""}catch{return""}}static formatDuration(a){const t=Math.floor(a/3600),o=Math.floor(a%3600/60),r=Math.floor(a%60);return t>0?`${t}:${o.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`:`${o}:${r.toString().padStart(2,"0")}`}static getMediaType(a){const t=[".mp4",".webm",".ogg",".mov"],o=[".mp3",".wav",".aac",".m4a"];return t.some(r=>a.toLowerCase().endsWith(r))?"video":o.some(r=>a.toLowerCase().endsWith(r))?"audio":"video"}static async createMediaItem(a,t){try{const o=this.convertToFileUrl(a);let r=this.getCachedInfo(o);if(r||(o.includes("bilibili.com")?t!=null&&t.aid||t!=null&&t.bvid?r={...await lt.getVideoInfo(o),...t}:r=await lt.getVideoInfo(o):r=await this.getMediaInfoFromElement(o),r&&this.cacheInfo(o,r)),!r)return null;const e=o.includes("bilibili.com")?"bilibili":this.getMediaType(o);return{id:`media-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:r.title,artist:r.artist,artistIcon:r.artistIcon,duration:r.duration,thumbnail:r.thumbnail||(e==="audio"?this.DEFAULT_AUDIO_THUMBNAIL:""),url:o,type:e,isPinned:!1,isFavorite:!1,aid:r.aid,bvid:r.bvid,cid:r.cid}}catch(o){return console.error("Failed to create media item:",o),null}}static getMediaInfoFromItems(a){return a.map(t=>({url:t.url,...t.aid?{aid:t.aid}:{},...t.bvid?{bvid:t.bvid}:{},...t.cid?{cid:t.cid}:{}}))}static async createMediaItems(a){return(await Promise.all(a.map(o=>this.createMediaItem(o.url,o)))).filter(o=>o!==null)}}Q(ht,"DEFAULT_AUDIO_THUMBNAIL",`data:image/svg+xml;charset=utf-8,<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <path d="M628.905386 769.860427 628.905386 482.261019l169.381759-27.464779C771.308637 311.811584 645.822916 203.633728 494.993179 203.633728c-170.51599 0-308.738475 138.222485-308.738475 308.738875 0 170.516989 138.222485 308.738875 308.738475 308.738875 16.540186 0 32.756191-1.34209 48.589456-3.839397 12.391598-20.573051 34.625524-37.084856 62.858182-44.145869C613.897561 771.276467 621.429455 770.182208 628.905386 769.860427zM551.718919 228.830645l-33.079572 144.922942-33.078373 0-23.62798-144.922942C496.589896 211.497397 551.718919 228.830645 551.718919 228.830645zM494.993179 626.995689c-63.300482 0-114.622086-51.317007-114.622086-114.622886 0-63.30348 51.321604-114.622486 114.622086-114.622486 63.306478 0 114.622486 51.319006 114.622486 114.622486C609.615665 575.678482 558.299457 626.995689 494.993179 626.995689zM494.993179 424.978057c-48.20112 0-87.394147 39.192827-87.394147 87.394546 0 48.20112 39.192827 87.395546 87.394147 87.395546 48.201719 0 87.395946-39.194226 87.395946-87.395546C582.389124 464.170884 543.194698 424.978057 494.993179 424.978057zM494.993179 574.79708c-34.421063 0-62.423477-28.002015-62.423477-62.424476 0-34.421662 28.011408-62.424076 62.423477-62.424076 34.432055 0 62.416082 28.002414 62.416082 62.424076C557.409061 546.795265 529.425034 574.79708 494.993179 574.79708zM534.528574 870.531771c1.499983 8.297374 4.789753 16.008146 9.524542 22.939447-16.073102 2.058604-32.429013 3.239803-49.050144 3.239803-211.934708 0-384.347812-172.417701-384.347812-384.338419 0-211.922716 172.413104-384.338419 384.338019-384.338419 188.118456 0 345.001689 135.905456 377.892189 314.664258l-37.310503 6.059292c-29.969681-160.790984-171.236502-282.919381-340.581686-282.919381-191.084445 0-346.53365 155.451604-346.53365 346.53425 0 191.080048 155.449205 346.53425 346.53365 346.53425 12.796724 0 25.414169-0.748493 37.859731-2.104573C532.968631 861.361189 533.461497 865.948079 534.528574 870.531771zM912.096583 463.425989l0 333.227272c0 27.59629-20.573051 49.609165-52.658098 57.716668-35.234911 8.736077-69.250848-6.021917-75.997274-33.022611-6.760416-27.057655 16.31294-56.065787 51.53386-64.879811 15.920206-3.931335 31.587384-3.128879 44.698494 1.494986L879.673565 557.20001l-180.148459 32.927675-0.834434 249.757065-0.036975 0c-0.156894 23.646767-21.482435 46.868223-52.156438 54.45388-34.814196 8.759061-71.280472-7.807706-75.193819-32.597899-6.691463-26.747865 16.124068-55.470191 51.00222-64.201272 15.699356-3.904353 31.039755-3.119885 43.933013 1.402049L666.238674 503.300354 912.096583 463.425989z" fill="currentColor" style="color:var(--b3-theme-primary)"/></svg>`),Q(ht,"CACHE_EXPIRY",24*60*60*1e3);function Ge(u,a,t){const o=u.slice();return o[31]=a[t],o}function Qe(u,a,t){const o=u.slice();return o[34]=a[t],o}function ni(u){let a,t=u[34].name+"",o,r,e;function n(){return u[17](u[34])}function c(...i){return u[18](u[34],...i)}return{c(){a=R("button"),o=K(t),F(a,"class","tab"),it(a,"active",u[2]===u[34].id)},m(i,s){q(i,a,s),A(a,o),r||(e=[G(a,"click",n),G(a,"contextmenu",fr(c))],r=!0)},p(i,s){u=i,s[0]&2&&t!==(t=u[34].name+"")&&tt(o,t),s[0]&6&&it(a,"active",u[2]===u[34].id)},d(i){i&&V(a),r=!1,et(e)}}}function ii(u){let a,t,o,r,e,n;function c(...s){return u[15](u[34],...s)}function i(...s){return u[16](u[34],...s)}return{c(){a=R("div"),t=R("input"),F(t,"id",o="tab-edit-"+u[34].id),F(t,"type","text"),F(t,"class","tab-input"),t.value=r=u[34].name,F(a,"class","tab-edit-wrapper")},m(s,l){q(s,a,l),A(a,t),e||(n=[G(t,"blur",c),G(t,"keydown",i)],e=!0)},p(s,l){u=s,l[0]&2&&o!==(o="tab-edit-"+u[34].id)&&F(t,"id",o),l[0]&2&&r!==(r=u[34].name)&&t.value!==r&&(t.value=r)},d(s){s&&V(a),e=!1,et(n)}}}function Xe(u,a){let t,o;function r(c,i){return c[34].isEditing?ii:ni}let e=r(a),n=e(a);return{key:u,first:null,c(){t=xe(),n.c(),o=xe(),this.first=t},m(c,i){q(c,t,i),n.m(c,i),q(c,o,i)},p(c,i){a=c,e===(e=r(a))&&n?n.p(a,i):(n.d(1),n=e(a),n&&(n.c(),n.m(o.parentNode,o)))},d(c){c&&(V(t),V(o)),n.d(c)}}}function ai(u){let a,t,o;return{c(){a=R("button"),a.textContent="+",F(a,"class","tab tab-add")},m(r,e){q(r,a,e),t||(o=G(a,"click",u[11].add),t=!0)},p:J,d(r){r&&V(a),t=!1,o()}}}function oi(u){let a,t,o;return{c(){a=R("input"),F(a,"type","text"),F(a,"class","tab-input"),F(a,"placeholder","")},m(r,e){q(r,a,e),u[19](a),t||(o=[G(a,"blur",u[11].save),G(a,"keydown",u[11].save)],t=!0)},p:J,d(r){r&&V(a),u[19](null),t=!1,et(o)}}}function si(u){let a,t=[],o=new Map,r=Tt(u[3].items);const e=n=>n[31].id;for(let n=0;n<r.length;n+=1){let c=Ge(u,r,n),i=e(c);o.set(i,t[n]=Ze(i,c))}return{c(){a=R("div");for(let n=0;n<t.length;n+=1)t[n].c();F(a,"class","playlist-items")},m(n,c){q(n,a,c);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(a,null)},p(n,c){c[0]&4617&&(r=Tt(n[3].items),t=Ae(t,c,e,1,n,r,o,a,Fe,Ze,null,Ge))},d(n){n&&V(a);for(let c=0;c<t.length;c+=1)t[c].d()}}}function li(u){let a;return{c(){a=R("div"),a.textContent="",F(a,"class","playlist-empty")},m(t,o){q(t,a,o)},p:J,d(t){t&&V(a)}}}function Je(u){let a,t,o,r,e,n,c=u[31].artist+"",i;return{c(){a=R("div"),t=R("img"),e=U(),n=R("span"),i=K(c),F(t,"class","artist-icon"),mt(t.src,o=u[31].artistIcon||"/images/default-avatar.png")||F(t,"src",o),F(t,"alt",r=u[31].artist),F(a,"class","item-artist")},m(s,l){q(s,a,l),A(a,t),A(a,e),A(a,n),A(n,i)},p(s,l){l[0]&8&&!mt(t.src,o=s[31].artistIcon||"/images/default-avatar.png")&&F(t,"src",o),l[0]&8&&r!==(r=s[31].artist)&&F(t,"alt",r),l[0]&8&&c!==(c=s[31].artist+"")&&tt(i,c)},d(s){s&&V(a)}}}function Ze(u,a){let t,o,r,e,n,c,i,s=(a[31].duration||"--:--")+"",l,d,f,p,h=a[31].title+"",m,g,b,w,v,y,k=a[31].url+"",M,x,E,T,$,P=a[31].artist&&Je(a);function L(){return a[20](a[31])}function j(...I){return a[21](a[31],...I)}return{key:u,first:null,c(){var I;t=R("div"),o=R("div"),r=R("img"),c=U(),i=R("span"),l=K(s),d=U(),f=R("div"),p=R("div"),m=K(h),b=U(),P&&P.c(),w=U(),v=R("div"),y=R("div"),M=K(k),E=U(),mt(r.src,e=a[31].thumbnail)||F(r,"src",e),F(r,"alt",n=a[31].title),F(i,"class","duration"),F(o,"class","item-thumbnail"),F(p,"class","item-title"),F(p,"title",g=a[31].title),F(y,"class","item-url"),F(y,"title",x=a[31].url),F(v,"class","item-meta-group"),F(f,"class","item-info"),F(t,"class","playlist-item"),it(t,"active",((I=a[0])==null?void 0:I.id)===a[31].id),this.first=t},m(I,S){q(I,t,S),A(t,o),A(o,r),A(o,c),A(o,i),A(i,l),A(t,d),A(t,f),A(f,p),A(p,m),A(f,b),P&&P.m(f,null),A(f,w),A(f,v),A(v,y),A(y,M),A(t,E),T||($=[G(t,"click",L),G(t,"contextmenu",fr(j))],T=!0)},p(I,S){var H;a=I,S[0]&8&&!mt(r.src,e=a[31].thumbnail)&&F(r,"src",e),S[0]&8&&n!==(n=a[31].title)&&F(r,"alt",n),S[0]&8&&s!==(s=(a[31].duration||"--:--")+"")&&tt(l,s),S[0]&8&&h!==(h=a[31].title+"")&&tt(m,h),S[0]&8&&g!==(g=a[31].title)&&F(p,"title",g),a[31].artist?P?P.p(a,S):(P=Je(a),P.c(),P.m(f,w)):P&&(P.d(1),P=null),S[0]&8&&k!==(k=a[31].url+"")&&tt(M,k),S[0]&8&&x!==(x=a[31].url)&&F(y,"title",x),S[0]&9&&it(t,"active",((H=a[0])==null?void 0:H.id)===a[31].id)},d(I){I&&V(t),P&&P.d(),T=!1,et($)}}}function tr(u){let a,t,o;return{c(){a=R("span"),a.textContent="",F(a,"class","clear-icon")},m(r,e){q(r,a,e),t||(o=G(a,"click",u[24]),t=!0)},p:J,d(r){r&&V(a),t=!1,o()}}}function ci(u){let a,t,o,r,e,n,c,i,s,l=[],d=new Map,f,p,h,m,g,b,w,v,y,k,M,x,E,T=Tt(u[1]);const $=_=>_[34].id;for(let _=0;_<T.length;_+=1){let D=Qe(u,T,_),B=$(D);d.set(B,l[_]=Xe(B,D))}function P(_,D){return _[4]?oi:ai}let L=P(u),j=L(u);function I(_,D){return _[7]?si:li}let S=I(u),H=S(u),C=u[5]&&tr(u);return{c(){a=R("div"),t=R("div"),o=R("h3"),o.textContent="",r=U(),e=R("span"),n=K(u[7]),c=K(" "),i=U(),s=R("div");for(let _=0;_<l.length;_+=1)l[_].c();f=U(),p=R("div"),j.c(),h=U(),m=R("div"),H.c(),g=U(),b=R("div"),w=R("div"),v=R("input"),y=U(),C&&C.c(),k=U(),M=R("button"),M.textContent="",F(e,"class","playlist-count"),F(t,"class","playlist-header"),F(p,"class","tab-add-wrapper"),F(s,"class","playlist-tabs"),F(m,"class","playlist-content"),F(v,"type","text"),F(v,"class","tab-input playlist-input"),F(v,"placeholder","..."),F(w,"class","input-wrapper"),F(M,"class","add-btn"),F(b,"class","playlist-footer"),F(a,"class","playlist")},m(_,D){q(_,a,D),A(a,t),A(t,o),A(t,r),A(t,e),A(e,n),A(e,c),A(a,i),A(a,s);for(let B=0;B<l.length;B+=1)l[B]&&l[B].m(s,null);A(s,f),A(s,p),j.m(p,null),A(a,h),A(a,m),H.m(m,null),A(a,g),A(a,b),A(b,w),A(w,v),He(v,u[5]),A(w,y),C&&C.m(w,null),A(b,k),A(b,M),x||(E=[G(v,"input",u[22]),G(v,"keydown",u[23]),G(M,"click",u[25])],x=!0)},p(_,D){D[0]&128&&tt(n,_[7]),D[0]&2310&&(T=Tt(_[1]),l=Ae(l,D,$,1,_,T,d,s,Fe,Xe,f,Qe)),L===(L=P(_))&&j?j.p(_,D):(j.d(1),j=L(_),j&&(j.c(),j.m(p,null))),S===(S=I(_))&&H?H.p(_,D):(H.d(1),H=S(_),H&&(H.c(),H.m(m,null))),D[0]&32&&v.value!==_[5]&&He(v,_[5]),_[5]?C?C.p(_,D):(C=tr(_),C.c(),C.m(w,null)):C&&(C.d(1),C=null)},i:J,o:J,d(_){_&&V(a);for(let D=0;D<l.length;D+=1)l[D].d();j.d(),H.d(),C&&C.d(),x=!1,et(E)}}}function ui(u,a,t){let o,r,{items:e=[]}=a,{currentItem:n=null}=a,{configManager:c}=a,i=[],s="default",l=!1,d="",f;const p=Se();let h,m=null;async function g(C){var _,D;if(m===C.id){clearTimeout(h),m=null;try{if(C.type==="bilibili"&&C.bvid&&C.cid){const B=await c.getConfig(),N=await lt.getProcessedVideoStream(C.bvid,C.cid,0,B),O={...C,url:N.video.url,audioUrl:(_=N.audio)==null?void 0:_.url,headers:N.headers},X={type:"bilibili",bvid:O.bvid,originalUrl:O.originalUrl||O.url,audioUrl:O.audioUrl,headers:O.headers,title:O.title,autoplay:(D=B.settings)==null?void 0:D.autoplay,startTime:0};p("play",{...O,playOptions:X});return}p("play",C)}catch(B){console.error("[PlayList] B:",B),W.showMessage("")}}else m=C.id,h=window.setTimeout(()=>{p("select",C),m=null},300)}Et(async()=>{ht.cleanupCache(),await b()});async function b(){const C=await c.load(),_=await Promise.all(C.playlists.map(async D=>({...D,items:await ht.createMediaItems(D.items||[])})));t(1,i=_)}function w(){const C=i.map(_=>({id:_.id,name:_.name,isFixed:_.isFixed,items:ht.getMediaInfoFromItems(_.items||[])}));c.updatePlaylists(C)}async function v(C){if(C)try{const _=await ht.createMediaItem(C);if(!_){W.showMessage("");return}_.type==="bilibili"&&_.bvid&&_.cid&&console.log("[] B:",{:_.title,BV:_.bvid,CID:_.cid,UP:_.artist,:_.duration});const D=i.find(B=>B.id===s);if(!D)return;D.items=[...D.items||[],_],t(1,i),t(5,d=""),W.showMessage(""),p("addMedia",{tabId:s,url:C.trim()})}catch(_){console.error("Failed to add media:",_),W.showMessage("")}}const y={add(){l||(t(4,l=!0),setTimeout(()=>f==null?void 0:f.focus(),0))},save(C,_){if(C instanceof KeyboardEvent&&C.key!=="Enter")return;const D=C.target,B=D.value.trim();_?t(1,i=i.map(N=>N.id===_.id?{...N,name:B||N.name,isEditing:!1}:N)):B&&(t(1,i=[...i,{id:`tab-${Date.now()}`,name:B}]),t(4,l=!1)),D.value=""},showContextMenu(C,_){if(_.isFixed)return;const D=new W.Menu("tabContextMenu");D.addItem({icon:"iconEdit",label:"",click:()=>{t(1,i=i.map(B=>({...B,isEditing:B.id===_.id}))),setTimeout(()=>{const B=document.querySelector(`#tab-edit-${_.id}`);B==null||B.focus(),B==null||B.select()},0)}}),D.addItem({icon:"iconTrashcan",label:"",click:()=>{t(1,i=i.filter(B=>B.id!==_.id)),s===_.id&&t(2,s="default")}}),D.open({x:C.clientX,y:C.clientY})}},k={showContextMenu(C,_){const D=new W.Menu("mediaItemMenu");D.addItem({icon:"iconPlay",label:"",click:()=>p("play",_)}),D.addItem({icon:"iconPin",label:_.isPinned?"":"",click:()=>this.togglePin(_)}),D.addItem({icon:"iconHeart",label:_.isFavorite?"":"",click:()=>this.toggleFavorite(_)}),D.addSeparator(),D.addItem({icon:"iconTrashcan",label:"",click:()=>{const B=i.find(N=>N.id===s);if(B){if(B.items=B.items.filter(N=>N.id!==_.id),t(1,i),_.isFavorite){const N=i.find(O=>O.id==="favorites");N&&(N.items=N.items.filter(O=>O.id!==_.id))}p("remove",_)}}}),D.open({x:C.clientX,y:C.clientY})},togglePin(C){const _=i.find(B=>B.id===s);if(!_)return;const D=_.items.map(B=>B.id===C.id?{...B,isPinned:!B.isPinned}:B);_.items=[...D.filter(B=>B.isPinned),...D.filter(B=>!B.isPinned)],t(1,i)},toggleFavorite(C){const _=i.find(B=>B.id==="favorites"),D=i.find(B=>B.id===s);!_||!D||(C.isFavorite?_.items=_.items.filter(B=>B.id!==C.id):_.items=[..._.items||[],{...C,isFavorite:!0}],D.items=D.items.map(B=>B.id===C.id?{...B,isFavorite:!B.isFavorite}:B),t(1,i))}},M=(C,_)=>y.save(_,C),x=(C,_)=>y.save(_,C),E=C=>{t(2,s=C.id),p("tabChange",C.id)},T=(C,_)=>y.showContextMenu(_,C);function $(C){Yt[C?"unshift":"push"](()=>{f=C,t(6,f)})}const P=C=>g(C),L=(C,_)=>k.showContextMenu(_,C);function j(){d=this.value,t(5,d)}const I=C=>C.key==="Enter"&&v(d),S=()=>t(5,d=""),H=()=>d&&v(d);return u.$$set=C=>{"items"in C&&t(13,e=C.items),"currentItem"in C&&t(0,n=C.currentItem),"configManager"in C&&t(14,c=C.configManager)},u.$$.update=()=>{var C;u.$$.dirty[0]&6&&t(3,o=i.find(_=>_.id===s)),u.$$.dirty[0]&8&&t(7,r=((C=o==null?void 0:o.items)==null?void 0:C.length)||0),u.$$.dirty[0]&2&&i.length>0&&w()},[n,i,s,o,l,d,f,r,p,g,v,y,k,e,c,M,x,E,T,$,P,L,j,I,S,H]}class di extends Qt{constructor(a){super(),Gt(this,a,ui,ci,Kt,{items:13,currentItem:0,configManager:14},null,[-1,-1])}}function er(u,a,t){const o=u.slice();return o[21]=a[t],o}function fi(u){let a;return{c(){a=R("div"),a.textContent="B",F(a,"class","setting-description")},m(t,o){q(t,a,o)},p:J,d(t){t&&V(a)}}}function pi(u){let a,t,o,r,e,n,c=u[3].uname+"",i,s,l,d,f=u[3].level_info.current_level+"",p,h,m,g,b=u[3].mid+"",w;return{c(){a=R("div"),t=R("img"),r=U(),e=R("div"),n=R("div"),i=K(c),s=U(),l=R("span"),d=K("LV"),p=K(f),h=U(),m=R("div"),g=K("UID: "),w=K(b),F(t,"class","user-avatar"),mt(t.src,o=u[3].face)||F(t,"src",o),F(t,"alt",""),F(l,"class","user-level"),F(n,"class","user-name"),F(m,"class","user-id"),F(e,"class","user-details"),F(a,"class","user-wrapper")},m(v,y){q(v,a,y),A(a,t),A(a,r),A(a,e),A(e,n),A(n,i),A(n,s),A(n,l),A(l,d),A(l,p),A(e,h),A(e,m),A(m,g),A(m,w)},p(v,y){y&8&&!mt(t.src,o=v[3].face)&&F(t,"src",o),y&8&&c!==(c=v[3].uname+"")&&tt(i,c),y&8&&f!==(f=v[3].level_info.current_level+"")&&tt(p,f),y&8&&b!==(b=v[3].mid+"")&&tt(w,b)},d(v){v&&V(a)}}}function hi(u){let a,t,o;return{c(){a=R("button"),a.textContent="",F(a,"class","b3-button b3-button--outline")},m(r,e){q(r,a,e),t||(o=G(a,"click",u[7]),t=!0)},p:J,d(r){r&&V(a),t=!1,o()}}}function mi(u){let a,t,o,r,e;return{c(){a=R("button"),t=K(""),F(a,"class","b3-button b3-button--outline"),a.disabled=o=!!u[1]},m(n,c){q(n,a,c),A(a,t),r||(e=G(a,"click",u[6]),r=!0)},p(n,c){c&2&&o!==(o=!!n[1])&&(a.disabled=o)},d(n){n&&V(a),r=!1,e()}}}function rr(u){let a,t,o,r,e,n,c,i,s;return{c(){a=R("div"),t=R("div"),t.innerHTML='<div class="qrcode-title"></div> <div class="qrcode-description"></div>',o=U(),r=R("div"),e=R("img"),c=U(),i=R("div"),s=K(u[4]),F(t,"class","qrcode-header"),mt(e.src,n=u[1])||F(e,"src",n),F(e,"alt","B"),F(i,"class","scan-status"),it(i,"success",u[2]),F(r,"class","qrcode-container"),F(a,"class","bilibili-qrcode")},m(l,d){q(l,a,d),A(a,t),A(a,o),A(a,r),A(r,e),A(r,c),A(r,i),A(i,s)},p(l,d){d&2&&!mt(e.src,n=l[1])&&F(e,"src",n),d&16&&tt(s,l[4]),d&4&&it(i,"success",l[2])},d(l){l&&V(a)}}}function nr(u){let a,t=u[21].description+"",o;return{c(){a=R("div"),o=K(t),F(a,"class","setting-description")},m(r,e){q(r,a,e),A(a,o)},p(r,e){e&32&&t!==(t=r[21].description+"")&&tt(o,t)},d(r){r&&V(a)}}}function ir(u){let a,t,o,r,e,n,c,i,s,l,d;function f(...g){return u[12](u[21],...g)}function p(g,b){return g[21].key==="speed"?vi:gi}let h=p(u),m=h(u);return{c(){var g,b,w;a=R("div"),t=R("div"),o=R("input"),i=U(),s=R("span"),m.c(),F(o,"type","range"),F(o,"min",r=((g=u[21].slider)==null?void 0:g.min)??0),F(o,"max",e=((b=u[21].slider)==null?void 0:b.max)??100),F(o,"step",n=((w=u[21].slider)==null?void 0:w.step)??1),o.value=c=u[21].value,F(s,"class","slider-value"),F(t,"class","slider-wrapper"),F(a,"class","setting-content")},m(g,b){q(g,a,b),A(a,t),A(t,o),A(t,i),A(t,s),m.m(s,null),l||(d=G(o,"input",f),l=!0)},p(g,b){var w,v,y;u=g,b&32&&r!==(r=((w=u[21].slider)==null?void 0:w.min)??0)&&F(o,"min",r),b&32&&e!==(e=((v=u[21].slider)==null?void 0:v.max)??100)&&F(o,"max",e),b&32&&n!==(n=((y=u[21].slider)==null?void 0:y.step)??1)&&F(o,"step",n),b&32&&c!==(c=u[21].value)&&(o.value=c),h===(h=p(u))&&m?m.p(u,b):(m.d(1),m=h(u),m&&(m.c(),m.m(s,null)))},d(g){g&&V(a),m.d(),l=!1,d()}}}function gi(u){let a=u[21].value+"",t;return{c(){t=K(a)},m(o,r){q(o,t,r)},p(o,r){r&32&&a!==(a=o[21].value+"")&&tt(t,a)},d(o){o&&V(t)}}}function vi(u){let a=u[21].value/100+"",t,o;return{c(){t=K(a),o=K("x")},m(r,e){q(r,t,e),q(r,o,e)},p(r,e){e&32&&a!==(a=r[21].value/100+"")&&tt(t,a)},d(r){r&&(V(t),V(o))}}}function ar(u){let a,t,o,r,e,n,c;function i(...s){return u[13](u[21],...s)}return{c(){a=R("label"),t=R("input"),r=U(),e=R("span"),F(t,"type","checkbox"),t.checked=o=u[21].value,F(e,"class","checkbox-custom"),F(a,"class","checkbox-wrapper")},m(s,l){q(s,a,l),A(a,t),A(a,r),A(a,e),n||(c=G(t,"change",i),n=!0)},p(s,l){u=s,l&32&&o!==(o=u[21].value)&&(t.checked=o)},d(s){s&&V(a),n=!1,c()}}}function or(u,a){let t,o,r,e=a[21].title+"",n,c,i,s,l,d,f=a[21].description&&nr(a),p=a[21].type==="slider"&&ir(a),h=a[21].type==="checkbox"&&ar(a);return{key:u,first:null,c(){t=R("div"),o=R("div"),r=R("div"),n=K(e),c=U(),f&&f.c(),i=U(),p&&p.c(),s=U(),l=R("div"),h&&h.c(),d=U(),F(r,"class","setting-title"),F(o,"class","setting-info"),F(l,"class","setting-control"),F(t,"class","setting-item"),this.first=t},m(m,g){q(m,t,g),A(t,o),A(o,r),A(r,n),A(o,c),f&&f.m(o,null),A(o,i),p&&p.m(o,null),A(t,s),A(t,l),h&&h.m(l,null),A(t,d)},p(m,g){a=m,g&32&&e!==(e=a[21].title+"")&&tt(n,e),a[21].description?f?f.p(a,g):(f=nr(a),f.c(),f.m(o,i)):f&&(f.d(1),f=null),a[21].type==="slider"?p?p.p(a,g):(p=ir(a),p.c(),p.m(o,null)):p&&(p.d(1),p=null),a[21].type==="checkbox"?h?h.p(a,g):(h=ar(a),h.c(),h.m(l,null)):h&&(h.d(1),h=null)},d(m){m&&V(t),f&&f.d(),p&&p.d(),h&&h.d()}}}function yi(u){let a,t,o,r,e,n,c,i,s,l,d,f,p,h,m,g,b,w,v,y=[],k=new Map,M,x;function E(C,_){return C[2]&&C[3]?pi:fi}let T=E(u),$=T(u);function P(C,_){return C[2]?hi:mi}let L=P(u),j=L(u),I=u[1]&&!u[2]&&rr(u),S=Tt(u[5]);const H=C=>C[21].key;for(let C=0;C<S.length;C+=1){let _=er(u,S,C),D=H(_);k.set(D,y[C]=or(D,_))}return{c(){a=R("div"),t=R("div"),o=R("h3"),o.textContent="",r=U(),e=R("div"),n=R("button"),n.innerHTML="<span></span>",c=U(),i=R("button"),i.innerHTML="<span></span>",s=U(),l=R("div"),d=R("div"),f=R("div"),p=R("div"),p.textContent="B",h=U(),m=R("div"),$.c(),g=U(),b=R("div"),j.c(),w=U(),I&&I.c(),v=U();for(let C=0;C<y.length;C+=1)y[C].c();F(n,"class","btn"),F(i,"class","btn primary"),F(e,"class","header-actions"),F(t,"class","settings-header"),F(p,"class","setting-title"),F(m,"class","setting-content"),F(f,"class","setting-info"),F(b,"class","setting-control"),F(d,"class","setting-item"),F(l,"class","setting-panel"),F(a,"class","settings"),F(a,"data-name",u[0])},m(C,_){q(C,a,_),A(a,t),A(t,o),A(t,r),A(t,e),A(e,n),A(e,c),A(e,i),A(a,s),A(a,l),A(l,d),A(d,f),A(f,p),A(f,h),A(f,m),$.m(m,null),A(d,g),A(d,b),j.m(b,null),A(l,w),I&&I.m(l,null),A(l,v);for(let D=0;D<y.length;D+=1)y[D]&&y[D].m(l,null);M||(x=[G(n,"click",u[9]),G(i,"click",u[8])],M=!0)},p(C,[_]){T===(T=E(C))&&$?$.p(C,_):($.d(1),$=T(C),$&&($.c(),$.m(m,null))),L===(L=P(C))&&j?j.p(C,_):(j.d(1),j=L(C),j&&(j.c(),j.m(b,null))),C[1]&&!C[2]?I?I.p(C,_):(I=rr(C),I.c(),I.m(l,v)):I&&(I.d(1),I=null),_&1056&&(S=Tt(C[5]),y=Ae(y,_,H,1,C,S,k,l,Fe,or,null,er)),_&1&&F(a,"data-name",C[0])},i:J,o:J,d(C){C&&V(a),$.d(),j.d(),I&&I.d();for(let _=0;_<y.length;_+=1)y[_].d();M=!1,et(x)}}}function bi(u,a,t){let{group:o}=a,{configManager:r}=a,e="",n="",c,i=!1,s=null,l="...";Et(()=>()=>{c&&clearInterval(c)});async function d(){try{const x=await lt.getLoginQRCode();t(1,e=x.qrcodeData),n=x.qrcode_key,h()}catch(x){W.showMessage(x.message||"")}}async function f(x){t(2,i=!0),x.timestamp,t(3,s=x.userInfo);const E=await r.getConfig();E.bilibiliLogin={url:x.url,refresh_token:x.refresh_token,timestamp:x.timestamp,userInfo:x.userInfo},await r.save(),W.showMessage("")}async function p(){t(2,i=!1),t(3,s=null);const x=await r.getConfig();delete x.bilibiliLogin,await r.save(),W.showMessage("")}function h(){c&&clearInterval(c),c=window.setInterval(async()=>{try{const x=await lt.checkQRCodeStatus(n);switch(x.code){case 0:clearInterval(c),t(4,l=""),await f(x);break;case 86038:clearInterval(c),t(4,l=""),t(1,e="");break;case 86090:t(4,l="");break;case 86101:t(4,l="...");break;default:t(4,l=x.message||"")}}catch{clearInterval(c),W.showMessage("")}},3e3)}const m=[{key:"autoplay",value:!1,type:"checkbox",title:"",description:""},{key:"loop",value:!1,type:"checkbox",title:"",description:""},{key:"volume",value:70,type:"slider",title:"",description:"",slider:{min:0,max:100,step:1}},{key:"speed",value:100,type:"slider",title:"",description:"",slider:{min:10,max:200,step:10}},{key:"hotkey",value:!0,type:"checkbox",title:"",description:""}];let g=[...m];Et(async()=>{const x=await r.load();x.bilibiliLogin&&(t(2,i=!0),x.bilibiliLogin.timestamp,t(3,s=x.bilibiliLogin.userInfo||null)),t(5,g=g.map(E=>({...E,value:x.settings[E.key]??E.value})))});const b=Se();async function w(){const x=g.reduce((E,T)=>({...E,[T.key]:T.value}),{});await r.updateSettings(x),b("changed",{settings:x}),W.showMessage("")}function v(){t(5,g=m.map(x=>({...x}))),b("changed",{settings:g.reduce((x,E)=>({...x,[E.key]:E.value}),{})}),W.showMessage("")}function y(x,E){const T=x.target;let $=T.type==="checkbox"?T.checked:T.value;E.type==="slider"&&($=Number($),E.value=$,t(5,g));const P=g.findIndex(L=>L.key===E.key);P!==-1&&(t(5,g[P].value=$,g),t(5,g))}const k=(x,E)=>y(E,x),M=(x,E)=>y(E,x);return u.$$set=x=>{"group"in x&&t(0,o=x.group),"configManager"in x&&t(11,r=x.configManager)},[o,e,i,s,l,g,d,p,w,v,y,r,k,M]}class wi extends Qt{constructor(a){super(),Gt(this,a,bi,yi,Kt,{group:0,configManager:11})}}function xi(u){let a;return{c(){a=K("")},m(t,o){q(t,a,o)},p:J,d(t){t&&V(a)}}}function ki(u){let a=u[0].title+"",t,o,r,e=u[0].artist&&sr(u);return{c(){t=K(a),o=U(),e&&e.c(),r=xe()},m(n,c){q(n,t,c),q(n,o,c),e&&e.m(n,c),q(n,r,c)},p(n,c){c&1&&a!==(a=n[0].title+"")&&tt(t,a),n[0].artist?e?e.p(n,c):(e=sr(n),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},d(n){n&&(V(t),V(o),V(r)),e&&e.d(n)}}}function sr(u){let a,t=u[0].artist+"",o;return{c(){a=K("- "),o=K(t)},m(r,e){q(r,a,e),q(r,o,e)},p(r,e){e&1&&t!==(t=r[0].artist+"")&&tt(o,t)},d(r){r&&(V(a),V(o))}}}function Ci(u){let a,t,o,r,e,n,c,i,s,l,d,f,p,h,m;function g(v,y){return v[0]?ki:xi}let b=g(u),w=b(u);return{c(){a=R("div"),t=R("div"),o=R("button"),o.innerHTML='<svg viewBox="0 0 1024 1024" class="icon"><path d="M853.333333 170.666667a73.142857 73.142857 0 0 1 73.142857 73.142857v536.380952a73.142857 73.142857 0 0 1-73.142857 73.142857H170.666667a73.142857 73.142857 0 0 1-73.142857-73.142857V243.809524a73.142857 73.142857 0 0 1 73.142857-73.142857h682.666666z m0 73.142857H170.666667v536.380952h682.666666V243.809524z m-375.856762 168.057905l120.685715 120.685714 51.687619-51.712 172.422095 172.373333-51.712 51.736381-120.685714-120.685714-51.736381 51.736381-120.685715-120.685714-224.109714 224.109714-51.712-51.687619 275.846095-275.870476zM731.428571 292.571429a48.761905 48.761905 0 1 1 0 97.523809 48.761905 48.761905 0 0 1 0-97.523809z"></path></svg>',r=U(),e=R("button"),e.innerHTML='<svg viewBox="0 0 1024 1024" class="icon"><path d="M511.292952 121.904762c80.408381 0 155.087238 24.405333 217.136762 66.218667l-49.737143 49.785904a318.756571 318.756571 0 0 0-167.399619-47.152762C334.189714 190.756571 190.610286 334.57981 190.610286 512s143.60381 321.243429 320.682666 321.243429c177.103238 0 320.682667-143.823238 320.682667-321.243429 0-49.127619-11.02019-95.695238-30.72-137.337905l51.102476-51.078095A388.87619 388.87619 0 0 1 900.681143 512c0 215.454476-174.32381 390.095238-389.36381 390.095238C296.228571 902.095238 121.904762 727.454476 121.904762 512S296.228571 121.904762 511.292952 121.904762z m0 137.679238c42.179048 0 81.968762 10.386286 116.906667 28.769524l-51.955809 51.931428a182.54019 182.54019 0 0 0-64.950858-11.849142c-101.180952 0-183.247238 82.16381-183.247238 183.56419 0 101.376 82.041905 183.588571 183.247238 183.588571s183.247238-82.212571 183.247238-183.588571a185.295238 185.295238 0 0 0-2.194285-28.42819l56.344381-56.32c9.435429 26.477714 14.57981 55.003429 14.579809 84.74819 0 139.410286-112.810667 252.416-251.977143 252.416-139.142095 0-251.952762-113.005714-251.952762-252.416s112.810667-252.416 251.952762-252.416zM853.577143 143.433143L902.095238 192.146286 566.613333 527.676952l-51.102476 2.681905 2.535619-51.297524 335.481905-335.62819z"></path></svg>',n=U(),c=R("div"),i=R("span"),w.c(),s=U(),l=R("div"),d=R("button"),d.innerHTML='<svg viewBox="0 0 1024 1024" class="icon"><path d="M414.47619 121.904762a73.142857 73.142857 0 0 1 73.142858 73.142857v219.428571a73.142857 73.142857 0 0 1-73.142858 73.142858H195.047619a73.142857 73.142857 0 0 1-73.142857-73.142858V195.047619a73.142857 73.142857 0 0 1 73.142857-73.142857h219.428571zM195.047619 195.047619v219.428571h219.428571V195.047619H195.047619z m219.428571 341.333333a73.142857 73.142857 0 0 1 73.142858 73.142858v219.428571a73.142857 73.142857 0 0 1-73.142858 73.142857H195.047619a73.142857 73.142857 0 0 1-73.142857-73.142857v-219.428571a73.142857 73.142857 0 0 1 73.142857-73.142858h219.428571z m-219.428571 73.142858v219.428571h219.428571v-219.428571H195.047619zM536.380952 182.857143v73.142857h353.52381v-73.142857H536.380952zM536.380952 609.52381v73.142857h353.52381v-73.142857H536.380952z m0-268.190477v73.142857h353.52381v-73.142857H536.380952z m0 426.666667v73.142857h353.52381v-73.142857H536.380952z"></path></svg>',f=U(),p=R("button"),p.innerHTML='<svg viewBox="0 0 1024 1024" class="icon"><path d="M448.487619 97.52381l130.096762 0.170666c40.399238 0.073143 73.142857 32.792381 73.191619 73.216l0.048762 21.211429a345.283048 345.283048 0 0 1 71.143619 39.960381l17.408-10.044953a73.313524 73.313524 0 0 1 99.961905 26.819048l65.219047 112.566857a73.313524 73.313524 0 0 1-22.893714 97.816381l-3.974095 2.438095-17.481143 10.093715a341.479619 341.479619 0 0 1-1.292191 83.968l12.361143 7.168a73.313524 73.313524 0 0 1 28.867048 96.329142l-2.023619 3.803429-61.098667 105.813333a73.313524 73.313524 0 0 1-96.329143 28.867048l-3.803428-2.048-16.896-9.752381a341.918476 341.918476 0 0 1-68.291048 38.083048l0.024381 29.062095a73.313524 73.313524 0 0 1-68.754286 73.264762l-4.632381 0.146285-130.121142-0.170666a73.313524 73.313524 0 0 1-73.191619-73.216l-0.048762-35.035429a346.599619 346.599619 0 0 1-57.368381-34.035809l-31.158857 17.944381a73.313524 73.313524 0 0 1-99.986286-26.819048l-65.219048-112.566857a73.313524 73.313524 0 0 1 22.918095-97.816381l3.949715-2.438095 31.719619-18.285715c-2.438095-23.161905-2.56-46.665143-0.219429-70.119619l-35.206095-20.333714a73.313524 73.313524 0 0 1-28.891429-96.329143l2.048-3.803428 61.098667-105.813334a73.313524 73.313524 0 0 1 96.329143-28.867047l3.803429 2.048 30.72 17.724952a341.284571 341.284571 0 0 1 64.609523-39.716571l-0.048762-27.89181a73.313524 73.313524 0 0 1 68.754286-73.264762L448.487619 97.52381z m-0.097524 73.313523l0.073143 74.48381-42.130286 19.846095c-18.041905 8.46019-35.05981 18.919619-50.761142 31.158857l-38.936381 30.403048-71.655619-41.398857-1.852953-1.024-61.074286 105.813333 76.239239 44.007619-4.729905 47.104a268.434286 268.434286 0 0 0 0.170666 55.100952l5.022477 47.445334-73.069715 42.081524 65.194667 112.566857 72.557714-41.740191 38.473143 28.184381a272.579048 272.579048 0 0 0 45.226667 26.819048l42.057143 19.772952 0.146285 81.529905 130.072381 0.170667-0.073143-78.019048 45.202286-18.822095a268.629333 268.629333 0 0 0 53.638095-29.915429l38.448762-27.648 57.904762 33.426286 61.049905-105.813333-55.100952-31.890286 6.826666-48.88381a268.190476 268.190476 0 0 0 1.024-65.950476l-5.12-47.494095 58.928762-34.011429-65.219047-112.566857L718.262857 319.390476l-38.497524-28.086857a272.62781 272.62781 0 0 0-56.051809-31.50019l-45.104762-18.724572-0.121905-70.070857-130.096762-0.170667z m145.895619 210.407619a146.773333 146.773333 0 0 1 53.686857 200.362667 146.407619 146.407619 0 0 1-200.167619 53.638095 146.773333 146.773333 0 0 1-53.662476-200.362666 146.407619 146.407619 0 0 1 200.167619-53.638096z m-136.655238 90.258286a73.48419 73.48419 0 0 0 26.86781 100.278857 73.118476 73.118476 0 0 0 99.961904-26.770285c19.529143-33.865143 9.020952-76.824381-23.186285-98.03581l-3.657143-2.267429-3.803429-2.048a73.118476 73.118476 0 0 0-96.182857 28.842667z"></path></svg>',F(o,"class","control-btn"),F(o,"title",""),F(e,"class","control-btn"),F(e,"title",""),F(t,"class","left-controls"),F(i,"class","media-title"),F(c,"class","title-area"),F(d,"class","control-btn"),F(d,"title",""),F(p,"class","control-btn"),F(p,"title",""),F(l,"class","right-controls"),F(a,"class","control-bar")},m(v,y){q(v,a,y),A(a,t),A(t,o),A(t,r),A(t,e),A(a,n),A(a,c),A(c,i),w.m(i,null),A(a,s),A(a,l),A(l,d),A(l,f),A(l,p),h||(m=[G(o,"click",u[1]),G(e,"click",u[2]),G(d,"click",u[3]),G(p,"click",u[4])],h=!0)},p(v,[y]){b===(b=g(v))&&w?w.p(v,y):(w.d(1),w=b(v),w&&(w.c(),w.m(i,null)))},i:J,o:J,d(v){v&&V(a),w.d(),h=!1,et(m)}}}function Ei(u,a,t){const o=Se();let{currentItem:r=null}=a;function e(){o("screenshot")}function n(){o("timestamp")}function c(){o("playlist")}function i(){o("settings")}return u.$$set=s=>{"currentItem"in s&&t(0,r=s.currentItem)},[r,e,n,c,i]}class Ti extends Qt{constructor(a){super(),Gt(this,a,Ei,Ci,Kt,{currentItem:0})}}function lr(u){let a,t;return a=new di({props:{configManager:u[1],currentItem:u[6]}}),a.$on("select",u[12]),a.$on("play",u[13]),{c(){ie(a.$$.fragment)},m(o,r){Vt(a,o,r),t=!0},p(o,r){const e={};r&2&&(e.configManager=o[1]),r&64&&(e.currentItem=o[6]),a.$set(e)},i(o){t||(nt(a.$$.fragment,o),t=!0)},o(o){ft(a.$$.fragment,o),t=!1},d(o){qt(a,o)}}}function cr(u){let a,t;return a=new wi({props:{group:"mediaPlayer",configManager:u[1]}}),a.$on("changed",u[8]),{c(){ie(a.$$.fragment)},m(o,r){Vt(a,o,r),t=!0},p(o,r){const e={};r&2&&(e.configManager=o[1]),a.$set(e)},i(o){t||(nt(a.$$.fragment,o),t=!0)},o(o){ft(a.$$.fragment,o),t=!1},d(o){qt(a,o)}}}function _i(u){let a,t,o,r,e,n,c,i,s,l,d,f,p,h={app:u[0],config:u[7]};r=new un({props:h}),u[15](r),c=new Ti({props:{currentItem:u[6]}}),c.$on("screenshot",u[11]),c.$on("timestamp",u[11]),c.$on("playlist",u[11]),c.$on("settings",u[11]);let m=u[4]&&lr(u),g=u[5]&&cr(u);return{c(){a=R("div"),t=R("div"),o=R("div"),ie(r.$$.fragment),e=U(),n=R("div"),ie(c.$$.fragment),i=U(),s=R("div"),m&&m.c(),l=U(),g&&g.c(),F(n,"class","control-bar"),it(n,"hidden",!u[3]),F(o,"class","player-area"),F(s,"class","sidebar"),it(s,"show",u[4]||u[5]),F(t,"class","content-area"),it(t,"with-sidebar",u[4]||u[5]),F(a,"class","media-player-tab")},m(b,w){q(b,a,w),A(a,t),A(t,o),Vt(r,o,null),A(o,e),A(o,n),Vt(c,n,null),A(t,i),A(t,s),m&&m.m(s,null),A(s,l),g&&g.m(s,null),d=!0,f||(p=[G(a,"mousemove",u[9]),G(a,"mouseleave",u[10])],f=!0)},p(b,[w]){const v={};w&1&&(v.app=b[0]),w&128&&(v.config=b[7]),r.$set(v);const y={};w&64&&(y.currentItem=b[6]),c.$set(y),(!d||w&8)&&it(n,"hidden",!b[3]),b[4]?m?(m.p(b,w),w&16&&nt(m,1)):(m=lr(b),m.c(),nt(m,1),m.m(s,l)):m&&(Ne(),ft(m,1,1,()=>{m=null}),Oe()),b[5]?g?(g.p(b,w),w&32&&nt(g,1)):(g=cr(b),g.c(),nt(g,1),g.m(s,null)):g&&(Ne(),ft(g,1,1,()=>{g=null}),Oe()),(!d||w&48)&&it(s,"show",b[4]||b[5]),(!d||w&48)&&it(t,"with-sidebar",b[4]||b[5])},i(b){d||(nt(r.$$.fragment,b),nt(c.$$.fragment,b),nt(m),nt(g),d=!0)},o(b){ft(r.$$.fragment,b),ft(c.$$.fragment,b),ft(m),ft(g),d=!1},d(b){b&&V(a),u[15](null),qt(r),qt(c),m&&m.d(),g&&g.d(),f=!1,et(p)}}}function Mi(u,a,t){let{app:o}=a,{configManager:r}=a,{onPlayerReady:e}=a,n=!0,c,i=!1,s=!1,l=null,d,f;Et(async()=>{const k=await r.load();t(7,f=k.settings)});function p(k){const{settings:M}=k.detail;t(7,f=M),d&&d.updateConfig(M)}function h(){t(3,n=!0),clearTimeout(c),c=window.setTimeout(()=>{t(3,n=!1)},3e3)}function m(){clearTimeout(c),t(3,n=!1)}async function g(k){switch(k.type){case"screenshot":d&&(await d.screenshot()?W.showMessage(""):W.showMessage(""));break;case"timestamp":if(d){const M=d.generateTimestampLink(l);if(M)try{await navigator.clipboard.writeText(M),W.showMessage("")}catch(x){console.error(":",x),W.showMessage("")}else W.showMessage("")}break;case"playlist":t(4,i=!i),i&&t(5,s=!1);break;case"settings":t(5,s=!s),s&&t(4,i=!1);break}}function b(k){t(6,l=k.detail)}async function w(k){t(6,l=k.detail),d&&(l.type==="bilibili"?d.play(l.url,l.playOptions||{type:"bilibili",bvid:l.bvid,originalUrl:l.originalUrl||l.url,audioUrl:l.audioUrl,headers:l.headers,title:l.title,autoplay:f==null?void 0:f.autoplay,startTime:0}):d.play(l.url,{originalUrl:l.originalUrl||l.url,autoplay:f==null?void 0:f.autoplay,startTime:0}))}async function v(k){const{type:M,url:x,options:E}=k.detail;if(M==="bilibili"&&(l!=null&&l.bvid)&&(l!=null&&l.cid))try{console.log("[] B");const T=await r.getConfig(),$=await lt.getProcessedVideoStream(l.bvid,l.cid,0,T,l.page);d&&d.play($.video.url,{type:"bilibili",audioUrl:$.audio.url,headers:$.headers,title:l.title})}catch(T){console.error("[] :",T),W.showMessage("")}}Et(()=>{const k=document.querySelector(".artplayer-app");return k&&k.addEventListener("streamError",v),()=>{k&&k.removeEventListener("streamError",v)}});function y(k){Yt[k?"unshift":"push"](()=>{d=k,t(2,d)})}return u.$$set=k=>{"app"in k&&t(0,o=k.app),"configManager"in k&&t(1,r=k.configManager),"onPlayerReady"in k&&t(14,e=k.onPlayerReady)},u.$$.update=()=>{u.$$.dirty&16388&&d&&setTimeout(()=>{e(d)},0)},[o,r,d,n,i,s,l,f,p,h,m,g,b,w,e,y]}class ji extends Qt{constructor(a){super(),Gt(this,a,Mi,_i,Kt,{app:0,configManager:1,onPlayerReady:14})}}class Ii{constructor(a){Q(this,"plugin");Q(this,"config");this.plugin=a,this.config=this.getDefaultConfig()}getDefaultConfig(){return{playlists:[{id:"default",name:"",items:[],isFixed:!0},{id:"favorites",name:"",items:[],isFixed:!0}],settings:{volume:70,speed:100,hotkey:!0,loop:!1,autoplay:!1}}}async load(){try{const a=await this.plugin.loadData("config.json");a&&(this.config={...this.config,...a})}catch(a){console.error("Failed to load config:",a)}return this.config}async save(){try{await this.plugin.saveData("config.json",this.config)}catch(a){console.error("Failed to save config:",a)}}async updatePlaylists(a){this.config.playlists=a,await this.save()}async updateSettings(a){this.config.settings=a,await this.save()}getConfig(){return this.config}}class Si{constructor(a,t){Q(this,"configManager");Q(this,"openMediaPlayerTab");Q(this,"player");Q(this,"isListening",!1);Q(this,"currentMediaItem",null);Q(this,"handleClick",async a=>{var o,r;const t=a.target;if(!(!((o=t.dataset)!=null&&o.type)==="a"||!((r=t.dataset)!=null&&r.href)))try{let e=t.dataset.href;if(await this.isMediaLink(e)){a.preventDefault(),a.stopPropagation();const n=this.extractTimestamp(e);let c=e.split("#")[0];if(!c.startsWith("http")&&!c.startsWith("file://")&&(c=ht.convertToFileUrl(c)),this.isSameMedia(c)&&this.player){n!==null&&(this.player.seek(n),console.log("[LinkHandler] :",n));return}await this.handleMediaLink(c,n)}}catch(e){console.error("[LinkHandler] :",e),W.showMessage("")}});this.configManager=a,this.openMediaPlayerTab=t}startListening(){this.isListening||(document.addEventListener("click",this.handleClick,!0),this.isListening=!0,console.log("[LinkHandler] "))}stopListening(){document.removeEventListener("click",this.handleClick,!0),this.isListening=!1,console.log("[LinkHandler] ")}setPlayer(a){this.player=a,a||(this.currentMediaItem=null)}isSameMedia(a){if(!this.currentMediaItem)return!1;if(this.currentMediaItem.type==="bilibili"){const o=a.match(/\/video\/(BV[\w]+)/);return o&&this.currentMediaItem.bvid===o[1]}const t=o=>o.split("#")[0];return t(a)===t(this.currentMediaItem.url)}extractTimestamp(a){try{let t=null;if(a.includes("bilibili.com/video/")){const r=new URLSearchParams(a.split("?")[1]).get("t");r&&(t=parseFloat(r))}else{const o=a.match(/#t=(\d+\.?\d*)/);o&&(t=parseFloat(o[1]))}return t!==null?!Number.isFinite(t)||t<0?(console.warn("[LinkHandler] :",t),null):t:null}catch(t){return console.error("[LinkHandler] :",t),null}}async isMediaLink(a){try{if(a.includes("bilibili.com/video/"))return!0;const t=a.split("#")[0],o=[".mp4",".mp3",".webm",".ogg",".wav",".m4v"];if(t.startsWith("file://"))return o.some(r=>t.toLowerCase().endsWith(r));if(t.startsWith("http")){const r=new URL(t).pathname;return o.some(e=>r.toLowerCase().endsWith(e))}else{const r=/^[a-zA-Z]:\\/.test(t),e=t.startsWith("/");if(r||e)return o.some(n=>t.toLowerCase().endsWith(n))}return!1}catch(t){return console.error("[LinkHandler] :",t),!1}}async handleMediaLink(a,t){var o;try{const r=await ht.createMediaItem(a);if(!r){W.showMessage("");return}if(r.type==="bilibili"&&r.bvid&&r.cid){const e=await this.configManager.getConfig(),n=await lt.getProcessedVideoStream(r.bvid,r.cid,0,e),c={...r,url:n.video.url,audioUrl:(o=n.audio)==null?void 0:o.url,headers:n.headers};this.currentMediaItem=c,await this.playMedia(c,t)}else this.currentMediaItem=r,await this.playMedia(r,t)}catch(r){console.error("[LinkHandler] :",r),W.showMessage(""),this.currentMediaItem=null}}async playMedia(a,t){var o;try{await this.openMediaPlayerTab();let r=0;for(;!this.player&&r<5;)await new Promise(i=>setTimeout(i,500)),r++;if(!this.player){W.showMessage("");return}let e=null;t!==null&&(Number.isFinite(t)&&t>=0?e=t:console.warn("[LinkHandler] :",t));const n=await this.configManager.getConfig(),c={startTime:e||0,autoplay:(o=n.settings)==null?void 0:o.autoplay,originalUrl:a.originalUrl||a.url,...a.type==="bilibili"?{type:"bilibili",bvid:a.bvid,audioUrl:a.audioUrl,headers:a.headers,title:a.title}:{}};await this.player.play(a.url,c),console.log("[LinkHandler] ",{:a.title,:t,:a.type})}catch(r){console.error("[LinkHandler] :",r),W.showMessage("")}}}class Fi extends W.Plugin{constructor(){super(...arguments);Q(this,"configManager");Q(this,"mediaPlayerTab",null);Q(this,"activeContainer",null);Q(this,"TAB_TYPE","MediaPlayerTab");Q(this,"isMobile");Q(this,"linkHandler")}async onload(){console.log("");const t=W.getFrontend();this.isMobile=t==="mobile"||t==="browser-mobile",this.addIcons(`<symbol id="iconMediaPlayer" viewBox="0 0 1024 1024">
            <path d="M513.792 514.5088m-457.0112 0a457.0112 457.0112 0 1 0 914.0224 0 457.0112 457.0112 0 1 0-914.0224 0Z" fill="#8C7BFD"></path>
            <path d="M440.6272 732.16c-17.6128 0-35.2768-4.6592-51.3024-13.9264-32.1536-18.5344-51.3024-51.7632-51.3024-88.8832V399.6672c0-37.12 19.2-70.3488 51.3024-88.8832 32.1536-18.5856 70.5024-18.5344 102.656 0l198.912 114.8416c32.1536 18.5344 51.3024 51.7632 51.3024 88.8832s-19.2 70.3488-51.3024 88.8832l-198.912 114.8416c-16.0768 9.2672-33.7408 13.9264-51.3536 13.9264z m0.0512-332.6976c-0.1024 0-0.3072 0.1024-0.4096 0.2048l0.1024 229.6832c0 0.1536 0.256 0.3072 0.4096 0.3072l198.8608-114.944c0.1536-0.0512 0.1536-0.3584 0.1024-0.512l-0.1024 0.1024-198.8608-114.8416h-0.1024z" fill="#FFE37B"></path>
        </symbol>`),this.configManager=new Ii(this),await this.configManager.load(),this.addTopBar({icon:"iconMediaPlayer",title:this.i18n.name,position:"right",callback:()=>{this.openMediaPlayerTab()}}),this.registerHotkeys(),this.linkHandler=new Si(this.configManager,()=>this.openMediaPlayerTab()),this.linkHandler.startListening()}onLayoutReady(){console.log("")}async onunload(){var t;console.log("");try{if((t=this.mediaPlayerTab)!=null&&t.player){if(typeof this.mediaPlayerTab.player.pause=="function"&&this.mediaPlayerTab.player.pause(),this.mediaPlayerTab.player.plugins){const o=this.mediaPlayerTab.player.plugins.bilibili;o&&typeof o.destroy=="function"&&o.destroy()}this.mediaPlayerTab.player.destroy(!0)}this.linkHandler.stopListening(),this.mediaPlayerTab=null}catch(o){console.error(":",o)}}registerHotkeys(){this.addCommand({langKey:"screenshot",langText:this.i18n.screenshot.text,hotkey:"",callback:()=>{this.handleHotkeyAction("screenshot")}}),this.addCommand({langKey:"timestamp",langText:this.i18n.timestamp.text,hotkey:"",callback:()=>{this.handleHotkeyAction("timestamp")}})}async handleHotkeyAction(t){if(!this.activeContainer){W.showMessage(this.i18n.openPlayer);return}const o=this.activeContainer.querySelector(".control-bar");if(!o){W.showMessage(this.i18n.playerNotReady);return}const r={screenshot:this.i18n.screenshot.name,timestamp:this.i18n.timestamp.name}[t],e=o.querySelector(`button[title="${r}"]`);e instanceof HTMLElement?e.click():(console.warn(` "${r}" `),W.showMessage(this.i18n.buttonNotFound))}openMediaPlayerTab(){const t=this;this.addTab({type:this.TAB_TYPE,init(){const o=document.createElement("div");o.className="media-player-container",t.activeContainer=o,t.mediaPlayerTab=new ji({target:o,props:{app:t.app,configManager:t.configManager,onPlayerReady:r=>{t.linkHandler.setPlayer(r)}}}),this.element.appendChild(o)},destroy(){var o,r;console.log("Destroying media player tab");try{if((o=t.mediaPlayerTab)!=null&&o.player){if(typeof t.mediaPlayerTab.player.pause=="function"&&t.mediaPlayerTab.player.pause(),t.mediaPlayerTab.player.plugins){const e=t.mediaPlayerTab.player.plugins.bilibili;e&&typeof e.destroy=="function"&&e.destroy()}t.mediaPlayerTab.player.destroy(!0)}(r=t.mediaPlayerTab)!=null&&r.$destroy&&t.mediaPlayerTab.$destroy()}catch(e){console.error(":",e)}t.mediaPlayerTab=null,t.activeContainer=null,t.linkHandler.setPlayer(null)}}),W.openTab({app:this.app,custom:{icon:"iconMediaPlayer",title:this.i18n.name,id:this.name+this.TAB_TYPE}})}}module.exports=Fi;
